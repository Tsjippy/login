{"version":3,"file":"login.min.js","mappings":"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","sources":["webpack://login/./node_modules/device-detector-js/dist/utils/version-compare.js","webpack://login/./node_modules/device-detector-js/dist/parsers/device/cars.js","webpack://login/./node_modules/device-detector-js/dist/utils/version.js","webpack://login/./node_modules/device-detector-js/dist/parsers/device/cameras.js","webpack://login/./node_modules/device-detector-js/dist/parsers/device/televisions.js","webpack://login/./node_modules/device-detector-js/dist/utils/memory-cache.js","webpack://login/./node_modules/device-detector-js/dist/parsers/vendor-fragment/index.js","webpack://login/./node_modules/device-detector-js/dist/parsers/client/browser.js","webpack://login/./node_modules/device-detector-js/dist/utils/user-agent.js","webpack://login/./node_modules/device-detector-js/dist/parsers/device/consoles.js","webpack://login/./node_modules/device-detector-js/dist/parsers/client/index.js","webpack://login/./node_modules/device-detector-js/dist/parsers/client/mobile-apps.js","webpack://login/./node_modules/device-detector-js/dist/parsers/operating-system/index.js","webpack://login/./node_modules/device-detector-js/dist/parsers/client/libraries.js","webpack://login/./node_modules/device-detector-js/dist/parsers/device/index.js","webpack://login/./node_modules/device-detector-js/dist/utils/variable-replacement.js","webpack://login/./node_modules/device-detector-js/dist/parsers/client/media-players.js","webpack://login/./node_modules/device-detector-js/dist/parsers/device/notebooks.js","webpack://login/./node_modules/device-detector-js/dist/utils/model.js","webpack://login/./node_modules/device-detector-js/dist/index.js","webpack://login/./node_modules/device-detector-js/dist/parsers/client/personal-information-managers.js","webpack://login/./node_modules/device-detector-js/dist/utils/trim.js","webpack://login/./node_modules/device-detector-js/dist/parsers/device/portable-media-players.js","webpack://login/./node_modules/device-detector-js/dist/parsers/device/mobiles.js","webpack://login/./node_modules/device-detector-js/dist/parsers/bot/index.js","webpack://login/./node_modules/device-detector-js/dist/parsers/client/feed-readers.js","webpack://login/webpack/bootstrap","webpack://login/./partials/shared.js","webpack://login/./partials/qr_login.js","webpack://login/webpack/runtime/compat get default export","webpack://login/webpack/runtime/define property getters","webpack://login/webpack/runtime/hasOwnProperty shorthand","webpack://login/./node_modules/@simplewebauthn/browser/esm/helpers/bufferToBase64URLString.js","webpack://login/./node_modules/@simplewebauthn/browser/esm/helpers/base64URLStringToBuffer.js","webpack://login/./node_modules/@simplewebauthn/browser/esm/helpers/browserSupportsWebAuthn.js","webpack://login/./node_modules/@simplewebauthn/browser/esm/helpers/toPublicKeyCredentialDescriptor.js","webpack://login/./node_modules/@simplewebauthn/browser/esm/helpers/isValidDomain.js","webpack://login/./node_modules/@simplewebauthn/browser/esm/helpers/webAuthnError.js","webpack://login/./node_modules/@simplewebauthn/browser/esm/helpers/webAuthnAbortService.js","webpack://login/./node_modules/@simplewebauthn/browser/esm/helpers/toAuthenticatorAttachment.js","webpack://login/./node_modules/@simplewebauthn/browser/esm/methods/startRegistration.js","webpack://login/./node_modules/@simplewebauthn/browser/esm/helpers/browserSupportsWebAuthnAutofill.js","webpack://login/./partials/webauth.js","webpack://login/./node_modules/@simplewebauthn/browser/esm/methods/startAuthentication.js","webpack://login/./node_modules/@simplewebauthn/browser/esm/helpers/identifyAuthenticationError.js","webpack://login/./login.js","webpack://login/./partials/register_webauth.js","webpack://login/./node_modules/@simplewebauthn/browser/esm/helpers/identifyRegistrationError.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.versionCompare = (v1, v2, operator) => {\n    //      discuss at: http://locutus.io/php/version_compare/\n    //      original by: Philippe Jausions (http://pear.php.net/user/jausions)\n    //      original by: Aidan Lister (http://aidanlister.com/)\n    //      reimplemented by: Kankrelune (http://www.webfaktory.info/)\n    //      improved by: Brett Zamir (http://brett-zamir.me)\n    //      improved by: Scott Baker\n    //      improved by: Theriault (https://github.com/Theriault)\n    //      example 1: version_compare('8.2.5rc', '8.2.5a')\n    //      returns 1: 1\n    //      example 2: version_compare('8.2.50', '8.2.52', '<')\n    //      returns 2: true\n    //      example 3: version_compare('5.3.0-dev', '5.3.0')\n    //      returns 3: -1\n    //      example 4: version_compare('4.1.0.52','4.01.0.51')\n    //      returns 4: 1\n    // Important: compare must be initialized at 0.\n    let i;\n    let x;\n    let compare = 0;\n    // vm maps textual PHP versions to negatives so they're less than 0.\n    // PHP currently defines these as CASE-SENSITIVE. It is important to\n    // leave these as negatives so that they can come before numerical versions\n    // and as if no letters were there to begin with.\n    // (1alpha is < 1 and < 1.1 but > 1dev1)\n    // If a non-numerical value can't be mapped to this table, it receives\n    // -7 as its value.\n    const vm = {\n        \"dev\": -6,\n        \"alpha\": -5,\n        \"a\": -5,\n        \"beta\": -4,\n        \"b\": -4,\n        \"RC\": -3,\n        \"rc\": -3,\n        \"#\": -2,\n        \"p\": 1,\n        \"pl\": 1\n    };\n    // This function will be called to prepare each version argument.\n    // It replaces every _, -, and + with a dot.\n    // It surrounds any nonsequence of numbers/dots with dots.\n    // It replaces sequences of dots with a single dot.\n    //    version_compare('4..0', '4.0') === 0\n    // Important: A string of 0 length needs to be converted into a value\n    // even less than an unexisting value in vm (-7), hence [-8].\n    // It's also important to not strip spaces because of this.\n    //   version_compare('', ' ') === 1\n    const prepVersion = (v) => {\n        v = (\"\" + v).replace(/[_\\-+]/g, \".\");\n        v = v.replace(/([^.\\d]+)/g, \".$1.\").replace(/\\.{2,}/g, \".\");\n        return (!v.length ? [-8] : v.split(\".\"));\n    };\n    // This converts a version component to a number.\n    // Empty component becomes 0.\n    // Non-numerical component becomes a negative number.\n    // Numerical component becomes itself as an integer.\n    const numVersion = (v) => {\n        return !v ? 0 : (isNaN(v) ? vm[v] || -7 : parseInt(v, 10));\n    };\n    v1 = prepVersion(v1);\n    v2 = prepVersion(v2);\n    x = Math.max(v1.length, v2.length);\n    for (i = 0; i < x; i++) {\n        if (v1[i] === v2[i]) {\n            continue;\n        }\n        v1[i] = numVersion(v1[i]);\n        v2[i] = numVersion(v2[i]);\n        if (v1[i] < v2[i]) {\n            compare = -1;\n            break;\n        }\n        else if (v1[i] > v2[i]) {\n            compare = 1;\n            break;\n        }\n    }\n    if (!operator) {\n        return compare;\n    }\n    // Important: operator is CASE-SENSITIVE.\n    // \"No operator\" seems to be treated as \"<.\"\n    // Any other values seem to make the function return null.\n    switch (operator) {\n        case \">\":\n        case \"gt\":\n            return (compare > 0);\n        case \">=\":\n        case \"ge\":\n            return (compare >= 0);\n        case \"<=\":\n        case \"le\":\n            return (compare <= 0);\n        case \"===\":\n        case \"=\":\n        case \"eq\":\n            return (compare === 0);\n        case \"<>\":\n        case \"!==\":\n        case \"ne\":\n            return (compare !== 0);\n        case \"\":\n        case \"<\":\n        case \"lt\":\n            return (compare < 0);\n        default:\n            return null;\n    }\n};\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst car_browsers_json_1 = __importDefault(require(\"../../fixtures/regexes/device/car_browsers.json\"));\nconst variable_replacement_1 = require(\"../../utils/variable-replacement\");\nconst user_agent_1 = require(\"../../utils/user-agent\");\nclass CarParser {\n    constructor() {\n        this.parse = (userAgent) => {\n            const result = {\n                type: \"\",\n                brand: \"\",\n                model: \"\"\n            };\n            for (const [brand, car] of Object.entries(car_browsers_json_1.default)) {\n                const match = user_agent_1.userAgentParser(car.regex, userAgent);\n                if (!match)\n                    continue;\n                result.type = \"car\";\n                result.brand = brand;\n                for (const model of car.models) {\n                    const match = user_agent_1.userAgentParser(model.regex, userAgent);\n                    if (!match)\n                        continue;\n                    result.model = variable_replacement_1.variableReplacement(model.model, match).trim();\n                }\n                break;\n            }\n            return result;\n        };\n    }\n}\nexports.default = CarParser;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst trim_1 = require(\"./trim\");\nexports.formatVersion = (version, versionTruncation) => {\n    if (version === undefined)\n        return \"\";\n    const versionString = trim_1.trim(version, \". \").replace(new RegExp(\"_\", \"g\"), \".\");\n    const versionParts = versionString.split(\".\");\n    // Return if the string is not only digits once we removed the dots\n    if (!/^\\d+$/.test(versionParts.join(\"\"))) {\n        return versionString;\n    }\n    if (versionTruncation !== 0) {\n        if (Number.isInteger(parseFloat(versionString))) {\n            return parseInt(versionString, 10).toFixed(1);\n        }\n    }\n    if (versionParts.length > 1) {\n        if (versionTruncation !== null) {\n            return versionParts.slice(0, versionTruncation + 1).join(\".\");\n        }\n    }\n    return versionString;\n};\nexports.parseBrowserEngineVersion = (userAgent, engine) => {\n    if (!engine)\n        return \"\";\n    if (engine === \"Gecko\") {\n        const geckoVersionRegex = /[ ](?:rv[: ]([0-9\\.]+)).*gecko\\/[0-9]{8,10}/i;\n        const match = userAgent.match(geckoVersionRegex);\n        if (match) {\n            return match.pop();\n        }\n    }\n    const regex = new RegExp(`${engine}\\\\s*\\\\/?\\\\s*((?:(?=\\\\d+\\\\.\\\\d)\\\\d+[.\\\\d]*|\\\\d{1,7}(?=(?:\\\\D|$))))`, \"i\");\n    const match = userAgent.match(regex);\n    if (!match)\n        return \"\";\n    return match.pop();\n};\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst cameras_json_1 = __importDefault(require(\"../../fixtures/regexes/device/cameras.json\"));\nconst variable_replacement_1 = require(\"../../utils/variable-replacement\");\nconst user_agent_1 = require(\"../../utils/user-agent\");\nclass CameraParser {\n    constructor() {\n        this.parse = (userAgent) => {\n            const result = {\n                type: \"\",\n                brand: \"\",\n                model: \"\"\n            };\n            for (const [brand, camera] of Object.entries(cameras_json_1.default)) {\n                const match = user_agent_1.userAgentParser(camera.regex, userAgent);\n                if (!match)\n                    continue;\n                result.type = \"camera\";\n                result.brand = brand;\n                if (\"model\" in camera && camera.model) {\n                    result.model = variable_replacement_1.variableReplacement(camera.model, match).trim();\n                }\n                else if (\"models\" in camera && camera.models) {\n                    for (const model of camera.models) {\n                        const modelMatch = user_agent_1.userAgentParser(model.regex, userAgent);\n                        if (!modelMatch)\n                            continue;\n                        result.model = variable_replacement_1.variableReplacement(model.model, modelMatch).trim();\n                        break;\n                    }\n                }\n                break;\n            }\n            return result;\n        };\n    }\n}\nexports.default = CameraParser;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst televisions_json_1 = __importDefault(require(\"../../fixtures/regexes/device/televisions.json\"));\nconst variable_replacement_1 = require(\"../../utils/variable-replacement\");\nconst user_agent_1 = require(\"../../utils/user-agent\");\nconst model_1 = require(\"../../utils/model\");\nclass TelevisionParser {\n    constructor() {\n        this.parse = (userAgent) => {\n            const result = {\n                type: \"\",\n                brand: \"\",\n                model: \"\"\n            };\n            if (!this.isHbbTv(userAgent))\n                return result;\n            result.type = \"television\";\n            for (const [brand, television] of Object.entries(televisions_json_1.default)) {\n                const match = user_agent_1.userAgentParser(television.regex, userAgent);\n                if (!match)\n                    continue;\n                result.brand = brand;\n                if (\"model\" in television && television.model) {\n                    result.model = model_1.buildModel(variable_replacement_1.variableReplacement(television.model, match)).trim();\n                }\n                else if (\"models\" in television && television.models) {\n                    for (const model of television.models) {\n                        const modelMatch = user_agent_1.userAgentParser(model.regex, userAgent);\n                        if (!modelMatch)\n                            continue;\n                        result.model = model_1.buildModel(variable_replacement_1.variableReplacement(model.model, modelMatch)).trim();\n                        break;\n                    }\n                }\n                break;\n            }\n            return result;\n        };\n        this.isHbbTv = (userAgent) => {\n            return user_agent_1.userAgentParser(\"HbbTV\\/([1-9]{1}(?:\\.[0-9]{1}){1,2})\", userAgent);\n        };\n    }\n}\nexports.default = TelevisionParser;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.memoryCache = () => {\n    const memoryCacheBucket = {};\n    const set = (key, value) => {\n        memoryCacheBucket[key] = value;\n    };\n    const get = (key) => {\n        if (memoryCacheBucket.hasOwnProperty(key)) {\n            return memoryCacheBucket[key];\n        }\n    };\n    return {\n        set,\n        get\n    };\n};\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst vendorfragments_json_1 = __importDefault(require(\"../../fixtures/regexes/vendorfragments.json\"));\nconst user_agent_1 = require(\"../../utils/user-agent\");\nclass VendorFragmentParser {\n    constructor() {\n        this.parse = (userAgent) => {\n            for (const [brand, vendorFragment] of Object.entries(vendorfragments_json_1.default)) {\n                for (const regex of vendorFragment) {\n                    const match = user_agent_1.userAgentParser(regex, userAgent);\n                    if (!match)\n                        continue;\n                    return brand;\n                }\n            }\n            return \"\";\n        };\n    }\n}\nexports.default = VendorFragmentParser;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst version_1 = require(\"../../utils/version\");\nconst variable_replacement_1 = require(\"../../utils/variable-replacement\");\nconst user_agent_1 = require(\"../../utils/user-agent\");\nconst browsers_json_1 = __importDefault(require(\"../../fixtures/regexes/client/browsers.json\"));\nconst browser_engine_json_1 = __importDefault(require(\"../../fixtures/regexes/client/browser_engine.json\"));\nconst available_browsers_json_1 = __importDefault(require(\"./fixtures/available-browsers.json\"));\nconst mobile_only_browsers_json_1 = __importDefault(require(\"./fixtures/mobile-only-browsers.json\"));\nclass BrowserParser {\n    constructor(options) {\n        this.options = {\n            versionTruncation: 1\n        };\n        this.parse = (userAgent) => {\n            const result = {\n                type: \"\",\n                name: \"\",\n                version: \"\",\n                engine: \"\",\n                engineVersion: \"\"\n            };\n            for (const browser of browsers_json_1.default) {\n                const match = user_agent_1.userAgentParser(browser.regex, userAgent);\n                if (!match)\n                    continue;\n                const vrpVersion = variable_replacement_1.variableReplacement(browser.version, match);\n                const version = version_1.formatVersion(vrpVersion, this.options.versionTruncation);\n                const shortVersion = version && parseFloat(version_1.formatVersion(vrpVersion, 1)) || \"\";\n                if (browser.engine) {\n                    result.engine = browser.engine.default;\n                    if (browser.engine && browser.engine.versions && shortVersion) {\n                        const sortedEngineVersions = Object.entries(browser.engine.versions).sort((a, b) => {\n                            return parseFloat(a[0]) > parseFloat(b[0]) ? 1 : -1;\n                        });\n                        for (const [versionThreshold, engineByVersion] of sortedEngineVersions) {\n                            if (parseFloat(versionThreshold) <= shortVersion) {\n                                result.engine = engineByVersion || \"\";\n                            }\n                        }\n                    }\n                }\n                result.type = \"browser\";\n                result.name = variable_replacement_1.variableReplacement(browser.name, match);\n                result.version = version;\n                break;\n            }\n            if (!result.engine) {\n                for (const browserEngine of browser_engine_json_1.default) {\n                    let match = null;\n                    try {\n                        match = RegExp(browserEngine.regex, \"i\").exec(userAgent);\n                    }\n                    catch (_a) {\n                        // TODO: find out why it fails in some browsers\n                    }\n                    if (!match)\n                        continue;\n                    result.engine = browserEngine.name;\n                    break;\n                }\n            }\n            result.engineVersion = version_1.formatVersion(version_1.parseBrowserEngineVersion(userAgent, result.engine), this.options.versionTruncation);\n            return result;\n        };\n        this.options = Object.assign(Object.assign({}, this.options), options);\n    }\n}\nexports.default = BrowserParser;\nBrowserParser.getBrowserShortName = (browserName) => {\n    for (const [shortName, name] of Object.entries(available_browsers_json_1.default)) {\n        if (name === browserName) {\n            return shortName;\n        }\n    }\n    return \"\";\n};\nBrowserParser.isMobileOnlyBrowser = (browserName) => {\n    return mobile_only_browsers_json_1.default.includes(BrowserParser.getBrowserShortName(browserName));\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst memory_cache_1 = require(\"./memory-cache\");\nconst cache = memory_cache_1.memoryCache();\nconst getRegexInstance = (rawRegex) => {\n    const cachedRegexInstance = cache.get(rawRegex);\n    if (cachedRegexInstance)\n        return cachedRegexInstance.value;\n    const regexInstance = RegExp(`(?:^|[^A-Z0-9\\-_]|[^A-Z0-9\\-]_|sprd-)(?:${rawRegex})`, \"i\");\n    cache.set(rawRegex, {\n        value: regexInstance\n    });\n    return regexInstance;\n};\nexports.userAgentParser = (rawRegex, userAgent) => {\n    // TODO: find out why it fails in some browsers\n    try {\n        const regexInstance = getRegexInstance(rawRegex);\n        const match = regexInstance.exec(userAgent);\n        return match ? match.slice(1) : null;\n    }\n    catch (_a) {\n        return null;\n    }\n};\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst consoles_json_1 = __importDefault(require(\"../../fixtures/regexes/device/consoles.json\"));\nconst variable_replacement_1 = require(\"../../utils/variable-replacement\");\nconst user_agent_1 = require(\"../../utils/user-agent\");\nclass ConsoleParser {\n    constructor() {\n        this.parse = (userAgent) => {\n            const result = {\n                type: \"\",\n                brand: \"\",\n                model: \"\"\n            };\n            for (const [brand, gameConsole] of Object.entries(consoles_json_1.default)) {\n                const match = user_agent_1.userAgentParser(gameConsole.regex, userAgent);\n                if (!match)\n                    continue;\n                result.type = gameConsole.device;\n                result.brand = brand;\n                if (\"model\" in gameConsole && gameConsole.model) {\n                    result.model = variable_replacement_1.variableReplacement(gameConsole.model, match).trim();\n                }\n                else if (\"models\" in gameConsole && gameConsole.models) {\n                    for (const model of gameConsole.models) {\n                        const modelMatch = user_agent_1.userAgentParser(model.regex, userAgent);\n                        if (!modelMatch)\n                            continue;\n                        result.model = variable_replacement_1.variableReplacement(model.model, modelMatch).trim();\n                        break;\n                    }\n                }\n                break;\n            }\n            return result;\n        };\n    }\n}\nexports.default = ConsoleParser;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst browser_1 = __importDefault(require(\"./browser\"));\nconst mobile_apps_1 = __importDefault(require(\"./mobile-apps\"));\nconst feed_readers_1 = __importDefault(require(\"./feed-readers\"));\nconst libraries_1 = __importDefault(require(\"./libraries\"));\nconst media_players_1 = __importDefault(require(\"./media-players\"));\nconst personal_information_managers_1 = __importDefault(require(\"./personal-information-managers\"));\nconst clientParsers = [\n    feed_readers_1.default,\n    mobile_apps_1.default,\n    media_players_1.default,\n    personal_information_managers_1.default,\n    browser_1.default,\n    libraries_1.default\n];\nclass ClientParser {\n    constructor(options) {\n        this.options = {\n            versionTruncation: 1\n        };\n        this.parse = (userAgent) => {\n            for (const Parser of clientParsers) {\n                const parser = new Parser(this.options);\n                const client = parser.parse(userAgent);\n                if (client.type !== \"\")\n                    return client;\n            }\n            return null;\n        };\n        this.options = Object.assign(Object.assign({}, this.options), options);\n    }\n}\nexports.default = ClientParser;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst mobile_apps_json_1 = __importDefault(require(\"../../fixtures/regexes/client/mobile_apps.json\"));\nconst version_1 = require(\"../../utils/version\");\nconst variable_replacement_1 = require(\"../../utils/variable-replacement\");\nconst user_agent_1 = require(\"../../utils/user-agent\");\nclass MobileAppParser {\n    constructor(options) {\n        this.options = {\n            versionTruncation: 1\n        };\n        this.parse = (userAgent) => {\n            const result = {\n                type: \"\",\n                name: \"\",\n                version: \"\"\n            };\n            for (const mobileApp of mobile_apps_json_1.default) {\n                const match = user_agent_1.userAgentParser(mobileApp.regex, userAgent);\n                if (!match)\n                    continue;\n                result.type = \"mobile app\";\n                result.name = variable_replacement_1.variableReplacement(mobileApp.name, match);\n                result.version = version_1.formatVersion(variable_replacement_1.variableReplacement(mobileApp.version, match), this.options.versionTruncation);\n                break;\n            }\n            return result;\n        };\n        this.options = Object.assign(Object.assign({}, this.options), options);\n    }\n}\nexports.default = MobileAppParser;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst oss_json_1 = __importDefault(require(\"../../fixtures/regexes/oss.json\"));\nconst version_1 = require(\"../../utils/version\");\nconst variable_replacement_1 = require(\"../../utils/variable-replacement\");\nconst user_agent_1 = require(\"../../utils/user-agent\");\nconst operating_system_json_1 = __importDefault(require(\"./fixtures/operating-system.json\"));\nconst desktopOsArray = [\"AmigaOS\", \"IBM\", \"GNU/Linux\", \"Mac\", \"Unix\", \"Windows\", \"BeOS\", \"Chrome OS\"];\nconst shortOsNames = operating_system_json_1.default.operatingSystem;\nconst osFamilies = operating_system_json_1.default.osFamilies;\nclass OperatingSystemParser {\n    constructor(options) {\n        this.options = {\n            versionTruncation: 1\n        };\n        this.parse = (userAgent) => {\n            const result = {\n                name: \"\",\n                version: \"\",\n                platform: this.parsePlatform(userAgent)\n            };\n            for (const operatingSystem of oss_json_1.default) {\n                const match = user_agent_1.userAgentParser(operatingSystem.regex, userAgent);\n                if (!match)\n                    continue;\n                result.name = variable_replacement_1.variableReplacement(operatingSystem.name, match);\n                result.version = version_1.formatVersion(variable_replacement_1.variableReplacement(operatingSystem.version, match), this.options.versionTruncation);\n                if (result.name === \"lubuntu\") {\n                    result.name = \"Lubuntu\";\n                }\n                if (result.name === \"debian\") {\n                    result.name = \"Debian\";\n                }\n                if (result.name === \"YunOS\") {\n                    result.name = \"YunOs\";\n                }\n                return result;\n            }\n            return null;\n        };\n        this.parsePlatform = (userAgent) => {\n            if (user_agent_1.userAgentParser(\"arm|aarch64|Watch ?OS|Watch1,[12]\", userAgent)) {\n                return \"ARM\";\n            }\n            if (user_agent_1.userAgentParser(\"mips\", userAgent)) {\n                return \"MIPS\";\n            }\n            if (user_agent_1.userAgentParser(\"sh4\", userAgent)) {\n                return \"SuperH\";\n            }\n            if (user_agent_1.userAgentParser(\"WOW64|x64|win64|amd64|x86_?64\", userAgent)) {\n                return \"x64\";\n            }\n            if (user_agent_1.userAgentParser(\"(?:i[0-9]|x)86|i86pc\", userAgent)) {\n                return \"x86\";\n            }\n            return \"\";\n        };\n        this.options = Object.assign(Object.assign({}, this.options), options);\n    }\n}\nexports.default = OperatingSystemParser;\nOperatingSystemParser.getDesktopOsArray = () => desktopOsArray;\nOperatingSystemParser.getOsFamily = (osName) => {\n    const osShortName = OperatingSystemParser.getOsShortName(osName);\n    for (const [osFamily, shortNames] of Object.entries(osFamilies)) {\n        if (shortNames.includes(osShortName)) {\n            return osFamily;\n        }\n    }\n    return \"\";\n};\nOperatingSystemParser.getOsShortName = (osName) => {\n    for (const [shortName, name] of Object.entries(shortOsNames)) {\n        if (name === osName)\n            return shortName;\n    }\n    return \"\";\n};\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst libraries_json_1 = __importDefault(require(\"../../fixtures/regexes/client/libraries.json\"));\nconst version_1 = require(\"../../utils/version\");\nconst variable_replacement_1 = require(\"../../utils/variable-replacement\");\nconst user_agent_1 = require(\"../../utils/user-agent\");\nclass LibraryParser {\n    constructor(options) {\n        this.options = {\n            versionTruncation: 1\n        };\n        this.parse = (userAgent) => {\n            const result = {\n                type: \"\",\n                name: \"\",\n                version: \"\",\n                url: \"\"\n            };\n            for (const library of libraries_json_1.default) {\n                const match = user_agent_1.userAgentParser(library.regex, userAgent);\n                if (!match)\n                    continue;\n                result.type = \"library\";\n                result.name = variable_replacement_1.variableReplacement(library.name, match);\n                result.version = version_1.formatVersion(variable_replacement_1.variableReplacement(library.version, match), this.options.versionTruncation);\n                result.url = library.url || \"\";\n                break;\n            }\n            return result;\n        };\n        this.options = Object.assign(Object.assign({}, this.options), options);\n    }\n}\nexports.default = LibraryParser;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst cameras_1 = __importDefault(require(\"./cameras\"));\nconst mobiles_1 = __importDefault(require(\"./mobiles\"));\nconst televisions_1 = __importDefault(require(\"./televisions\"));\nconst cars_1 = __importDefault(require(\"./cars\"));\nconst consoles_1 = __importDefault(require(\"./consoles\"));\nconst notebooks_1 = __importDefault(require(\"./notebooks\"));\nconst portable_media_players_1 = __importDefault(require(\"./portable-media-players\"));\nconst deviceParsers = [\n    consoles_1.default,\n    cars_1.default,\n    cameras_1.default,\n    televisions_1.default,\n    portable_media_players_1.default,\n    mobiles_1.default,\n    notebooks_1.default\n];\nclass ClientParser {\n    constructor() {\n        this.parse = (userAgent) => {\n            for (const Parser of deviceParsers) {\n                const parser = new Parser();\n                const device = parser.parse(userAgent);\n                if (device.type !== \"\") {\n                    return device;\n                }\n            }\n            return null;\n        };\n    }\n}\nexports.default = ClientParser;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.variableReplacement = (template, variables) => {\n    const regex = new RegExp(`\\\\$\\\\d`, \"g\");\n    if (template === null || template === undefined)\n        return \"\";\n    return template.replace(regex, (match) => {\n        const index = parseInt(match.substr(1), 10);\n        const variable = variables[index - 1];\n        return variable || \"\";\n    });\n};\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst mediaplayers_json_1 = __importDefault(require(\"../../fixtures/regexes/client/mediaplayers.json\"));\nconst version_1 = require(\"../../utils/version\");\nconst variable_replacement_1 = require(\"../../utils/variable-replacement\");\nconst user_agent_1 = require(\"../../utils/user-agent\");\nclass MediaPlayerParser {\n    constructor(options) {\n        this.options = {\n            versionTruncation: 1\n        };\n        this.parse = (userAgent) => {\n            const result = {\n                type: \"\",\n                name: \"\",\n                version: \"\"\n            };\n            for (const mediaPlayer of mediaplayers_json_1.default) {\n                const match = user_agent_1.userAgentParser(mediaPlayer.regex, userAgent);\n                if (!match)\n                    continue;\n                result.type = \"media player\";\n                result.name = variable_replacement_1.variableReplacement(mediaPlayer.name, match);\n                result.version = version_1.formatVersion(variable_replacement_1.variableReplacement(mediaPlayer.version, match), this.options.versionTruncation);\n                break;\n            }\n            return result;\n        };\n        this.options = Object.assign(Object.assign({}, this.options), options);\n    }\n}\nexports.default = MediaPlayerParser;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst notebooks_json_1 = __importDefault(require(\"../../fixtures/regexes/device/notebooks.json\"));\nconst variable_replacement_1 = require(\"../../utils/variable-replacement\");\nconst user_agent_1 = require(\"../../utils/user-agent\");\nconst model_1 = require(\"../../utils/model\");\nclass NotebooksParser {\n    constructor() {\n        this.parse = (userAgent) => {\n            const result = {\n                type: \"\",\n                brand: \"\",\n                model: \"\"\n            };\n            if (!user_agent_1.userAgentParser(\"FBMD/\", userAgent)) {\n                return result;\n            }\n            for (const [brand, notebook] of Object.entries(notebooks_json_1.default)) {\n                const match = user_agent_1.userAgentParser(notebook.regex, userAgent);\n                if (!match)\n                    continue;\n                result.type = \"desktop\";\n                result.brand = brand;\n                if (\"model\" in notebook && notebook.model) {\n                    result.model = model_1.buildModel(variable_replacement_1.variableReplacement(notebook.model, match)).trim();\n                }\n                else if (\"models\" in notebook && notebook.models) {\n                    for (const model of notebook.models) {\n                        const match = user_agent_1.userAgentParser(model.regex, userAgent);\n                        if (!match)\n                            continue;\n                        result.model = variable_replacement_1.variableReplacement(model.model, match).trim();\n                    }\n                }\n                break;\n            }\n            return result;\n        };\n    }\n}\nexports.default = NotebooksParser;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.buildModel = (model) => {\n    model = model.replace(/_/g, \" \");\n    model = model.replace(RegExp(\" TD$\", \"i\"), \"\");\n    if (model === \"Build\")\n        return \"\";\n    return model;\n};\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nconst client_1 = __importDefault(require(\"./parsers/client\"));\nconst device_1 = __importDefault(require(\"./parsers/device\"));\nconst operating_system_1 = __importDefault(require(\"./parsers/operating-system\"));\nconst vendor_fragment_1 = __importDefault(require(\"./parsers/vendor-fragment\"));\nconst browser_1 = __importDefault(require(\"./parsers/client/browser\"));\nconst BotParser = require(\"./parsers/bot\");\nconst user_agent_1 = require(\"./utils/user-agent\");\nconst version_compare_1 = require(\"./utils/version-compare\");\nclass DeviceDetector {\n    constructor(options) {\n        // Default options\n        this.options = {\n            skipBotDetection: false,\n            versionTruncation: 1\n        };\n        this.parse = (userAgent) => {\n            var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p;\n            const result = {\n                client: this.clientParser.parse(userAgent),\n                os: this.operatingSystemParser.parse(userAgent),\n                device: this.deviceParser.parse(userAgent),\n                bot: this.options.skipBotDetection ? null : this.botParser.parse(userAgent)\n            };\n            const osName = (_a = result.os) === null || _a === void 0 ? void 0 : _a.name;\n            const osVersion = (_b = result.os) === null || _b === void 0 ? void 0 : _b.version;\n            const osFamily = operating_system_1.default.getOsFamily(osName || \"\");\n            if (!((_c = result.device) === null || _c === void 0 ? void 0 : _c.brand)) {\n                const brand = this.vendorFragmentParser.parse(userAgent);\n                if (brand) {\n                    if (!result.device) {\n                        result.device = this.createDeviceObject();\n                    }\n                    result.device.brand = brand;\n                }\n            }\n            /**\n             * Assume all devices running iOS / Mac OS are from Apple\n             */\n            if (!((_d = result.device) === null || _d === void 0 ? void 0 : _d.brand) && [\"Apple TV\", \"watchOS\", \"iOS\", \"Mac\"].includes(osName || \"\")) {\n                if (!result.device) {\n                    result.device = this.createDeviceObject();\n                }\n                result.device.brand = \"Apple\";\n            }\n            /**\n             * Chrome on Android passes the device type based on the keyword 'Mobile'\n             * If it is present the device should be a smartphone, otherwise it's a tablet\n             * See https://developer.chrome.com/multidevice/user-agent#chrome_for_android_user_agent\n             * Note: We do not check for browser (family) here, as there might be mobile apps using Chrome, that won't have\n             *       a detected browser, but can still be detected. So we check the useragent for Chrome instead.\n             */\n            if (!((_e = result.device) === null || _e === void 0 ? void 0 : _e.type) && osFamily === \"Android\" && user_agent_1.userAgentParser(\"Chrome/[\\\\.0-9]*\", userAgent)) {\n                if (user_agent_1.userAgentParser(\"Chrome/[.0-9]* (?:Mobile|eliboM)\", userAgent)) {\n                    if (!result.device) {\n                        result.device = this.createDeviceObject();\n                    }\n                    result.device.type = \"smartphone\";\n                }\n                else if (user_agent_1.userAgentParser(\"Chrome/[.0-9]* (?!Mobile)\", userAgent)) {\n                    if (!result.device) {\n                        result.device = this.createDeviceObject();\n                    }\n                    result.device.type = \"tablet\";\n                }\n            }\n            /**\n             * Some user agents simply contain the fragment 'Android; Tablet;' or 'Opera Tablet', so we assume those devices are tablets\n             */\n            if (!((_f = result.device) === null || _f === void 0 ? void 0 : _f.type) && this.hasAndroidTabletFragment(userAgent) || user_agent_1.userAgentParser(\"Opera Tablet\", userAgent)) {\n                if (!result.device) {\n                    result.device = this.createDeviceObject();\n                }\n                result.device.type = \"tablet\";\n            }\n            /**\n             * Some user agents simply contain the fragment 'Android; Mobile;', so we assume those devices are smartphones\n             */\n            if (!((_g = result.device) === null || _g === void 0 ? void 0 : _g.type) && this.hasAndroidMobileFragment(userAgent)) {\n                if (!result.device) {\n                    result.device = this.createDeviceObject();\n                }\n                result.device.type = \"smartphone\";\n            }\n            /**\n             * Android up to 3.0 was designed for smartphones only. But as 3.0, which was tablet only, was published\n             * too late, there were a bunch of tablets running with 2.x\n             * With 4.0 the two trees were merged and it is for smartphones and tablets\n             *\n             * So were are expecting that all devices running Android < 2 are smartphones\n             * Devices running Android 3.X are tablets. Device type of Android 2.X and 4.X+ are unknown\n             */\n            if (!((_h = result.device) === null || _h === void 0 ? void 0 : _h.type) && osName === \"Android\" && osVersion !== \"\") {\n                if (version_compare_1.versionCompare(osVersion, \"2.0\") === -1) {\n                    if (!result.device) {\n                        result.device = this.createDeviceObject();\n                    }\n                    result.device.type = \"smartphone\";\n                }\n                else if (version_compare_1.versionCompare(osVersion, \"3.0\") >= 0 && version_compare_1.versionCompare(osVersion, \"4.0\") === -1) {\n                    if (!result.device) {\n                        result.device = this.createDeviceObject();\n                    }\n                    result.device.type = \"tablet\";\n                }\n            }\n            /**\n             * All detected feature phones running android are more likely smartphones\n             */\n            if (((_j = result.device) === null || _j === void 0 ? void 0 : _j.type) === \"feature phone\" && osFamily === \"Android\") {\n                result.device.type = \"smartphone\";\n            }\n            /**\n             * According to http://msdn.microsoft.com/en-us/library/ie/hh920767(v=vs.85).aspx\n             * Internet Explorer 10 introduces the \"Touch\" UA string token. If this token is present at the end of the\n             * UA string, the computer has touch capability, and is running Windows 8 (or later).\n             * This UA string will be transmitted on a touch-enabled system running Windows 8 (RT)\n             *\n             * As most touch enabled devices are tablets and only a smaller part are desktops/notebooks we assume that\n             * all Windows 8 touch devices are tablets.\n             */\n            if (!((_k = result.device) === null || _k === void 0 ? void 0 : _k.type)\n                && this.isToucheEnabled(userAgent)\n                && (osName === \"Windows RT\"\n                    || (osName === \"Windows\"\n                        && version_compare_1.versionCompare(osVersion, \"8.0\") >= 0))) {\n                if (!result.device) {\n                    result.device = this.createDeviceObject();\n                }\n                result.device.type = \"tablet\";\n            }\n            /**\n             * All devices running Opera TV Store are assumed to be televisions\n             */\n            if (user_agent_1.userAgentParser(\"Opera TV Store\", userAgent)) {\n                if (!result.device) {\n                    result.device = this.createDeviceObject();\n                }\n                result.device.type = \"television\";\n            }\n            /**\n             * All devices running Tizen TV or SmartTV are assumed to be televisions\n             */\n            if (user_agent_1.userAgentParser(\"SmartTV|Tizen.+ TV .+$\", userAgent)) {\n                if (!result.device) {\n                    result.device = this.createDeviceObject();\n                }\n                result.device.type = \"television\";\n            }\n            /**\n             * Devices running Kylo or Espital TV Browsers are assumed to be televisions\n             */\n            if (!((_l = result.device) === null || _l === void 0 ? void 0 : _l.type) && [\"Kylo\", \"Espial TV Browser\"].includes(((_m = result.client) === null || _m === void 0 ? void 0 : _m.name) || \"\")) {\n                if (!result.device) {\n                    result.device = this.createDeviceObject();\n                }\n                result.device.type = \"television\";\n            }\n            /**\n             * Set device type to desktop if string ua contains desktop\n             */\n            const hasDesktop = \"desktop\" !== ((_o = result.device) === null || _o === void 0 ? void 0 : _o.type)\n                && null !== user_agent_1.userAgentParser(\"Desktop\", userAgent)\n                && this.hasDesktopFragment(userAgent);\n            if (hasDesktop) {\n                if (!result.device) {\n                    result.device = this.createDeviceObject();\n                }\n                result.device.type = \"desktop\";\n            }\n            // set device type to desktop for all devices running a desktop os that were not detected as an other device type\n            if (!((_p = result.device) === null || _p === void 0 ? void 0 : _p.type) && this.isDesktop(result, osFamily)) {\n                if (!result.device) {\n                    result.device = this.createDeviceObject();\n                }\n                result.device.type = \"desktop\";\n            }\n            return result;\n        };\n        this.hasAndroidMobileFragment = (userAgent) => {\n            return user_agent_1.userAgentParser(\"Android( [\\.0-9]+)?; Mobile;\", userAgent);\n        };\n        this.hasAndroidTabletFragment = (userAgent) => {\n            return user_agent_1.userAgentParser(\"Android( [\\.0-9]+)?; Tablet;\", userAgent);\n        };\n        this.hasDesktopFragment = (userAgent) => {\n            return user_agent_1.userAgentParser(\"Desktop (x(?:32|64)|WOW64);\", userAgent);\n        };\n        this.isDesktop = (result, osFamily) => {\n            if (!result.os) {\n                return false;\n            }\n            // Check for browsers available for mobile devices only\n            if (this.usesMobileBrowser(result.client)) {\n                return false;\n            }\n            return operating_system_1.default.getDesktopOsArray().includes(osFamily);\n        };\n        this.usesMobileBrowser = (client) => {\n            var _a, _b;\n            if (!client)\n                return false;\n            return ((_a = client) === null || _a === void 0 ? void 0 : _a.type) === \"browser\" && browser_1.default.isMobileOnlyBrowser((_b = client) === null || _b === void 0 ? void 0 : _b.name);\n        };\n        this.isToucheEnabled = (userAgent) => {\n            return user_agent_1.userAgentParser(\"Touch\", userAgent);\n        };\n        this.createDeviceObject = () => ({\n            type: \"\",\n            brand: \"\",\n            model: \"\"\n        });\n        this.options = Object.assign(Object.assign({}, this.options), options);\n        this.clientParser = new client_1.default(this.options);\n        this.deviceParser = new device_1.default();\n        this.operatingSystemParser = new operating_system_1.default(this.options);\n        this.vendorFragmentParser = new vendor_fragment_1.default();\n        this.botParser = new BotParser();\n    }\n}\nmodule.exports = DeviceDetector;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst pim_json_1 = __importDefault(require(\"../../fixtures/regexes/client/pim.json\"));\nconst version_1 = require(\"../../utils/version\");\nconst variable_replacement_1 = require(\"../../utils/variable-replacement\");\nconst user_agent_1 = require(\"../../utils/user-agent\");\nclass PersonalInformationManagerParser {\n    constructor(options) {\n        this.options = {\n            versionTruncation: 1\n        };\n        this.parse = (userAgent) => {\n            const result = {\n                type: \"\",\n                name: \"\",\n                version: \"\"\n            };\n            for (const personalInformationManager of pim_json_1.default) {\n                const match = user_agent_1.userAgentParser(personalInformationManager.regex, userAgent);\n                if (!match)\n                    continue;\n                result.type = \"personal information manager\";\n                result.name = variable_replacement_1.variableReplacement(personalInformationManager.name, match);\n                result.version = version_1.formatVersion(variable_replacement_1.variableReplacement(personalInformationManager.version, match), this.options.versionTruncation);\n                break;\n            }\n            return result;\n        };\n        this.options = Object.assign(Object.assign({}, this.options), options);\n    }\n}\nexports.default = PersonalInformationManagerParser;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.trim = (str, char) => {\n    return str.replace(new RegExp(\"^[\" + char + \"]+|[\" + char + \"]+$\", \"g\"), \"\");\n};\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst portable_media_player_json_1 = __importDefault(require(\"../../fixtures/regexes/device/portable_media_player.json\"));\nconst variable_replacement_1 = require(\"../../utils/variable-replacement\");\nconst user_agent_1 = require(\"../../utils/user-agent\");\nclass PortableMediaPlayersParser {\n    constructor() {\n        this.parse = (userAgent) => {\n            const result = {\n                type: \"\",\n                brand: \"\",\n                model: \"\"\n            };\n            for (const [brand, portableMediaPlayer] of Object.entries(portable_media_player_json_1.default)) {\n                const match = user_agent_1.userAgentParser(portableMediaPlayer.regex, userAgent);\n                if (!match)\n                    continue;\n                result.type = portableMediaPlayer.device;\n                result.brand = brand;\n                if (\"model\" in portableMediaPlayer && portableMediaPlayer.model) {\n                    result.model = variable_replacement_1.variableReplacement(portableMediaPlayer.model, match).trim();\n                }\n                else if (\"models\" in portableMediaPlayer && portableMediaPlayer.models) {\n                    for (const model of portableMediaPlayer.models) {\n                        const modelMatch = user_agent_1.userAgentParser(model.regex, userAgent);\n                        if (!modelMatch)\n                            continue;\n                        result.model = variable_replacement_1.variableReplacement(model.model, modelMatch).trim();\n                        break;\n                    }\n                }\n                break;\n            }\n            return result;\n        };\n    }\n}\nexports.default = PortableMediaPlayersParser;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst mobiles_json_1 = __importDefault(require(\"../../fixtures/regexes/device/mobiles.json\"));\nconst variable_replacement_1 = require(\"../../utils/variable-replacement\");\nconst user_agent_1 = require(\"../../utils/user-agent\");\nconst model_1 = require(\"../../utils/model\");\nclass MobileParser {\n    constructor() {\n        this.parse = (userAgent) => {\n            const result = {\n                type: \"\",\n                brand: \"\",\n                model: \"\"\n            };\n            let resultType = \"\";\n            for (const [brand, mobile] of Object.entries(mobiles_json_1.default)) {\n                const match = user_agent_1.userAgentParser(mobile.regex, userAgent);\n                if (!match)\n                    continue;\n                resultType = \"device\" in mobile && mobile.device || \"\";\n                result.brand = brand;\n                if (\"model\" in mobile && mobile.model) {\n                    result.model = model_1.buildModel(variable_replacement_1.variableReplacement(mobile.model, match)).trim();\n                }\n                else if (\"models\" in mobile && mobile.models) {\n                    for (const model of mobile.models) {\n                        const modelMatch = user_agent_1.userAgentParser(model.regex, userAgent);\n                        if (!modelMatch)\n                            continue;\n                        result.model = model_1.buildModel(variable_replacement_1.variableReplacement(model.model, modelMatch)).trim();\n                        if (\"device\" in model && model.device) {\n                            resultType = model.device;\n                        }\n                        if (\"brand\" in model) {\n                            result.brand = model.brand || \"\";\n                        }\n                        break;\n                    }\n                }\n                break;\n            }\n            // Sanitize device type\n            if (resultType === \"tv\") {\n                result.type = \"television\";\n            }\n            else if (resultType === \"car browser\") {\n                result.type = \"car\";\n            }\n            else {\n                result.type = resultType;\n            }\n            // Sanitize device brand\n            if (result.brand === \"Unknown\") {\n                result.brand = \"\";\n            }\n            return result;\n        };\n    }\n}\nexports.default = MobileParser;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nconst bots_json_1 = __importDefault(require(\"../../fixtures/regexes/bots.json\"));\nconst user_agent_1 = require(\"../../utils/user-agent\");\nclass BotParser {\n    constructor() {\n        this.parse = (userAgent) => {\n            var _a, _b, _c, _d;\n            for (const bot of bots_json_1.default) {\n                const match = user_agent_1.userAgentParser(bot.regex, userAgent);\n                if (!match)\n                    continue;\n                return {\n                    name: bot.name,\n                    category: bot.category || \"\",\n                    url: bot.url || \"\",\n                    producer: {\n                        name: ((_b = (_a = bot) === null || _a === void 0 ? void 0 : _a.producer) === null || _b === void 0 ? void 0 : _b.name) || \"\",\n                        url: ((_d = (_c = bot) === null || _c === void 0 ? void 0 : _c.producer) === null || _d === void 0 ? void 0 : _d.url) || \"\"\n                    }\n                };\n            }\n            return null;\n        };\n    }\n}\nmodule.exports = BotParser;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst feed_readers_json_1 = __importDefault(require(\"../../fixtures/regexes/client/feed_readers.json\"));\nconst version_1 = require(\"../../utils/version\");\nconst variable_replacement_1 = require(\"../../utils/variable-replacement\");\nconst user_agent_1 = require(\"../../utils/user-agent\");\nclass FeedReaderParser {\n    constructor(options) {\n        this.options = {\n            versionTruncation: 1\n        };\n        this.parse = (userAgent) => {\n            const result = {\n                type: \"\",\n                name: \"\",\n                version: \"\",\n                url: \"\"\n            };\n            for (const feedReader of feed_readers_json_1.default) {\n                const match = user_agent_1.userAgentParser(feedReader.regex, userAgent);\n                if (!match)\n                    continue;\n                result.type = \"feed reader\";\n                result.name = variable_replacement_1.variableReplacement(feedReader.name, match);\n                result.version = version_1.formatVersion(variable_replacement_1.variableReplacement(feedReader.version, match), this.options.versionTruncation);\n                result.url = feedReader.url;\n                break;\n            }\n            return result;\n        };\n        this.options = Object.assign(Object.assign({}, this.options), options);\n    }\n}\nexports.default = FeedReaderParser;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","export function closeMobileMenu(){\r\n\t//close mobile menu\r\n\tdocument.querySelectorAll('#site-navigation, #mobile-menu-control-wrapper').forEach(el=>el.classList.remove('toggled'));\r\n\tdocument.querySelector('body').classList.remove('mobile-menu-open');\r\n\tdocument.querySelectorAll(\"#mobile-menu-control-wrapper > button\").forEach(el=>el.ariaExpanded = 0);\r\n}\r\n\r\nexport function showMessage(message){\r\n\tdocument.querySelectorAll(\"#message\").forEach(el => el.innerHTML= DOMPurify.sanitize(message));\r\n}\r\n\r\nexport function showStatusMessage(message){\r\n\tdocument.querySelectorAll(\".status-message\").forEach(el => el.innerHTML= DOMPurify.sanitize(message));\r\n}\r\n\r\nexport function togglePassworView(ev){\r\n\tev.stopImmediatePropagation();\r\n\t\r\n\tvar target\t= ev.target;\r\n\r\n\tif(ev.target.tagName == 'IMG'){\r\n\t\ttarget\t= ev.target.parentNode;\r\n\t}\r\n\r\n\tif(target.dataset.toggle == '0'){\r\n\t\ttarget.title\t\t\t\t\t\t\t\t= 'Hide password';\r\n\t\ttarget.dataset.toggle\t\t\t\t\t\t= '1';\r\n\t\ttarget.innerHTML\t\t\t\t\t\t\t= target.innerHTML.replace('invisible', 'visible');\r\n\t\ttarget.closest('.password').querySelector('input[type=\"password\"]').type\t= 'text';\r\n\t}else{\r\n\t\ttarget.title\t\t\t\t\t\t\t\t= 'Show password';\r\n\t\ttarget.dataset.toggle\t\t\t\t\t\t= '0';\r\n\t\ttarget.innerHTML\t\t\t\t\t\t\t= target.innerHTML.replace('visible', 'invisible');\r\n\t\ttarget.closest('.password').querySelector('input[type=\"text\"]').type\t= 'password';\r\n\t}\r\n}","import { showMessage } from './shared.js';\r\n\r\nlet intervalId;\r\nlet checkCount\t\t\t= 5;\r\n\r\n// Show qr code and start polling for login info\r\nexport function showLoginQrCode(){\r\n\tdocument.getElementById('usercred-wrapper').classList.add('hidden');\r\n\r\n\tshowMessage('Fetching QR code...');\r\n\r\n\tMain.showLoader(document.getElementById(`qrcode-wrapper`).firstChild);\r\n\r\n\t// get the QR code\r\n\trefreshQrCode();\r\n\t\r\n\t // Check for login permission every 5 seconds\r\n\tintervalId\t= setInterval(refreshQrCode, 5000);\r\n}\r\n\r\nfunction login(response){\r\n\tclearInterval(intervalId);\r\n\r\n\tshowMessage('Succesfully logged in, redirecting...');\r\n\r\n\tMain.showLoader(document.getElementById(`qrcode-wrapper`));\r\n\r\n\tif(!response.startsWith('http')){\r\n\t\tlocation.reload();\r\n\t}else{\r\n\t\tlocation.href = response;\r\n\t}\r\n}\r\n\r\nasync function refreshQrCode(){\r\n\tcheckCount++;\r\n\r\n    let formData    = new FormData();\r\n\tlet wrapper\t\t= document.getElementById(`qrcode-wrapper`);\r\n\tlet qrCodeImage = document.getElementById('login-qr-code');\r\n\r\n\t// refresh the qr code after 30 seconds\r\n\tif(checkCount == 6){\r\n\t\tconsole.log('Refreshing QR code');\r\n\r\n        checkCount      = 0;\r\n\r\n\t\t// also check if previous qr code has been scanned\r\n\t\tif(qrCodeImage != null){\r\n\t\t\tformData.append('token', qrCodeImage.dataset.token);\r\n\t\t\tformData.append('key', qrCodeImage.dataset.key);\r\n\t\t}\r\n\t\t\r\n\t\t// Use AJAX to get the qr code\r\n\t\tlet response    = await FormSubmit.fetchRestApi('login/get_login_qr_code', formData);\r\n\r\n\t\tif(response){\r\n\t\t\twrapper.innerHTML=response;\r\n\r\n\t\t\tshowMessage('Scan the QR code to login');\r\n\r\n\t\t\tconsole.log(`New token: ${document.getElementById('login-qr-code').dataset.token}`);\r\n\t\t\tconsole.log(`New key: ${document.getElementById('login-qr-code').dataset.key}`);\r\n\t\t}else{\r\n\t\t\twrapperinnerHTML='';\r\n\r\n\t\t\tshowMessage('QR Code Refresh Failed');\r\n\t\t}\r\n\t}else{\r\n\t\tconsole.log('Checking for login permission');\r\n\t\t\r\n        if(qrCodeImage == null){\r\n            return;\r\n        }\r\n\r\n\t\t// Use AJAX to check if the code has been scanned\r\n        formData.append('token', qrCodeImage.dataset.token);\r\n        formData.append('key', qrCodeImage.dataset.key);\r\n        formData.append('old-token', qrCodeImage.dataset.oldtoken);\r\n\t\tlet response\t= await FormSubmit.fetchRestApi('login/qr_code_scanned', formData);\r\n\r\n\t\tif(response){\r\n\t\t\tlogin(response);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport function hideQrCode(){\r\n\tclearInterval(intervalId);\r\n\r\n\tshowMessage('');\r\n\r\n\tdocument.getElementById('usercred-wrapper').classList.remove('hidden');\r\n\r\n\tdocument.getElementById(`qrcode-wrapper`).innerHTML = '';\r\n}","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","/**\n * Convert the given array buffer into a Base64URL-encoded string. Ideal for converting various\n * credential response ArrayBuffers to string for sending back to the server as JSON.\n *\n * Helper method to compliment `base64URLStringToBuffer`\n */\nexport function bufferToBase64URLString(buffer) {\n    const bytes = new Uint8Array(buffer);\n    let str = '';\n    for (const charCode of bytes) {\n        str += String.fromCharCode(charCode);\n    }\n    const base64String = btoa(str);\n    return base64String.replace(/\\+/g, '-').replace(/\\//g, '_').replace(/=/g, '');\n}\n","/**\n * Convert from a Base64URL-encoded string to an Array Buffer. Best used when converting a\n * credential ID from a JSON string to an ArrayBuffer, like in allowCredentials or\n * excludeCredentials\n *\n * Helper method to compliment `bufferToBase64URLString`\n */\nexport function base64URLStringToBuffer(base64URLString) {\n    // Convert from Base64URL to Base64\n    const base64 = base64URLString.replace(/-/g, '+').replace(/_/g, '/');\n    /**\n     * Pad with '=' until it's a multiple of four\n     * (4 - (85 % 4 = 1) = 3) % 4 = 3 padding\n     * (4 - (86 % 4 = 2) = 2) % 4 = 2 padding\n     * (4 - (87 % 4 = 3) = 1) % 4 = 1 padding\n     * (4 - (88 % 4 = 0) = 4) % 4 = 0 padding\n     */\n    const padLength = (4 - (base64.length % 4)) % 4;\n    const padded = base64.padEnd(base64.length + padLength, '=');\n    // Convert to a binary string\n    const binary = atob(padded);\n    // Convert binary string to buffer\n    const buffer = new ArrayBuffer(binary.length);\n    const bytes = new Uint8Array(buffer);\n    for (let i = 0; i < binary.length; i++) {\n        bytes[i] = binary.charCodeAt(i);\n    }\n    return buffer;\n}\n","/**\n * Determine if the browser is capable of Webauthn\n */\nexport function browserSupportsWebAuthn() {\n    return _browserSupportsWebAuthnInternals.stubThis(globalThis?.PublicKeyCredential !== undefined &&\n        typeof globalThis.PublicKeyCredential === 'function');\n}\n/**\n * Make it possible to stub the return value during testing\n * @ignore Don't include this in docs output\n */\nexport const _browserSupportsWebAuthnInternals = {\n    stubThis: (value) => value,\n};\n","import { base64URLStringToBuffer } from './base64URLStringToBuffer.js';\nexport function toPublicKeyCredentialDescriptor(descriptor) {\n    const { id } = descriptor;\n    return {\n        ...descriptor,\n        id: base64URLStringToBuffer(id),\n        /**\n         * `descriptor.transports` is an array of our `AuthenticatorTransportFuture` that includes newer\n         * transports that TypeScript's DOM lib is ignorant of. Convince TS that our list of transports\n         * are fine to pass to WebAuthn since browsers will recognize the new value.\n         */\n        transports: descriptor.transports,\n    };\n}\n","/**\n * A simple test to determine if a hostname is a properly-formatted domain name\n *\n * A \"valid domain\" is defined here: https://url.spec.whatwg.org/#valid-domain\n *\n * Regex sourced from here:\n * https://www.oreilly.com/library/view/regular-expressions-cookbook/9781449327453/ch08s15.html\n */\nexport function isValidDomain(hostname) {\n    return (\n    // Consider localhost valid as well since it's okay wrt Secure Contexts\n    hostname === 'localhost' ||\n        /^([a-z0-9]+(-[a-z0-9]+)*\\.)+[a-z]{2,}$/i.test(hostname));\n}\n","/**\n * A custom Error used to return a more nuanced error detailing _why_ one of the eight documented\n * errors in the spec was raised after calling `navigator.credentials.create()` or\n * `navigator.credentials.get()`:\n *\n * - `AbortError`\n * - `ConstraintError`\n * - `InvalidStateError`\n * - `NotAllowedError`\n * - `NotSupportedError`\n * - `SecurityError`\n * - `TypeError`\n * - `UnknownError`\n *\n * Error messages were determined through investigation of the spec to determine under which\n * scenarios a given error would be raised.\n */\nexport class WebAuthnError extends Error {\n    constructor({ message, code, cause, name, }) {\n        // @ts-ignore: help Rollup understand that `cause` is okay to set\n        super(message, { cause });\n        Object.defineProperty(this, \"code\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n        this.name = name ?? cause.name;\n        this.code = code;\n    }\n}\n","class BaseWebAuthnAbortService {\n    constructor() {\n        Object.defineProperty(this, \"controller\", {\n            enumerable: true,\n            configurable: true,\n            writable: true,\n            value: void 0\n        });\n    }\n    createNewAbortSignal() {\n        // Abort any existing calls to navigator.credentials.create() or navigator.credentials.get()\n        if (this.controller) {\n            const abortError = new Error('Cancelling existing WebAuthn API call for new one');\n            abortError.name = 'AbortError';\n            this.controller.abort(abortError);\n        }\n        const newController = new AbortController();\n        this.controller = newController;\n        return newController.signal;\n    }\n    cancelCeremony() {\n        if (this.controller) {\n            const abortError = new Error('Manually cancelling existing WebAuthn API call');\n            abortError.name = 'AbortError';\n            this.controller.abort(abortError);\n            this.controller = undefined;\n        }\n    }\n}\n/**\n * A service singleton to help ensure that only a single WebAuthn ceremony is active at a time.\n *\n * Users of **@simplewebauthn/browser** shouldn't typically need to use this, but it can help e.g.\n * developers building projects that use client-side routing to better control the behavior of\n * their UX in response to router navigation events.\n */\nexport const WebAuthnAbortService = new BaseWebAuthnAbortService();\n","const attachments = ['cross-platform', 'platform'];\n/**\n * If possible coerce a `string` value into a known `AuthenticatorAttachment`\n */\nexport function toAuthenticatorAttachment(attachment) {\n    if (!attachment) {\n        return;\n    }\n    if (attachments.indexOf(attachment) < 0) {\n        return;\n    }\n    return attachment;\n}\n","import { bufferToBase64URLString } from '../helpers/bufferToBase64URLString.js';\nimport { base64URLStringToBuffer } from '../helpers/base64URLStringToBuffer.js';\nimport { browserSupportsWebAuthn } from '../helpers/browserSupportsWebAuthn.js';\nimport { toPublicKeyCredentialDescriptor } from '../helpers/toPublicKeyCredentialDescriptor.js';\nimport { identifyRegistrationError } from '../helpers/identifyRegistrationError.js';\nimport { WebAuthnAbortService } from '../helpers/webAuthnAbortService.js';\nimport { toAuthenticatorAttachment } from '../helpers/toAuthenticatorAttachment.js';\n/**\n * Begin authenticator \"registration\" via WebAuthn attestation\n *\n * @param optionsJSON Output from **@simplewebauthn/server**'s `generateRegistrationOptions()`\n * @param useAutoRegister (Optional) Try to silently create a passkey with the password manager that the user just signed in with. Defaults to `false`.\n */\nexport async function startRegistration(options) {\n    // @ts-ignore: Intentionally check for old call structure to warn about improper API call\n    if (!options.optionsJSON && options.challenge) {\n        console.warn('startRegistration() was not called correctly. It will try to continue with the provided options, but this call should be refactored to use the expected call structure instead. See https://simplewebauthn.dev/docs/packages/browser#typeerror-cannot-read-properties-of-undefined-reading-challenge for more information.');\n        // @ts-ignore: Reassign the options, passed in as a positional argument, to the expected variable\n        options = { optionsJSON: options };\n    }\n    const { optionsJSON, useAutoRegister = false } = options;\n    if (!browserSupportsWebAuthn()) {\n        throw new Error('WebAuthn is not supported in this browser');\n    }\n    // We need to convert some values to Uint8Arrays before passing the credentials to the navigator\n    const publicKey = {\n        ...optionsJSON,\n        challenge: base64URLStringToBuffer(optionsJSON.challenge),\n        user: {\n            ...optionsJSON.user,\n            id: base64URLStringToBuffer(optionsJSON.user.id),\n        },\n        excludeCredentials: optionsJSON.excludeCredentials?.map(toPublicKeyCredentialDescriptor),\n    };\n    // Prepare options for `.create()`\n    const createOptions = {};\n    /**\n     * Try to use conditional create to register a passkey for the user with the password manager\n     * the user just used to authenticate with. The user won't be shown any prominent UI by the\n     * browser.\n     */\n    if (useAutoRegister) {\n        // @ts-ignore: `mediation` doesn't yet exist on CredentialCreationOptions but it's possible as of Sept 2024\n        createOptions.mediation = 'conditional';\n    }\n    // Finalize options\n    createOptions.publicKey = publicKey;\n    // Set up the ability to cancel this request if the user attempts another\n    createOptions.signal = WebAuthnAbortService.createNewAbortSignal();\n    // Wait for the user to complete attestation\n    let credential;\n    try {\n        credential = (await navigator.credentials.create(createOptions));\n    }\n    catch (err) {\n        throw identifyRegistrationError({ error: err, options: createOptions });\n    }\n    if (!credential) {\n        throw new Error('Registration was not completed');\n    }\n    const { id, rawId, response, type } = credential;\n    // Continue to play it safe with `getTransports()` for now, even when L3 types say it's required\n    let transports = undefined;\n    if (typeof response.getTransports === 'function') {\n        transports = response.getTransports();\n    }\n    // L3 says this is required, but browser and webview support are still not guaranteed.\n    let responsePublicKeyAlgorithm = undefined;\n    if (typeof response.getPublicKeyAlgorithm === 'function') {\n        try {\n            responsePublicKeyAlgorithm = response.getPublicKeyAlgorithm();\n        }\n        catch (error) {\n            warnOnBrokenImplementation('getPublicKeyAlgorithm()', error);\n        }\n    }\n    let responsePublicKey = undefined;\n    if (typeof response.getPublicKey === 'function') {\n        try {\n            const _publicKey = response.getPublicKey();\n            if (_publicKey !== null) {\n                responsePublicKey = bufferToBase64URLString(_publicKey);\n            }\n        }\n        catch (error) {\n            warnOnBrokenImplementation('getPublicKey()', error);\n        }\n    }\n    // L3 says this is required, but browser and webview support are still not guaranteed.\n    let responseAuthenticatorData;\n    if (typeof response.getAuthenticatorData === 'function') {\n        try {\n            responseAuthenticatorData = bufferToBase64URLString(response.getAuthenticatorData());\n        }\n        catch (error) {\n            warnOnBrokenImplementation('getAuthenticatorData()', error);\n        }\n    }\n    return {\n        id,\n        rawId: bufferToBase64URLString(rawId),\n        response: {\n            attestationObject: bufferToBase64URLString(response.attestationObject),\n            clientDataJSON: bufferToBase64URLString(response.clientDataJSON),\n            transports,\n            publicKeyAlgorithm: responsePublicKeyAlgorithm,\n            publicKey: responsePublicKey,\n            authenticatorData: responseAuthenticatorData,\n        },\n        type,\n        clientExtensionResults: credential.getClientExtensionResults(),\n        authenticatorAttachment: toAuthenticatorAttachment(credential.authenticatorAttachment),\n    };\n}\n/**\n * Visibly warn when we detect an issue related to a passkey provider intercepting WebAuthn API\n * calls\n */\nfunction warnOnBrokenImplementation(methodName, cause) {\n    console.warn(`The browser extension that intercepted this WebAuthn API call incorrectly implemented ${methodName}. You should report this error to them.\\n`, cause);\n}\n","import { browserSupportsWebAuthn } from './browserSupportsWebAuthn.js';\n/**\n * Determine if the browser supports conditional UI, so that WebAuthn credentials can\n * be shown to the user in the browser's typical password autofill popup.\n */\nexport function browserSupportsWebAuthnAutofill() {\n    if (!browserSupportsWebAuthn()) {\n        return _browserSupportsWebAuthnAutofillInternals.stubThis(new Promise((resolve) => resolve(false)));\n    }\n    /**\n     * I don't like the `as unknown` here but there's a `declare var PublicKeyCredential` in\n     * TS' DOM lib that's making it difficult for me to just go `as PublicKeyCredentialFuture` as I\n     * want. I think I'm fine with this for now since it's _supposed_ to be temporary, until TS types\n     * have a chance to catch up.\n     */\n    const globalPublicKeyCredential = globalThis\n        .PublicKeyCredential;\n    if (globalPublicKeyCredential?.isConditionalMediationAvailable === undefined) {\n        return _browserSupportsWebAuthnAutofillInternals.stubThis(new Promise((resolve) => resolve(false)));\n    }\n    return _browserSupportsWebAuthnAutofillInternals.stubThis(globalPublicKeyCredential.isConditionalMediationAvailable());\n}\n// Make it possible to stub the return value during testing\nexport const _browserSupportsWebAuthnAutofillInternals = {\n    stubThis: (value) => value,\n};\n","import { showMessage } from './shared.js';\r\n\r\nimport { startAuthentication } from '@simplewebauthn/browser';\r\n\r\nwindow.PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable().then(\r\n\tresult => {\r\n\t  if (!result) {\r\n\t\tconsole.log(\"No platform authenticator found. If your OS does not come with one, try using devtools to set one up.\");\r\n\t  }\r\n\t}\r\n);\r\n\r\n/**\r\n * Do a webauthn verification after loggin with username and password\r\n * \r\n * @param {string} username The user name to authenticate\r\n * @param {*} messageEl the html onject to display messages in\r\n */\r\nexport async function webAuthVerification(username){\r\n\ttry {\r\n\t\t// 1. Fetch authentication options from server\r\n\t\tlet formData\t\t\t\t= new FormData();\r\n\t\tformData.append('username', username);\r\n\r\n\t\tconst options\t\t\t= await FormSubmit.fetchRestApi('login/auth_start', formData);\r\n\t\tif(!options){\r\n\t\t\tthrow new Error('Fetching Server Challenge failed');\r\n\t\t}\r\n\r\n\t\t// Update message\r\n\t\tif(sim.login != undefined){\r\n\t\t\tsim.login.loadingScreen('Verifying credentials...');\r\n\t\t}\r\n\r\n\t\t// 2. Start authentication\r\n\t\t//const assertionResponse \t= await startAuthentication({ optionsJSON: options, useBrowserAutofill: true });\r\n\t\tconst assertionResponse \t= await startAuthentication({ optionsJSON: options });\r\n\r\n\t\t// 3. Send to server for validation\r\n\t\tlet form \t\t\t\t\t= document.getElementById('loginform') ? document.getElementById('loginform') : undefined;\r\n\t\tformData\t\t\t\t\t= new FormData(form);\r\n\t\tformData.append('publicKeyCredential', btoa(JSON.stringify(assertionResponse)));\r\n\t\t\r\n\t\tlet response\t\t\t\t\t= await FormSubmit.fetchRestApi('login/auth_finish', formData);\r\n\t\tif(!response || response.verified){\r\n\t\t\tthrow new Error('Verification failed');\r\n\t\t}\r\n\r\n\t\tshowMessage('Verification successfull');\r\n\r\n\t\treturn true;\r\n\t} catch (error) {\r\n\t\tconsole.error('Authentication failed:', error);\r\n\r\n\t\tshowMessage(error);\r\n\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\n/**\r\n * Start passkey login without username\r\n * \r\n * @param {string} mediation the type of request\r\n * \r\n * @returns \r\n */\r\nexport let startConditionalRequest = async (mediation) => {\r\n\tif (window.PublicKeyCredential && PublicKeyCredential.isConditionalMediationAvailable) {\r\n\t\tconsole.log(\"Conditional UI is understood by the browser\");\r\n\t\tif (!await window.PublicKeyCredential.isConditionalMediationAvailable()) {\r\n\t\t\tconsole.log(\"Conditional UI is understood by your browser but not available\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t} else {\r\n\t\tif (!navigator.credentials.conditionalMediationSupported) {\r\n\t\t\tconsole.log(\"Your browser does not implement Conditional UI (are you running the right chrome/safari version with the right flags?)\");\r\n\t\t\treturn;\r\n\t\t} else {\r\n\t\t\tconsole.log(\"This browser understand the old version of Conditional UI feature detection\");\r\n\t\t}\r\n\t}\r\n\r\n\tsim.login.loadingScreen('Performing passkey login');\r\n\r\n\tlet webauthResult =  await webAuthVerification('');\r\n\r\n\tif(webauthResult){\r\n\t\tshowMessage('Passkey login succesfull');\r\n\r\n\t\treturn await sim.login.requestLogin();\r\n\t}else{\r\n\t\tsim.login.reset();\r\n\r\n\t\tshowMessage('Passkey login failed, try using your username and password');\r\n\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\nexport async function checkWebauthnAvailable(){\r\n\tlet webauthnSupported\t= false;\r\n\t\r\n\tif (window.PublicKeyCredential) {\r\n\t\tlet available\t= await PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable();\r\n\t\tif (available) {\r\n\t\t\twebauthnSupported = true;\r\n\t\t} else {\r\n\t\t\tconsole.log(\"WebAuthn supported, Platform Authenticator not supported.\");\r\n\t\t}\r\n\t} else {\r\n\t\tconsole.log(\"Not supported.\");\r\n\t}\r\n\r\n\treturn webauthnSupported;\r\n}","import { bufferToBase64URLString } from '../helpers/bufferToBase64URLString.js';\nimport { base64URLStringToBuffer } from '../helpers/base64URLStringToBuffer.js';\nimport { browserSupportsWebAuthn } from '../helpers/browserSupportsWebAuthn.js';\nimport { browserSupportsWebAuthnAutofill } from '../helpers/browserSupportsWebAuthnAutofill.js';\nimport { toPublicKeyCredentialDescriptor } from '../helpers/toPublicKeyCredentialDescriptor.js';\nimport { identifyAuthenticationError } from '../helpers/identifyAuthenticationError.js';\nimport { WebAuthnAbortService } from '../helpers/webAuthnAbortService.js';\nimport { toAuthenticatorAttachment } from '../helpers/toAuthenticatorAttachment.js';\n/**\n * Begin authenticator \"login\" via WebAuthn assertion\n *\n * @param optionsJSON Output from **@simplewebauthn/server**'s `generateAuthenticationOptions()`\n * @param useBrowserAutofill (Optional) Initialize conditional UI to enable logging in via browser autofill prompts. Defaults to `false`.\n * @param verifyBrowserAutofillInput (Optional) Ensure a suitable `<input>` element is present when `useBrowserAutofill` is `true`. Defaults to `true`.\n */\nexport async function startAuthentication(options) {\n    // @ts-ignore: Intentionally check for old call structure to warn about improper API call\n    if (!options.optionsJSON && options.challenge) {\n        console.warn('startAuthentication() was not called correctly. It will try to continue with the provided options, but this call should be refactored to use the expected call structure instead. See https://simplewebauthn.dev/docs/packages/browser#typeerror-cannot-read-properties-of-undefined-reading-challenge for more information.');\n        // @ts-ignore: Reassign the options, passed in as a positional argument, to the expected variable\n        options = { optionsJSON: options };\n    }\n    const { optionsJSON, useBrowserAutofill = false, verifyBrowserAutofillInput = true, } = options;\n    if (!browserSupportsWebAuthn()) {\n        throw new Error('WebAuthn is not supported in this browser');\n    }\n    // We need to avoid passing empty array to avoid blocking retrieval\n    // of public key\n    let allowCredentials;\n    if (optionsJSON.allowCredentials?.length !== 0) {\n        allowCredentials = optionsJSON.allowCredentials?.map(toPublicKeyCredentialDescriptor);\n    }\n    // We need to convert some values to Uint8Arrays before passing the credentials to the navigator\n    const publicKey = {\n        ...optionsJSON,\n        challenge: base64URLStringToBuffer(optionsJSON.challenge),\n        allowCredentials,\n    };\n    // Prepare options for `.get()`\n    const getOptions = {};\n    /**\n     * Set up the page to prompt the user to select a credential for authentication via the browser's\n     * input autofill mechanism.\n     */\n    if (useBrowserAutofill) {\n        if (!(await browserSupportsWebAuthnAutofill())) {\n            throw Error('Browser does not support WebAuthn autofill');\n        }\n        // Check for an <input> with \"webauthn\" in its `autocomplete` attribute\n        const eligibleInputs = document.querySelectorAll(\"input[autocomplete$='webauthn']\");\n        // WebAuthn autofill requires at least one valid input\n        if (eligibleInputs.length < 1 && verifyBrowserAutofillInput) {\n            throw Error('No <input> with \"webauthn\" as the only or last value in its `autocomplete` attribute was detected');\n        }\n        // `CredentialMediationRequirement` doesn't know about \"conditional\" yet as of\n        // typescript@4.6.3\n        getOptions.mediation = 'conditional';\n        // Conditional UI requires an empty allow list\n        publicKey.allowCredentials = [];\n    }\n    // Finalize options\n    getOptions.publicKey = publicKey;\n    // Set up the ability to cancel this request if the user attempts another\n    getOptions.signal = WebAuthnAbortService.createNewAbortSignal();\n    // Wait for the user to complete assertion\n    let credential;\n    try {\n        credential = (await navigator.credentials.get(getOptions));\n    }\n    catch (err) {\n        throw identifyAuthenticationError({ error: err, options: getOptions });\n    }\n    if (!credential) {\n        throw new Error('Authentication was not completed');\n    }\n    const { id, rawId, response, type } = credential;\n    let userHandle = undefined;\n    if (response.userHandle) {\n        userHandle = bufferToBase64URLString(response.userHandle);\n    }\n    // Convert values to base64 to make it easier to send back to the server\n    return {\n        id,\n        rawId: bufferToBase64URLString(rawId),\n        response: {\n            authenticatorData: bufferToBase64URLString(response.authenticatorData),\n            clientDataJSON: bufferToBase64URLString(response.clientDataJSON),\n            signature: bufferToBase64URLString(response.signature),\n            userHandle,\n        },\n        type,\n        clientExtensionResults: credential.getClientExtensionResults(),\n        authenticatorAttachment: toAuthenticatorAttachment(credential.authenticatorAttachment),\n    };\n}\n","import { isValidDomain } from './isValidDomain.js';\nimport { WebAuthnError } from './webAuthnError.js';\n/**\n * Attempt to intuit _why_ an error was raised after calling `navigator.credentials.get()`\n */\nexport function identifyAuthenticationError({ error, options, }) {\n    const { publicKey } = options;\n    if (!publicKey) {\n        throw Error('options was missing required publicKey property');\n    }\n    if (error.name === 'AbortError') {\n        if (options.signal instanceof AbortSignal) {\n            // https://www.w3.org/TR/webauthn-2/#sctn-createCredential (Step 16)\n            return new WebAuthnError({\n                message: 'Authentication ceremony was sent an abort signal',\n                code: 'ERROR_CEREMONY_ABORTED',\n                cause: error,\n            });\n        }\n    }\n    else if (error.name === 'NotAllowedError') {\n        /**\n         * Pass the error directly through. Platforms are overloading this error beyond what the spec\n         * defines and we don't want to overwrite potentially useful error messages.\n         */\n        return new WebAuthnError({\n            message: error.message,\n            code: 'ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY',\n            cause: error,\n        });\n    }\n    else if (error.name === 'SecurityError') {\n        const effectiveDomain = globalThis.location.hostname;\n        if (!isValidDomain(effectiveDomain)) {\n            // https://www.w3.org/TR/webauthn-2/#sctn-discover-from-external-source (Step 5)\n            return new WebAuthnError({\n                message: `${globalThis.location.hostname} is an invalid domain`,\n                code: 'ERROR_INVALID_DOMAIN',\n                cause: error,\n            });\n        }\n        else if (publicKey.rpId !== effectiveDomain) {\n            // https://www.w3.org/TR/webauthn-2/#sctn-discover-from-external-source (Step 6)\n            return new WebAuthnError({\n                message: `The RP ID \"${publicKey.rpId}\" is invalid for this domain`,\n                code: 'ERROR_INVALID_RP_ID',\n                cause: error,\n            });\n        }\n    }\n    else if (error.name === 'UnknownError') {\n        // https://www.w3.org/TR/webauthn-2/#sctn-op-get-assertion (Step 1)\n        // https://www.w3.org/TR/webauthn-2/#sctn-op-get-assertion (Step 12)\n        return new WebAuthnError({\n            message: 'The authenticator was unable to process the specified options, or could not create a new assertion signature',\n            code: 'ERROR_AUTHENTICATOR_GENERAL_ERROR',\n            cause: error,\n        });\n    }\n    return error;\n}\n","import {\r\n\tcloseMobileMenu,\r\n\tshowMessage,\r\n\tshowStatusMessage,\r\n\ttogglePassworView\r\n} from './partials/shared.js';\r\n\r\nimport {\r\n\tshowLoginQrCode,\r\n\thideQrCode\r\n} from './partials/qr_login.js';\r\n\r\nimport {\r\n\tstartConditionalRequest,\r\n\tcheckWebauthnAvailable,\r\n\twebAuthVerification\r\n} from './partials/webauth.js';\r\n\r\nimport { registerWebAuthn } from './partials/register_webauth.js'; \r\n\r\n//Add an event listener to the login or register button\r\nconsole.log(\"Login.js loaded\");\r\n\r\nconst login = class{\r\n\tconstructor() {\r\n\t\tthis.init();\r\n\r\n\t\tlet params = new Proxy(new URLSearchParams(window.location.search), {\r\n\t\t\tget: (searchParams, prop) => searchParams.get(prop),\r\n\t\t});\r\n\r\n\t\tif(params['showlogin'] != null){\r\n\t\t\tconsole.log('Trying silent login');\r\n\t\t\tstartConditionalRequest('silent');\r\n\t\t}\r\n\r\n\t\tif(this.checkIsIOS){\r\n\t\t\tthis.addMaximumScaleToMetaViewport();\r\n\t\t}\r\n\r\n\t\tthis.eventListeners();\r\n\t};\r\n\r\n\teventListeners(){\r\n\t\tdocument.addEventListener('keypress', (e) => {\r\n\t\t\tif (e.key === 'Enter' && this.creds != null){\r\n\t\t\t\te.stopImmediatePropagation();\r\n\r\n\t\t\t\tif(this.curScreen == this.creds && document.getElementById('check-cred').disabled == false){\r\n\t\t\t\t\tthis.verifyCreds();\r\n\t\t\t\t}else if(this.curScreen == this.email || this.curScreen == this.twofa){\r\n\t\t\t\t\tthis.requestLogin(true);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tdocument.addEventListener(\"click\", async (event) => {\r\n\t\t\tlet target = event.target;\r\n\r\n\t\t\tif(target.matches('.login')){\r\n\t\t\t\tthis.openLoginModal();\r\n\r\n\t\t\t\tconsole.log('Trying silent login');\r\n\t\t\t}else if(target.id == 'check-cred'){\r\n\t\t\t\t// Check if a valid username and password is submitted\r\n\t\t\t\tthis.verifyCreds();\r\n\t\t\t}else if(target.id == \"login-button\"){\r\n\t\t\t\t// Submit the login form when averything is ok\r\n\t\t\t\tthis.requestLogin(true);\r\n\t\t\t}else if(target.closest('.toggle-pwd-view') != null){\r\n\t\t\t\ttogglePassworView(event);\r\n\t\t\t}else if(target.id == 'password-reset-form' || target.id == \"lost-pwd-link\"){\r\n\t\t\t\tthis.resetPassword(target);\r\n\t\t\t}else if(target.id == 'retry_webauthn'){\r\n\t\t\t\tshowMessage('');\r\n\t\t\t\tthis.verifyWebauthn([]);\r\n\t\t\t}else if(target.name == 'request_account'){\r\n\t\t\t\tthis.requestAccount(target);\r\n\t\t\t}else if(target.closest(`[name='fingerprintpicture']`) != null){\r\n\t\t\t\tstartConditionalRequest('silent');\r\n\t\t\t}else if(target.matches('.show-login-qr')){\r\n\t\t\t\tshowLoginQrCode();\r\n\t\t\t}else if(target.matches('.close-qr')){\r\n\t\t\t\thideQrCode();\r\n\t\t\t}else{\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tevent.stopImmediatePropagation();\r\n\t\t});\r\n\t};\r\n\r\n\tcheckIsIOS(){\r\n\t\treturn /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\r\n\t};\r\n\r\n\tinit(){\r\n\t\tthis.form\t\t\t= document.getElementById('loginform');\r\n\t\tthis.msgScreen\t\t= document.getElementById('message-wrapper');\r\n\t\tthis.creds\t\t\t= document.getElementById('credentials-wrapper');\r\n\t\tthis.twofa\t\t\t= document.getElementById('authenticator-wrapper');\r\n\t\tthis.email\t\t\t= document.getElementById('email-wrapper');\r\n\t\tthis.login\t\t\t= document.getElementById('login-button-wrapper');\r\n\t\tthis.passwordReset \t= document.getElementById('password-reset-form');\r\n\r\n\t\tthis.curScreen\t\t= this.creds;\r\n\t\t\r\n\t\tif(this.msgScreen.querySelector('.loader') == null){\r\n\t\t\tMain.showLoader(this.msgScreen.querySelector('.status-message'), false, 75);\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Clear all inputs and shows the first screen\r\n\t */\r\n\tresetForm(){\t\t\r\n\t\tthis.reset();\r\n\r\n\t\tthis.showScreen(this.creds);\r\n\t\t\r\n\t\tthis.curScreen\t\t= this.creds;\r\n\t}\r\n\r\n\t/**\r\n\t * Show the loading screen\r\n\t */\r\n\tloadingScreen(message){\r\n\t\tshowStatusMessage(message);\r\n\r\n\t\tthis.curScreen.classList.add('hidden');\r\n\t\tthis.login.classList.add('hidden');\r\n\t\tthis.passwordReset.classList.add('hidden');\r\n\r\n\t\tthis.msgScreen.classList.remove('hidden');\r\n\t}\r\n\r\n\t/**\r\n\t * Resets the screen to the original login screen\r\n\t */\r\n\treset(){\r\n\t\tif(this.curScreen == undefined){\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tthis.curScreen.classList.remove('hidden');\r\n\t\tthis.msgScreen.classList.add('hidden');\r\n\r\n\t\tthis.passwordReset.classList.remove('hidden');\r\n\t}\r\n\r\n\t/**\r\n\t * Shows a particular screen\r\n\t */\r\n\tshowScreen(screen){\r\n\t\tif(this.curScreen != undefined){\r\n\t\t\tthis.curScreen.classList.add('hidden');\r\n\t\t\tthis.msgScreen.classList.add('hidden');\r\n\t\t}\r\n\r\n\t\tscreen.classList.remove('hidden');\r\n\r\n\t\tif(screen == this.twofa || screen == this.email){\r\n\t\t\tthis.login.classList.remove('hidden');\r\n\t\t}else{\r\n\t\t\tthis.login.classList.add('hidden');\r\n\t\t}\r\n\r\n\t\tscreen.querySelectorAll('input').forEach(el=>window.setTimeout(() => el.focus(), 0));\r\n\r\n\t\tthis.curScreen\t= screen;\r\n\t\t\r\n\t\t//hide messsages\r\n\t\tshowMessage('');\r\n\t}\r\n\t\r\n\t/**\r\n\t * Check if a valid username and password is submitted\r\n\t */\r\n\tasync verifyCreds(){\r\n\t\tthis.username\t= document.getElementById('username').value;\r\n\t\tlet password\t= document.getElementById('password').value;\r\n\r\n\t\t// Check if the fields are filled\r\n\t\tif(this.username != '' && password != ''){\r\n\t\t\tthis.passwordReset.classList.add('hidden');\r\n\r\n\t\t\tthis.loadingScreen( 'Verifying Credentials');\r\n\t\t}else{\r\n\t\t\tshowMessage('Please give an username and password!');\r\n\t\t\treturn;\r\n\t\t}\t\r\n\r\n\t\t// Make sure we have a internet connection\r\n\t\tawait Main.waitForInternet();\r\n\r\n\t\tlet formData\t= new FormData(this.form);\r\n\r\n\t\tlet response\t= await FormSubmit.fetchRestApi('login/check-cred', formData);\r\n\r\n\t\tif(response){\r\n\t\t\tif(response  && response != false){\r\n\t\t\t\tresponse\t= this.addMethods(response);\r\n\t\t\t}else{\r\n\t\t\t\tresponse \t= false;\r\n\t\t\t}\r\n\r\n\t\t\tif(!response) {\r\n\t\t\t\tthis.reset();\r\n\r\n\t\t\t\tshowMessage('Invalid login, try again');\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\tthis.reset();\r\n\t\t}\r\n\t}\r\n\r\n\taddMethods(result){\t\t\t\r\n\t\tif(typeof(result) != 'object'){\r\n\t\t\t//something went wrong, reload the page\r\n\t\t\tlocation.reload();\r\n\t\t}\r\n\r\n\t\tif('redirect' in result){\r\n\t\t\t//redirect to the returned webpage\r\n\t\t\tlocation.href\t= result.redirect;\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\r\n\t\tif(result instanceof Array){\r\n\r\n\t\t\tif(result.find(element => element == 'webauthn')){\r\n\t\t\t\tif(checkWebauthnAvailable()){\r\n\t\t\t\t\t//correct creds and webauthn enabled\r\n\t\t\t\t\tthis.verifyWebauthn(result);\r\n\t\t\t\t}else if(result.length == 1){\r\n\t\t\t\t\tshowMessage('You do not have a valid second login method for this device, please add one.');\r\n\t\t\t\t\tthis.requestLogin(true);\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.showTwoFaFields(result);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\t//correct creds and 2fa enabled\r\n\t\t\t\tthis.showTwoFaFields(result);\r\n\t\t\t}\r\n\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Initiates and verifies a webauthentication login\r\n\t * @param {*} methods \r\n\t * @returns \r\n\t */\r\n\tasync verifyWebauthn(methods){\t\r\n\t\t//show webauthn messages\r\n\t\tthis.loadingScreen('Starting Webauthentication');\r\n\t\r\n\t\ttry{\r\n\t\t\tlet result\t= await webAuthVerification(this.username, this.msgScreen.querySelector('.status-message'));\r\n\t\r\n\t\t\tif(!result){\r\n\t\t\t\tthrow new Error( 'Webauthentication failed' );\r\n\t\t\t}\r\n\t\r\n\t\t\t//authentication success\r\n\t\t\tawait this.requestLogin(false);\r\n\t\t}catch (error){\t\t\r\n\t\t\tif(methods.length == 1){\r\n\t\t\t\tshowMessage('Authentication failed, please setup an additional login factor.');\r\n\t\t\t\tthis.requestLogin(true);\r\n\t\t\t}else{\r\n\t\t\t\tconsole.error(error);\r\n\t\t\t\tlet message;\r\n\t\t\t\tif(error['message'] == \"No authenticator available\"){\r\n\t\t\t\t\tmessage = \"No biometric login for this device found. <br>Give verification code.\";\r\n\t\t\t\t}else{\r\n\t\t\t\t\tmessage = 'Web authentication failed, please give verification code.';\r\n\t\t\t\t}\r\n\t\t\t\tshowMessage(message);\r\n\t\r\n\t\t\t\t//Show other 2fa fields\r\n\t\t\t\tthis.showTwoFaFields(methods);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Performs the login action\r\n\t */\r\n\t//show loader\r\n\tasync requestLogin(createWebAuthn){\r\n\t\tthis.loadingScreen('Logging in...');\r\n\r\n\t\tlet formData\t= new FormData(this.form);\r\n\t\tthis.form.querySelectorAll('.hidden [required]').forEach(el => {el.required = false});\r\n\t\tlet validity\t= this.form.reportValidity();\r\n\r\n\t\t//if not valid return\r\n\t\tif(!validity){\r\n\t\t\tthis.reset();\r\n\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tawait Main.waitForInternet();\r\n\r\n\t\tlet response\t= await FormSubmit.fetchRestApi('login/request_login', formData);\r\n\r\n\t\tif(!response){\r\n\t\t\tthis.reset();\r\n\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tthis.loadingScreen('Succesfully logged in');\r\n\t\t\r\n\t\t// We are logging in from an iframe\r\n\t\tif(window.self !== window.top){\r\n\r\n\t\t\t// change message\r\n\t\t\tconsole.log(window.parent.document.getElementById('iframe-loader'));\r\n\t\t\tconsole.log(window.parent.document);\r\n\t\t\tconsole.log(window.parent);\r\n\t\t\twindow.parent.document.getElementById('iframe-loader').textContent\t= 'Succesfully logged in, you may now close this popup';\r\n\r\n\t\t\t// Refresh the rest api nonce\r\n\t\t\twindow.parent.sim.restNonce\t= response.nonce;\r\n\r\n\t\t\t// Update user id\r\n\t\t\twindow.parent.sim.userId\t= response.id;\r\n\r\n\t\t\tconsole.log(window.parent.document.getElementById('iframe-loader'));\r\n\r\n\t\t\t// close all iframes\r\n\t\t\twindow.parent.document.querySelectorAll('iframe').forEach(el=>el.remove());\r\n\t\t}else{\r\n\t\t\tsim.restNonce\t= response.nonce;\r\n\t\t\tsim.userId\t\t= response.id;\r\n\r\n\t\t\t// first register a webauthn if needed\r\n\t\t\tif(createWebAuthn){\r\n\t\t\t\tawait registerWebAuthn();\r\n\t\t\t}\r\n\r\n\t\t\tthis.loadingScreen('Redirecting...');\r\n\r\n\t\t\tif(response.redirect == ''){\r\n\t\t\t\t// refresh the page\r\n\t\t\t\tlocation.reload();\r\n\t\t\t}else{\r\n\t\t\t\t// go to the redirect page\r\n\t\t\t\tlocation.href = response.redirect;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}\r\n\r\n\t/**\r\n\t * Display the form for the 2fa email or authenticator code\r\n\t */\r\n\tshowTwoFaFields(methods){\r\n\t\tif(methods.includes('email')){\r\n\t\t\tthis.requestEmailCode();\r\n\t\t}\r\n\r\n\t\t//show 2fa fields\r\n\t\tfor(const method of methods){\r\n\t\t\t//do not show webauthn\r\n\t\t\tif(method == 'webauthn'){\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tif(method == 'email'){\r\n\t\t\t\tthis.showScreen(this.email);\r\n\t\t\t}else{\r\n\t\t\t\tthis.showScreen(this.twofa);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Request email code for 2fa login\r\n\t */\r\n\tasync requestEmailCode(){\r\n\t\t// Show the email screen\r\n\t\tthis.showScreen(this.email);\r\n\r\n\t\tlet loader\t\t\t\t= Main.showLoader(null, false, 20, '', true);\r\n\t\tshowMessage(`Sending e-mail... ${loader}`);\r\n\r\n\t\tlet formData\t= new FormData();\r\n\t\tformData.append('username', this.username);\r\n\t\r\n\t\tlet response\t= await FormSubmit.fetchRestApi('login/request_email_code', formData, false);\r\n\t\t\r\n\t\tif(response){\r\n\t\t\tshowMessage(response);\r\n\t\t}else{\r\n\t\t\tshowMessage(`Sending e-mail failed`);\r\n\t\t}\r\n\t}\r\n\r\n\t//request password reset e-mail\r\n\tasync resetPassword(target){\t\t\r\n\t\tlet form \t\t\t= target.closest('form');\r\n\r\n\t\tlet button\t\t\t= form.querySelector('#lost-pwd-link');\r\n\r\n\t\tlet extraElements\t= form.querySelector('div.form-elements');\r\n\r\n\t\t// If the extra elements are not present, create them\r\n\t\tif(extraElements != null && extraElements.innerHTML != '' && extraElements.classList.contains('hidden')){\r\n\t\t\t// Hide the login form\r\n\t\t\tdocument.getElementById('loginform').classList.add('hidden');\r\n\r\n\t\t\tif(form.querySelector(`[name='username']`) == null){\r\n\t\t\t\textraElements.innerHTML\t= `<label class=\"form-label\">\r\n\t\t\t\t\tUsername<br>\r\n\t\t\t\t\t<input type=\"text\" name=\"username\" id=\"username\" class=\"form-control\" value=\"${this.username}\" required>\r\n\t\t\t\t</label><br>`+extraElements.innerHTML;\r\n\t\t\t}\r\n\r\n\t\t\t// Show the form\r\n\t\t\textraElements.classList.remove('hidden');\r\n\r\n\t\t\tbutton.dataset.orghtml\t= button.innerHTML;\r\n\t\t\tbutton.innerHTML\t= 'Request Password Reset';\r\n\r\n\t\t\tbutton.classList.add('button');\r\n\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif(this.username == ''){\r\n\t\t\tMain.displayMessage('Specify your username first', 'error');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tbutton.classList.add('hidden');\r\n\t\tlet loader = Main.showLoader(button, false, 50, 'Requesting Password Reset...   ');\r\n\r\n\t\tlet formData\t= new FormData(form);\r\n\t\tformData.append('username', this.username);\r\n\t\t\r\n\t\tlet response\t= await FormSubmit.fetchRestApi('login/request_pwd_reset', formData);\r\n\r\n\t\tif (response) {\r\n\t\t\tMain.displayMessage(response, 'success');\r\n\t\t\t\r\n\t\t\t// Show the login form\r\n\t\t\tdocument.getElementById('loginform').classList.remove('hidden');\r\n\r\n\t\t\textraElements.classList.add('hidden');\r\n\r\n\t\t\tbutton.innerHTML\t= button.dataset.orghtml;\r\n\t\t\tbutton.classList.remove('button');\r\n\t\t}\r\n\r\n\t\tloader.remove();\r\n\t\tbutton.classList.remove('hidden');\r\n\r\n\t}\r\n\r\n\t// request a new user account\r\n\tasync requestAccount(target){\r\n\t\tlet form \t\t= target.closest('form');\r\n\r\n\t\t// Show loader\r\n\t\tform.querySelector('.loader-wrapper').classList.remove('hidden');\r\n\r\n\t\tlet formData\t= new FormData(form);\r\n\r\n\t\tlet response\t= await FormSubmit.fetchRestApi('login/request_user_account', formData);\r\n\t\t\r\n\t\tif(response){\r\n\t\t\tMain.displayMessage(response);\r\n\t\t}\r\n\r\n\t\t// reset form \r\n\t\tform.reset();\r\n\r\n\t\t// Hide loader\r\n\t\tform.querySelector('.loader-wrapper').classList.add('hidden');\r\n\t}\r\n\r\n\t// Show the modal with the login form\r\n\topenLoginModal(){\r\n\t\t// Make sure the menu is closed\r\n\t\tcloseMobileMenu();\r\n\r\n\t\t//prevent page scrolling\r\n\t\tdocument.querySelector('body').style.overflowY = 'hidden';\r\n\r\n\t\tthis.modal\t= document.getElementById('login-modal');\r\n\t\tthis.modal.style.display = 'block';\r\n\r\n\t\tthis.modal.classList.remove('hidden');\r\n\r\n\t\tthis.resetForm();\t\t\r\n\t}\r\n\t\r\n\t//prevent zoom in on login form on a iphone\r\n\taddMaximumScaleToMetaViewport(){\r\n\t\tlet el = document.querySelector('meta[name=viewport]');\r\n\t\r\n\t\tif (el !== null) {\r\n\t\t\tlet content\t= el.getAttribute('content');\r\n\t\t\tlet re \t\t= /maximum\\-scale=[0-9\\.]+/g;\r\n\t\t\r\n\t\t\tif (re.test(content)) {\r\n\t\t\t\tcontent = content.replace(re, 'maximum-scale=1.0');\r\n\t\t\t} else {\r\n\t\t\t\tcontent = [content, 'maximum-scale=1.0'].join(', ')\r\n\t\t\t}\r\n\t\t\r\n\t\t\tel.setAttribute('content', content);\r\n\t\t}\r\n\t};\r\n}\r\n\r\n// SHow the login button\r\ndocument.addEventListener('DOMContentLoaded', () => {\r\n\t//check if the current browser supports webauthn\r\n\tcheckWebauthnAvailable();\r\n\r\n\tdocument.querySelectorAll('.login.hidden').forEach(el=>{\r\n\t\tel.classList.remove('hidden');\r\n\t});\t\r\n\r\n\tsim.login = new login();\r\n});","// Import the registration hook\r\nimport { checkWebauthnAvailable } from './webauth.js';\r\n\r\nimport { startRegistration } from '@simplewebauthn/browser'\r\n\r\nimport DeviceDetector from \"device-detector-js\";\r\n\r\nimport {\r\n\tshowMessage,\r\n\tshowStatusMessage\r\n} from './shared.js';\r\n\r\nexport async function registerWebAuthn(){\r\n\tif(window.webauth_register == undefined){\r\n\t\twindow.webauth_register\t= 'running';\r\n\t\tif( !checkWebauthnAvailable()){\r\n\t\t\treturn;\r\n\t\t}\r\n\t}\r\n\r\n\tconst deviceDetector    = new DeviceDetector();\r\n\r\n\tconst device            = deviceDetector.parse(window.navigator.userAgent);\r\n\r\n\tlet identifier          = `${device.device.type}_${device.device.brand}_${device.device.model}_${device.client.name}`;\r\n\r\n\tshowMessage( 'Please take a few seconds to setup your login token...' );\r\n\r\n\t// Get registration options from the endpoint\r\n\tconst optionsJSON\t\t\t= await FormSubmit.fetchRestApi('login/fingerprint_options');\r\n\r\n\t// Update the message\r\n\tshowStatusMessage('Please authenticate...');\r\n\r\n\tlet attResp;\r\n\ttry {\r\n\t\t// Pass the options to the authenticator and wait for a response\r\n\t\tattResp = await startRegistration({ optionsJSON });\r\n\t} catch (error) {\r\n        // Handle different error types\r\n        if (error.name === 'NotAllowedError') {\r\n            showStatusMessage('Operation cancelled or timed out');\r\n        } else if (error.name === 'InvalidStateError') {\r\n            showStatusMessage('Authenticator already registered');\r\n        } else if (error.name === 'NotSupportedError') {\r\n            showStatusMessage('WebAuthn not supported in this browser');\r\n        } else if (error.name === 'AbortError') {\r\n            showStatusMessage('Operation was aborted');\r\n        } else {\r\n            showStatusMessage('Authentication failed: ' + error.message);\r\n        }\r\n\t\t\r\n\t\treturn;\r\n\t}\r\n\r\n\tshowMessage( '' );\r\n\r\n\tshowStatusMessage( 'Registering Authenticator' );\r\n\r\n\tlet formData\t\t\t= new FormData();\r\n\tformData.append('identifier', identifier);\r\n\tformData.append('publicKeyCredential', btoa(JSON.stringify(attResp)));\r\n\r\n\tlet response\t\t\t= await FormSubmit.fetchRestApi('login/store_fingerprint', formData);\r\n\tif(!response){\r\n\t\treturn;\r\n\t}\r\n\r\n\tshowStatusMessage('Registration success');\r\n}","import { isValidDomain } from './isValidDomain.js';\nimport { WebAuthnError } from './webAuthnError.js';\n/**\n * Attempt to intuit _why_ an error was raised after calling `navigator.credentials.create()`\n */\nexport function identifyRegistrationError({ error, options, }) {\n    const { publicKey } = options;\n    if (!publicKey) {\n        throw Error('options was missing required publicKey property');\n    }\n    if (error.name === 'AbortError') {\n        if (options.signal instanceof AbortSignal) {\n            // https://www.w3.org/TR/webauthn-2/#sctn-createCredential (Step 16)\n            return new WebAuthnError({\n                message: 'Registration ceremony was sent an abort signal',\n                code: 'ERROR_CEREMONY_ABORTED',\n                cause: error,\n            });\n        }\n    }\n    else if (error.name === 'ConstraintError') {\n        if (publicKey.authenticatorSelection?.requireResidentKey === true) {\n            // https://www.w3.org/TR/webauthn-2/#sctn-op-make-cred (Step 4)\n            return new WebAuthnError({\n                message: 'Discoverable credentials were required but no available authenticator supported it',\n                code: 'ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT',\n                cause: error,\n            });\n        }\n        else if (\n        // @ts-ignore: `mediation` doesn't yet exist on CredentialCreationOptions but it's possible as of Sept 2024\n        options.mediation === 'conditional' &&\n            publicKey.authenticatorSelection?.userVerification === 'required') {\n            // https://w3c.github.io/webauthn/#sctn-createCredential (Step 22.4)\n            return new WebAuthnError({\n                message: 'User verification was required during automatic registration but it could not be performed',\n                code: 'ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE',\n                cause: error,\n            });\n        }\n        else if (publicKey.authenticatorSelection?.userVerification === 'required') {\n            // https://www.w3.org/TR/webauthn-2/#sctn-op-make-cred (Step 5)\n            return new WebAuthnError({\n                message: 'User verification was required but no available authenticator supported it',\n                code: 'ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT',\n                cause: error,\n            });\n        }\n    }\n    else if (error.name === 'InvalidStateError') {\n        // https://www.w3.org/TR/webauthn-2/#sctn-createCredential (Step 20)\n        // https://www.w3.org/TR/webauthn-2/#sctn-op-make-cred (Step 3)\n        return new WebAuthnError({\n            message: 'The authenticator was previously registered',\n            code: 'ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED',\n            cause: error,\n        });\n    }\n    else if (error.name === 'NotAllowedError') {\n        /**\n         * Pass the error directly through. Platforms are overloading this error beyond what the spec\n         * defines and we don't want to overwrite potentially useful error messages.\n         */\n        return new WebAuthnError({\n            message: error.message,\n            code: 'ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY',\n            cause: error,\n        });\n    }\n    else if (error.name === 'NotSupportedError') {\n        const validPubKeyCredParams = publicKey.pubKeyCredParams.filter((param) => param.type === 'public-key');\n        if (validPubKeyCredParams.length === 0) {\n            // https://www.w3.org/TR/webauthn-2/#sctn-createCredential (Step 10)\n            return new WebAuthnError({\n                message: 'No entry in pubKeyCredParams was of type \"public-key\"',\n                code: 'ERROR_MALFORMED_PUBKEYCREDPARAMS',\n                cause: error,\n            });\n        }\n        // https://www.w3.org/TR/webauthn-2/#sctn-op-make-cred (Step 2)\n        return new WebAuthnError({\n            message: 'No available authenticator supported any of the specified pubKeyCredParams algorithms',\n            code: 'ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG',\n            cause: error,\n        });\n    }\n    else if (error.name === 'SecurityError') {\n        const effectiveDomain = globalThis.location.hostname;\n        if (!isValidDomain(effectiveDomain)) {\n            // https://www.w3.org/TR/webauthn-2/#sctn-createCredential (Step 7)\n            return new WebAuthnError({\n                message: `${globalThis.location.hostname} is an invalid domain`,\n                code: 'ERROR_INVALID_DOMAIN',\n                cause: error,\n            });\n        }\n        else if (publicKey.rp.id !== effectiveDomain) {\n            // https://www.w3.org/TR/webauthn-2/#sctn-createCredential (Step 8)\n            return new WebAuthnError({\n                message: `The RP ID \"${publicKey.rp.id}\" is invalid for this domain`,\n                code: 'ERROR_INVALID_RP_ID',\n                cause: error,\n            });\n        }\n    }\n    else if (error.name === 'TypeError') {\n        if (publicKey.user.id.byteLength < 1 || publicKey.user.id.byteLength > 64) {\n            // https://www.w3.org/TR/webauthn-2/#sctn-createCredential (Step 5)\n            return new WebAuthnError({\n                message: 'User ID was not between 1 and 64 characters',\n                code: 'ERROR_INVALID_USER_ID_LENGTH',\n                cause: error,\n            });\n        }\n    }\n    else if (error.name === 'UnknownError') {\n        // https://www.w3.org/TR/webauthn-2/#sctn-op-make-cred (Step 1)\n        // https://www.w3.org/TR/webauthn-2/#sctn-op-make-cred (Step 8)\n        return new WebAuthnError({\n            message: 'The authenticator was unable to process the specified options, or could not create a new credential',\n            code: 'ERROR_AUTHENTICATOR_GENERAL_ERROR',\n            cause: error,\n        });\n    }\n    return error;\n}\n"],"names":["Object","defineProperty","exports","value","versionCompare","v1","v2","operator","i","x","compare","vm","prepVersion","v","replace","length","split","numVersion","isNaN","parseInt","Math","max","__importDefault","this","mod","__esModule","car_browsers_json_1","variable_replacement_1","user_agent_1","constructor","parse","userAgent","result","type","brand","model","car","entries","default","userAgentParser","regex","models","match","variableReplacement","trim","trim_1","formatVersion","version","versionTruncation","undefined","versionString","RegExp","versionParts","test","join","Number","isInteger","parseFloat","toFixed","slice","parseBrowserEngineVersion","engine","geckoVersionRegex","pop","cameras_json_1","camera","modelMatch","televisions_json_1","model_1","isHbbTv","television","buildModel","memoryCache","memoryCacheBucket","set","key","get","hasOwnProperty","vendorfragments_json_1","vendorFragment","version_1","browsers_json_1","browser_engine_json_1","available_browsers_json_1","mobile_only_browsers_json_1","BrowserParser","options","name","engineVersion","browser","vrpVersion","shortVersion","versions","sortedEngineVersions","sort","a","b","versionThreshold","engineByVersion","browserEngine","exec","_a","assign","getBrowserShortName","browserName","shortName","isMobileOnlyBrowser","includes","cache","rawRegex","regexInstance","cachedRegexInstance","getRegexInstance","consoles_json_1","gameConsole","device","browser_1","mobile_apps_1","feed_readers_1","libraries_1","media_players_1","personal_information_managers_1","clientParsers","Parser","client","mobile_apps_json_1","mobileApp","oss_json_1","operating_system_json_1","desktopOsArray","shortOsNames","operatingSystem","osFamilies","OperatingSystemParser","platform","parsePlatform","getDesktopOsArray","getOsFamily","osName","osShortName","getOsShortName","osFamily","shortNames","libraries_json_1","url","library","cameras_1","mobiles_1","televisions_1","cars_1","consoles_1","notebooks_1","portable_media_players_1","deviceParsers","template","variables","index","substr","mediaplayers_json_1","mediaPlayer","notebooks_json_1","notebook","client_1","device_1","operating_system_1","vendor_fragment_1","BotParser","version_compare_1","module","skipBotDetection","_b","_c","_d","_e","_f","_g","_h","_j","_k","_l","_m","_o","_p","clientParser","os","operatingSystemParser","deviceParser","bot","botParser","osVersion","vendorFragmentParser","createDeviceObject","hasAndroidTabletFragment","hasAndroidMobileFragment","isToucheEnabled","hasDesktopFragment","isDesktop","usesMobileBrowser","pim_json_1","personalInformationManager","str","char","portable_media_player_json_1","portableMediaPlayer","mobiles_json_1","resultType","mobile","bots_json_1","category","producer","feed_readers_json_1","feedReader","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","call","showMessage","message","document","querySelectorAll","forEach","el","innerHTML","DOMPurify","sanitize","showStatusMessage","intervalId","n","getter","d","definition","o","enumerable","obj","prop","prototype","checkCount","async","refreshQrCode","formData","FormData","wrapper","getElementById","qrCodeImage","console","log","append","dataset","token","response","FormSubmit","fetchRestApi","wrapperinnerHTML","oldtoken","clearInterval","Main","showLoader","startsWith","location","href","reload","login","bufferToBase64URLString","buffer","bytes","Uint8Array","charCode","String","fromCharCode","btoa","base64URLStringToBuffer","base64URLString","base64","padLength","padded","padEnd","binary","atob","ArrayBuffer","charCodeAt","_browserSupportsWebAuthnInternals","stubThis","globalThis","PublicKeyCredential","toPublicKeyCredentialDescriptor","descriptor","id","transports","isValidDomain","hostname","WebAuthnError","Error","code","cause","super","configurable","writable","WebAuthnAbortService","createNewAbortSignal","controller","abortError","abort","newController","AbortController","signal","cancelCeremony","attachments","toAuthenticatorAttachment","attachment","indexOf","warnOnBrokenImplementation","methodName","warn","_browserSupportsWebAuthnAutofillInternals","webAuthVerification","username","sim","loadingScreen","assertionResponse","optionsJSON","challenge","useBrowserAutofill","verifyBrowserAutofillInput","allowCredentials","map","publicKey","getOptions","Promise","resolve","globalPublicKeyCredential","isConditionalMediationAvailable","browserSupportsWebAuthnAutofill","mediation","credential","navigator","credentials","err","error","AbortSignal","effectiveDomain","rpId","identifyAuthenticationError","rawId","userHandle","authenticatorData","clientDataJSON","signature","clientExtensionResults","getClientExtensionResults","authenticatorAttachment","startAuthentication","form","JSON","stringify","verified","window","isUserVerifyingPlatformAuthenticatorAvailable","then","startConditionalRequest","conditionalMediationSupported","requestLogin","reset","checkWebauthnAvailable","webauthnSupported","init","Proxy","URLSearchParams","search","searchParams","checkIsIOS","addMaximumScaleToMetaViewport","eventListeners","addEventListener","e","creds","stopImmediatePropagation","curScreen","disabled","verifyCreds","email","twofa","event","target","matches","openLoginModal","closest","ev","tagName","parentNode","toggle","title","querySelector","togglePassworView","resetPassword","verifyWebauthn","requestAccount","classList","add","firstChild","setInterval","remove","MSStream","msgScreen","passwordReset","resetForm","showScreen","screen","setTimeout","focus","password","waitForInternet","addMethods","redirect","Array","find","element","showTwoFaFields","methods","createWebAuthn","required","reportValidity","self","top","parent","textContent","restNonce","nonce","userId","webauth_register","identifier","attResp","useAutoRegister","user","excludeCredentials","createOptions","create","authenticatorSelection","requireResidentKey","userVerification","pubKeyCredParams","filter","param","rp","byteLength","identifyRegistrationError","responsePublicKeyAlgorithm","responsePublicKey","responseAuthenticatorData","getTransports","getPublicKeyAlgorithm","getPublicKey","_publicKey","getAuthenticatorData","attestationObject","publicKeyAlgorithm","startRegistration","registerWebAuthn","requestEmailCode","method","button","extraElements","contains","orghtml","displayMessage","loader","ariaExpanded","style","overflowY","modal","display","content","getAttribute","re","setAttribute"],"sourceRoot":""}