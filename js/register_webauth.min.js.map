{"version":3,"file":"register_webauth.min.js","mappings":"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","sources":["webpack://login/./node_modules/device-detector-js/dist/utils/version-compare.js","webpack://login/./node_modules/device-detector-js/dist/parsers/device/cars.js","webpack://login/./node_modules/device-detector-js/dist/utils/version.js","webpack://login/./node_modules/device-detector-js/dist/parsers/device/cameras.js","webpack://login/./node_modules/device-detector-js/dist/parsers/device/televisions.js","webpack://login/./node_modules/device-detector-js/dist/utils/memory-cache.js","webpack://login/./node_modules/device-detector-js/dist/parsers/bot/index.js","webpack://login/./node_modules/device-detector-js/dist/parsers/vendor-fragment/index.js","webpack://login/./node_modules/device-detector-js/dist/parsers/client/browser.js","webpack://login/./node_modules/device-detector-js/dist/utils/user-agent.js","webpack://login/./node_modules/device-detector-js/dist/parsers/device/consoles.js","webpack://login/./node_modules/device-detector-js/dist/parsers/client/index.js","webpack://login/./node_modules/device-detector-js/dist/parsers/client/mobile-apps.js","webpack://login/./node_modules/device-detector-js/dist/parsers/operating-system/index.js","webpack://login/./node_modules/device-detector-js/dist/parsers/client/libraries.js","webpack://login/./node_modules/device-detector-js/dist/parsers/device/index.js","webpack://login/./node_modules/device-detector-js/dist/utils/variable-replacement.js","webpack://login/./node_modules/device-detector-js/dist/parsers/client/media-players.js","webpack://login/./node_modules/device-detector-js/dist/parsers/device/notebooks.js","webpack://login/./node_modules/device-detector-js/dist/utils/model.js","webpack://login/./node_modules/device-detector-js/dist/index.js","webpack://login/./node_modules/device-detector-js/dist/parsers/client/personal-information-managers.js","webpack://login/./node_modules/device-detector-js/dist/utils/trim.js","webpack://login/./node_modules/device-detector-js/dist/parsers/device/portable-media-players.js","webpack://login/./node_modules/device-detector-js/dist/parsers/device/mobiles.js","webpack://login/./node_modules/device-detector-js/dist/parsers/client/feed-readers.js","webpack://login/webpack/bootstrap","webpack://login/webpack/runtime/compat get default export","webpack://login/webpack/runtime/define property getters","webpack://login/webpack/runtime/hasOwnProperty shorthand","webpack://login/./partials/webauth.js","webpack://login/./partials/shared.js","webpack://login/./register_webauth.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.versionCompare = (v1, v2, operator) => {\n    //      discuss at: http://locutus.io/php/version_compare/\n    //      original by: Philippe Jausions (http://pear.php.net/user/jausions)\n    //      original by: Aidan Lister (http://aidanlister.com/)\n    //      reimplemented by: Kankrelune (http://www.webfaktory.info/)\n    //      improved by: Brett Zamir (http://brett-zamir.me)\n    //      improved by: Scott Baker\n    //      improved by: Theriault (https://github.com/Theriault)\n    //      example 1: version_compare('8.2.5rc', '8.2.5a')\n    //      returns 1: 1\n    //      example 2: version_compare('8.2.50', '8.2.52', '<')\n    //      returns 2: true\n    //      example 3: version_compare('5.3.0-dev', '5.3.0')\n    //      returns 3: -1\n    //      example 4: version_compare('4.1.0.52','4.01.0.51')\n    //      returns 4: 1\n    // Important: compare must be initialized at 0.\n    let i;\n    let x;\n    let compare = 0;\n    // vm maps textual PHP versions to negatives so they're less than 0.\n    // PHP currently defines these as CASE-SENSITIVE. It is important to\n    // leave these as negatives so that they can come before numerical versions\n    // and as if no letters were there to begin with.\n    // (1alpha is < 1 and < 1.1 but > 1dev1)\n    // If a non-numerical value can't be mapped to this table, it receives\n    // -7 as its value.\n    const vm = {\n        \"dev\": -6,\n        \"alpha\": -5,\n        \"a\": -5,\n        \"beta\": -4,\n        \"b\": -4,\n        \"RC\": -3,\n        \"rc\": -3,\n        \"#\": -2,\n        \"p\": 1,\n        \"pl\": 1\n    };\n    // This function will be called to prepare each version argument.\n    // It replaces every _, -, and + with a dot.\n    // It surrounds any nonsequence of numbers/dots with dots.\n    // It replaces sequences of dots with a single dot.\n    //    version_compare('4..0', '4.0') === 0\n    // Important: A string of 0 length needs to be converted into a value\n    // even less than an unexisting value in vm (-7), hence [-8].\n    // It's also important to not strip spaces because of this.\n    //   version_compare('', ' ') === 1\n    const prepVersion = (v) => {\n        v = (\"\" + v).replace(/[_\\-+]/g, \".\");\n        v = v.replace(/([^.\\d]+)/g, \".$1.\").replace(/\\.{2,}/g, \".\");\n        return (!v.length ? [-8] : v.split(\".\"));\n    };\n    // This converts a version component to a number.\n    // Empty component becomes 0.\n    // Non-numerical component becomes a negative number.\n    // Numerical component becomes itself as an integer.\n    const numVersion = (v) => {\n        return !v ? 0 : (isNaN(v) ? vm[v] || -7 : parseInt(v, 10));\n    };\n    v1 = prepVersion(v1);\n    v2 = prepVersion(v2);\n    x = Math.max(v1.length, v2.length);\n    for (i = 0; i < x; i++) {\n        if (v1[i] === v2[i]) {\n            continue;\n        }\n        v1[i] = numVersion(v1[i]);\n        v2[i] = numVersion(v2[i]);\n        if (v1[i] < v2[i]) {\n            compare = -1;\n            break;\n        }\n        else if (v1[i] > v2[i]) {\n            compare = 1;\n            break;\n        }\n    }\n    if (!operator) {\n        return compare;\n    }\n    // Important: operator is CASE-SENSITIVE.\n    // \"No operator\" seems to be treated as \"<.\"\n    // Any other values seem to make the function return null.\n    switch (operator) {\n        case \">\":\n        case \"gt\":\n            return (compare > 0);\n        case \">=\":\n        case \"ge\":\n            return (compare >= 0);\n        case \"<=\":\n        case \"le\":\n            return (compare <= 0);\n        case \"===\":\n        case \"=\":\n        case \"eq\":\n            return (compare === 0);\n        case \"<>\":\n        case \"!==\":\n        case \"ne\":\n            return (compare !== 0);\n        case \"\":\n        case \"<\":\n        case \"lt\":\n            return (compare < 0);\n        default:\n            return null;\n    }\n};\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst car_browsers_json_1 = __importDefault(require(\"../../fixtures/regexes/device/car_browsers.json\"));\nconst variable_replacement_1 = require(\"../../utils/variable-replacement\");\nconst user_agent_1 = require(\"../../utils/user-agent\");\nclass CarParser {\n    constructor() {\n        this.parse = (userAgent) => {\n            const result = {\n                type: \"\",\n                brand: \"\",\n                model: \"\"\n            };\n            for (const [brand, car] of Object.entries(car_browsers_json_1.default)) {\n                const match = user_agent_1.userAgentParser(car.regex, userAgent);\n                if (!match)\n                    continue;\n                result.type = \"car\";\n                result.brand = brand;\n                for (const model of car.models) {\n                    const match = user_agent_1.userAgentParser(model.regex, userAgent);\n                    if (!match)\n                        continue;\n                    result.model = variable_replacement_1.variableReplacement(model.model, match).trim();\n                }\n                break;\n            }\n            return result;\n        };\n    }\n}\nexports.default = CarParser;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst trim_1 = require(\"./trim\");\nexports.formatVersion = (version, versionTruncation) => {\n    if (version === undefined)\n        return \"\";\n    const versionString = trim_1.trim(version, \". \").replace(new RegExp(\"_\", \"g\"), \".\");\n    const versionParts = versionString.split(\".\");\n    // Return if the string is not only digits once we removed the dots\n    if (!/^\\d+$/.test(versionParts.join(\"\"))) {\n        return versionString;\n    }\n    if (versionTruncation !== 0) {\n        if (Number.isInteger(parseFloat(versionString))) {\n            return parseInt(versionString, 10).toFixed(1);\n        }\n    }\n    if (versionParts.length > 1) {\n        if (versionTruncation !== null) {\n            return versionParts.slice(0, versionTruncation + 1).join(\".\");\n        }\n    }\n    return versionString;\n};\nexports.parseBrowserEngineVersion = (userAgent, engine) => {\n    if (!engine)\n        return \"\";\n    if (engine === \"Gecko\") {\n        const geckoVersionRegex = /[ ](?:rv[: ]([0-9\\.]+)).*gecko\\/[0-9]{8,10}/i;\n        const match = userAgent.match(geckoVersionRegex);\n        if (match) {\n            return match.pop();\n        }\n    }\n    const regex = new RegExp(`${engine}\\\\s*\\\\/?\\\\s*((?:(?=\\\\d+\\\\.\\\\d)\\\\d+[.\\\\d]*|\\\\d{1,7}(?=(?:\\\\D|$))))`, \"i\");\n    const match = userAgent.match(regex);\n    if (!match)\n        return \"\";\n    return match.pop();\n};\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst cameras_json_1 = __importDefault(require(\"../../fixtures/regexes/device/cameras.json\"));\nconst variable_replacement_1 = require(\"../../utils/variable-replacement\");\nconst user_agent_1 = require(\"../../utils/user-agent\");\nclass CameraParser {\n    constructor() {\n        this.parse = (userAgent) => {\n            const result = {\n                type: \"\",\n                brand: \"\",\n                model: \"\"\n            };\n            for (const [brand, camera] of Object.entries(cameras_json_1.default)) {\n                const match = user_agent_1.userAgentParser(camera.regex, userAgent);\n                if (!match)\n                    continue;\n                result.type = \"camera\";\n                result.brand = brand;\n                if (\"model\" in camera && camera.model) {\n                    result.model = variable_replacement_1.variableReplacement(camera.model, match).trim();\n                }\n                else if (\"models\" in camera && camera.models) {\n                    for (const model of camera.models) {\n                        const modelMatch = user_agent_1.userAgentParser(model.regex, userAgent);\n                        if (!modelMatch)\n                            continue;\n                        result.model = variable_replacement_1.variableReplacement(model.model, modelMatch).trim();\n                        break;\n                    }\n                }\n                break;\n            }\n            return result;\n        };\n    }\n}\nexports.default = CameraParser;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst televisions_json_1 = __importDefault(require(\"../../fixtures/regexes/device/televisions.json\"));\nconst variable_replacement_1 = require(\"../../utils/variable-replacement\");\nconst user_agent_1 = require(\"../../utils/user-agent\");\nconst model_1 = require(\"../../utils/model\");\nclass TelevisionParser {\n    constructor() {\n        this.parse = (userAgent) => {\n            const result = {\n                type: \"\",\n                brand: \"\",\n                model: \"\"\n            };\n            if (!this.isHbbTv(userAgent))\n                return result;\n            result.type = \"television\";\n            for (const [brand, television] of Object.entries(televisions_json_1.default)) {\n                const match = user_agent_1.userAgentParser(television.regex, userAgent);\n                if (!match)\n                    continue;\n                result.brand = brand;\n                if (\"model\" in television && television.model) {\n                    result.model = model_1.buildModel(variable_replacement_1.variableReplacement(television.model, match)).trim();\n                }\n                else if (\"models\" in television && television.models) {\n                    for (const model of television.models) {\n                        const modelMatch = user_agent_1.userAgentParser(model.regex, userAgent);\n                        if (!modelMatch)\n                            continue;\n                        result.model = model_1.buildModel(variable_replacement_1.variableReplacement(model.model, modelMatch)).trim();\n                        break;\n                    }\n                }\n                break;\n            }\n            return result;\n        };\n        this.isHbbTv = (userAgent) => {\n            return user_agent_1.userAgentParser(\"HbbTV\\/([1-9]{1}(?:\\.[0-9]{1}){1,2})\", userAgent);\n        };\n    }\n}\nexports.default = TelevisionParser;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.memoryCache = () => {\n    const memoryCacheBucket = {};\n    const set = (key, value) => {\n        memoryCacheBucket[key] = value;\n    };\n    const get = (key) => {\n        if (memoryCacheBucket.hasOwnProperty(key)) {\n            return memoryCacheBucket[key];\n        }\n    };\n    return {\n        set,\n        get\n    };\n};\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nconst bots_json_1 = __importDefault(require(\"../../fixtures/regexes/bots.json\"));\nconst user_agent_1 = require(\"../../utils/user-agent\");\nclass BotParser {\n    constructor() {\n        this.parse = (userAgent) => {\n            var _a, _b, _c, _d;\n            for (const bot of bots_json_1.default) {\n                const match = user_agent_1.userAgentParser(bot.regex, userAgent);\n                if (!match)\n                    continue;\n                return {\n                    name: bot.name,\n                    category: bot.category || \"\",\n                    url: bot.url || \"\",\n                    producer: {\n                        name: ((_b = (_a = bot) === null || _a === void 0 ? void 0 : _a.producer) === null || _b === void 0 ? void 0 : _b.name) || \"\",\n                        url: ((_d = (_c = bot) === null || _c === void 0 ? void 0 : _c.producer) === null || _d === void 0 ? void 0 : _d.url) || \"\"\n                    }\n                };\n            }\n            return null;\n        };\n    }\n}\nmodule.exports = BotParser;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst vendorfragments_json_1 = __importDefault(require(\"../../fixtures/regexes/vendorfragments.json\"));\nconst user_agent_1 = require(\"../../utils/user-agent\");\nclass VendorFragmentParser {\n    constructor() {\n        this.parse = (userAgent) => {\n            for (const [brand, vendorFragment] of Object.entries(vendorfragments_json_1.default)) {\n                for (const regex of vendorFragment) {\n                    const match = user_agent_1.userAgentParser(regex, userAgent);\n                    if (!match)\n                        continue;\n                    return brand;\n                }\n            }\n            return \"\";\n        };\n    }\n}\nexports.default = VendorFragmentParser;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst version_1 = require(\"../../utils/version\");\nconst variable_replacement_1 = require(\"../../utils/variable-replacement\");\nconst user_agent_1 = require(\"../../utils/user-agent\");\nconst browsers_json_1 = __importDefault(require(\"../../fixtures/regexes/client/browsers.json\"));\nconst browser_engine_json_1 = __importDefault(require(\"../../fixtures/regexes/client/browser_engine.json\"));\nconst available_browsers_json_1 = __importDefault(require(\"./fixtures/available-browsers.json\"));\nconst mobile_only_browsers_json_1 = __importDefault(require(\"./fixtures/mobile-only-browsers.json\"));\nclass BrowserParser {\n    constructor(options) {\n        this.options = {\n            versionTruncation: 1\n        };\n        this.parse = (userAgent) => {\n            const result = {\n                type: \"\",\n                name: \"\",\n                version: \"\",\n                engine: \"\",\n                engineVersion: \"\"\n            };\n            for (const browser of browsers_json_1.default) {\n                const match = user_agent_1.userAgentParser(browser.regex, userAgent);\n                if (!match)\n                    continue;\n                const vrpVersion = variable_replacement_1.variableReplacement(browser.version, match);\n                const version = version_1.formatVersion(vrpVersion, this.options.versionTruncation);\n                const shortVersion = version && parseFloat(version_1.formatVersion(vrpVersion, 1)) || \"\";\n                if (browser.engine) {\n                    result.engine = browser.engine.default;\n                    if (browser.engine && browser.engine.versions && shortVersion) {\n                        const sortedEngineVersions = Object.entries(browser.engine.versions).sort((a, b) => {\n                            return parseFloat(a[0]) > parseFloat(b[0]) ? 1 : -1;\n                        });\n                        for (const [versionThreshold, engineByVersion] of sortedEngineVersions) {\n                            if (parseFloat(versionThreshold) <= shortVersion) {\n                                result.engine = engineByVersion || \"\";\n                            }\n                        }\n                    }\n                }\n                result.type = \"browser\";\n                result.name = variable_replacement_1.variableReplacement(browser.name, match);\n                result.version = version;\n                break;\n            }\n            if (!result.engine) {\n                for (const browserEngine of browser_engine_json_1.default) {\n                    let match = null;\n                    try {\n                        match = RegExp(browserEngine.regex, \"i\").exec(userAgent);\n                    }\n                    catch (_a) {\n                        // TODO: find out why it fails in some browsers\n                    }\n                    if (!match)\n                        continue;\n                    result.engine = browserEngine.name;\n                    break;\n                }\n            }\n            result.engineVersion = version_1.formatVersion(version_1.parseBrowserEngineVersion(userAgent, result.engine), this.options.versionTruncation);\n            return result;\n        };\n        this.options = Object.assign(Object.assign({}, this.options), options);\n    }\n}\nexports.default = BrowserParser;\nBrowserParser.getBrowserShortName = (browserName) => {\n    for (const [shortName, name] of Object.entries(available_browsers_json_1.default)) {\n        if (name === browserName) {\n            return shortName;\n        }\n    }\n    return \"\";\n};\nBrowserParser.isMobileOnlyBrowser = (browserName) => {\n    return mobile_only_browsers_json_1.default.includes(BrowserParser.getBrowserShortName(browserName));\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst memory_cache_1 = require(\"./memory-cache\");\nconst cache = memory_cache_1.memoryCache();\nconst getRegexInstance = (rawRegex) => {\n    const cachedRegexInstance = cache.get(rawRegex);\n    if (cachedRegexInstance)\n        return cachedRegexInstance.value;\n    const regexInstance = RegExp(`(?:^|[^A-Z0-9\\-_]|[^A-Z0-9\\-]_|sprd-)(?:${rawRegex})`, \"i\");\n    cache.set(rawRegex, {\n        value: regexInstance\n    });\n    return regexInstance;\n};\nexports.userAgentParser = (rawRegex, userAgent) => {\n    // TODO: find out why it fails in some browsers\n    try {\n        const regexInstance = getRegexInstance(rawRegex);\n        const match = regexInstance.exec(userAgent);\n        return match ? match.slice(1) : null;\n    }\n    catch (_a) {\n        return null;\n    }\n};\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst consoles_json_1 = __importDefault(require(\"../../fixtures/regexes/device/consoles.json\"));\nconst variable_replacement_1 = require(\"../../utils/variable-replacement\");\nconst user_agent_1 = require(\"../../utils/user-agent\");\nclass ConsoleParser {\n    constructor() {\n        this.parse = (userAgent) => {\n            const result = {\n                type: \"\",\n                brand: \"\",\n                model: \"\"\n            };\n            for (const [brand, gameConsole] of Object.entries(consoles_json_1.default)) {\n                const match = user_agent_1.userAgentParser(gameConsole.regex, userAgent);\n                if (!match)\n                    continue;\n                result.type = gameConsole.device;\n                result.brand = brand;\n                if (\"model\" in gameConsole && gameConsole.model) {\n                    result.model = variable_replacement_1.variableReplacement(gameConsole.model, match).trim();\n                }\n                else if (\"models\" in gameConsole && gameConsole.models) {\n                    for (const model of gameConsole.models) {\n                        const modelMatch = user_agent_1.userAgentParser(model.regex, userAgent);\n                        if (!modelMatch)\n                            continue;\n                        result.model = variable_replacement_1.variableReplacement(model.model, modelMatch).trim();\n                        break;\n                    }\n                }\n                break;\n            }\n            return result;\n        };\n    }\n}\nexports.default = ConsoleParser;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst browser_1 = __importDefault(require(\"./browser\"));\nconst mobile_apps_1 = __importDefault(require(\"./mobile-apps\"));\nconst feed_readers_1 = __importDefault(require(\"./feed-readers\"));\nconst libraries_1 = __importDefault(require(\"./libraries\"));\nconst media_players_1 = __importDefault(require(\"./media-players\"));\nconst personal_information_managers_1 = __importDefault(require(\"./personal-information-managers\"));\nconst clientParsers = [\n    feed_readers_1.default,\n    mobile_apps_1.default,\n    media_players_1.default,\n    personal_information_managers_1.default,\n    browser_1.default,\n    libraries_1.default\n];\nclass ClientParser {\n    constructor(options) {\n        this.options = {\n            versionTruncation: 1\n        };\n        this.parse = (userAgent) => {\n            for (const Parser of clientParsers) {\n                const parser = new Parser(this.options);\n                const client = parser.parse(userAgent);\n                if (client.type !== \"\")\n                    return client;\n            }\n            return null;\n        };\n        this.options = Object.assign(Object.assign({}, this.options), options);\n    }\n}\nexports.default = ClientParser;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst mobile_apps_json_1 = __importDefault(require(\"../../fixtures/regexes/client/mobile_apps.json\"));\nconst version_1 = require(\"../../utils/version\");\nconst variable_replacement_1 = require(\"../../utils/variable-replacement\");\nconst user_agent_1 = require(\"../../utils/user-agent\");\nclass MobileAppParser {\n    constructor(options) {\n        this.options = {\n            versionTruncation: 1\n        };\n        this.parse = (userAgent) => {\n            const result = {\n                type: \"\",\n                name: \"\",\n                version: \"\"\n            };\n            for (const mobileApp of mobile_apps_json_1.default) {\n                const match = user_agent_1.userAgentParser(mobileApp.regex, userAgent);\n                if (!match)\n                    continue;\n                result.type = \"mobile app\";\n                result.name = variable_replacement_1.variableReplacement(mobileApp.name, match);\n                result.version = version_1.formatVersion(variable_replacement_1.variableReplacement(mobileApp.version, match), this.options.versionTruncation);\n                break;\n            }\n            return result;\n        };\n        this.options = Object.assign(Object.assign({}, this.options), options);\n    }\n}\nexports.default = MobileAppParser;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst oss_json_1 = __importDefault(require(\"../../fixtures/regexes/oss.json\"));\nconst version_1 = require(\"../../utils/version\");\nconst variable_replacement_1 = require(\"../../utils/variable-replacement\");\nconst user_agent_1 = require(\"../../utils/user-agent\");\nconst operating_system_json_1 = __importDefault(require(\"./fixtures/operating-system.json\"));\nconst desktopOsArray = [\"AmigaOS\", \"IBM\", \"GNU/Linux\", \"Mac\", \"Unix\", \"Windows\", \"BeOS\", \"Chrome OS\"];\nconst shortOsNames = operating_system_json_1.default.operatingSystem;\nconst osFamilies = operating_system_json_1.default.osFamilies;\nclass OperatingSystemParser {\n    constructor(options) {\n        this.options = {\n            versionTruncation: 1\n        };\n        this.parse = (userAgent) => {\n            const result = {\n                name: \"\",\n                version: \"\",\n                platform: this.parsePlatform(userAgent)\n            };\n            for (const operatingSystem of oss_json_1.default) {\n                const match = user_agent_1.userAgentParser(operatingSystem.regex, userAgent);\n                if (!match)\n                    continue;\n                result.name = variable_replacement_1.variableReplacement(operatingSystem.name, match);\n                result.version = version_1.formatVersion(variable_replacement_1.variableReplacement(operatingSystem.version, match), this.options.versionTruncation);\n                if (result.name === \"lubuntu\") {\n                    result.name = \"Lubuntu\";\n                }\n                if (result.name === \"debian\") {\n                    result.name = \"Debian\";\n                }\n                if (result.name === \"YunOS\") {\n                    result.name = \"YunOs\";\n                }\n                return result;\n            }\n            return null;\n        };\n        this.parsePlatform = (userAgent) => {\n            if (user_agent_1.userAgentParser(\"arm|aarch64|Watch ?OS|Watch1,[12]\", userAgent)) {\n                return \"ARM\";\n            }\n            if (user_agent_1.userAgentParser(\"mips\", userAgent)) {\n                return \"MIPS\";\n            }\n            if (user_agent_1.userAgentParser(\"sh4\", userAgent)) {\n                return \"SuperH\";\n            }\n            if (user_agent_1.userAgentParser(\"WOW64|x64|win64|amd64|x86_?64\", userAgent)) {\n                return \"x64\";\n            }\n            if (user_agent_1.userAgentParser(\"(?:i[0-9]|x)86|i86pc\", userAgent)) {\n                return \"x86\";\n            }\n            return \"\";\n        };\n        this.options = Object.assign(Object.assign({}, this.options), options);\n    }\n}\nexports.default = OperatingSystemParser;\nOperatingSystemParser.getDesktopOsArray = () => desktopOsArray;\nOperatingSystemParser.getOsFamily = (osName) => {\n    const osShortName = OperatingSystemParser.getOsShortName(osName);\n    for (const [osFamily, shortNames] of Object.entries(osFamilies)) {\n        if (shortNames.includes(osShortName)) {\n            return osFamily;\n        }\n    }\n    return \"\";\n};\nOperatingSystemParser.getOsShortName = (osName) => {\n    for (const [shortName, name] of Object.entries(shortOsNames)) {\n        if (name === osName)\n            return shortName;\n    }\n    return \"\";\n};\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst libraries_json_1 = __importDefault(require(\"../../fixtures/regexes/client/libraries.json\"));\nconst version_1 = require(\"../../utils/version\");\nconst variable_replacement_1 = require(\"../../utils/variable-replacement\");\nconst user_agent_1 = require(\"../../utils/user-agent\");\nclass LibraryParser {\n    constructor(options) {\n        this.options = {\n            versionTruncation: 1\n        };\n        this.parse = (userAgent) => {\n            const result = {\n                type: \"\",\n                name: \"\",\n                version: \"\",\n                url: \"\"\n            };\n            for (const library of libraries_json_1.default) {\n                const match = user_agent_1.userAgentParser(library.regex, userAgent);\n                if (!match)\n                    continue;\n                result.type = \"library\";\n                result.name = variable_replacement_1.variableReplacement(library.name, match);\n                result.version = version_1.formatVersion(variable_replacement_1.variableReplacement(library.version, match), this.options.versionTruncation);\n                result.url = library.url || \"\";\n                break;\n            }\n            return result;\n        };\n        this.options = Object.assign(Object.assign({}, this.options), options);\n    }\n}\nexports.default = LibraryParser;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst cameras_1 = __importDefault(require(\"./cameras\"));\nconst mobiles_1 = __importDefault(require(\"./mobiles\"));\nconst televisions_1 = __importDefault(require(\"./televisions\"));\nconst cars_1 = __importDefault(require(\"./cars\"));\nconst consoles_1 = __importDefault(require(\"./consoles\"));\nconst notebooks_1 = __importDefault(require(\"./notebooks\"));\nconst portable_media_players_1 = __importDefault(require(\"./portable-media-players\"));\nconst deviceParsers = [\n    consoles_1.default,\n    cars_1.default,\n    cameras_1.default,\n    televisions_1.default,\n    portable_media_players_1.default,\n    mobiles_1.default,\n    notebooks_1.default\n];\nclass ClientParser {\n    constructor() {\n        this.parse = (userAgent) => {\n            for (const Parser of deviceParsers) {\n                const parser = new Parser();\n                const device = parser.parse(userAgent);\n                if (device.type !== \"\") {\n                    return device;\n                }\n            }\n            return null;\n        };\n    }\n}\nexports.default = ClientParser;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.variableReplacement = (template, variables) => {\n    const regex = new RegExp(`\\\\$\\\\d`, \"g\");\n    if (template === null || template === undefined)\n        return \"\";\n    return template.replace(regex, (match) => {\n        const index = parseInt(match.substr(1), 10);\n        const variable = variables[index - 1];\n        return variable || \"\";\n    });\n};\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst mediaplayers_json_1 = __importDefault(require(\"../../fixtures/regexes/client/mediaplayers.json\"));\nconst version_1 = require(\"../../utils/version\");\nconst variable_replacement_1 = require(\"../../utils/variable-replacement\");\nconst user_agent_1 = require(\"../../utils/user-agent\");\nclass MediaPlayerParser {\n    constructor(options) {\n        this.options = {\n            versionTruncation: 1\n        };\n        this.parse = (userAgent) => {\n            const result = {\n                type: \"\",\n                name: \"\",\n                version: \"\"\n            };\n            for (const mediaPlayer of mediaplayers_json_1.default) {\n                const match = user_agent_1.userAgentParser(mediaPlayer.regex, userAgent);\n                if (!match)\n                    continue;\n                result.type = \"media player\";\n                result.name = variable_replacement_1.variableReplacement(mediaPlayer.name, match);\n                result.version = version_1.formatVersion(variable_replacement_1.variableReplacement(mediaPlayer.version, match), this.options.versionTruncation);\n                break;\n            }\n            return result;\n        };\n        this.options = Object.assign(Object.assign({}, this.options), options);\n    }\n}\nexports.default = MediaPlayerParser;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst notebooks_json_1 = __importDefault(require(\"../../fixtures/regexes/device/notebooks.json\"));\nconst variable_replacement_1 = require(\"../../utils/variable-replacement\");\nconst user_agent_1 = require(\"../../utils/user-agent\");\nconst model_1 = require(\"../../utils/model\");\nclass NotebooksParser {\n    constructor() {\n        this.parse = (userAgent) => {\n            const result = {\n                type: \"\",\n                brand: \"\",\n                model: \"\"\n            };\n            if (!user_agent_1.userAgentParser(\"FBMD/\", userAgent)) {\n                return result;\n            }\n            for (const [brand, notebook] of Object.entries(notebooks_json_1.default)) {\n                const match = user_agent_1.userAgentParser(notebook.regex, userAgent);\n                if (!match)\n                    continue;\n                result.type = \"desktop\";\n                result.brand = brand;\n                if (\"model\" in notebook && notebook.model) {\n                    result.model = model_1.buildModel(variable_replacement_1.variableReplacement(notebook.model, match)).trim();\n                }\n                else if (\"models\" in notebook && notebook.models) {\n                    for (const model of notebook.models) {\n                        const match = user_agent_1.userAgentParser(model.regex, userAgent);\n                        if (!match)\n                            continue;\n                        result.model = variable_replacement_1.variableReplacement(model.model, match).trim();\n                    }\n                }\n                break;\n            }\n            return result;\n        };\n    }\n}\nexports.default = NotebooksParser;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.buildModel = (model) => {\n    model = model.replace(/_/g, \" \");\n    model = model.replace(RegExp(\" TD$\", \"i\"), \"\");\n    if (model === \"Build\")\n        return \"\";\n    return model;\n};\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nconst client_1 = __importDefault(require(\"./parsers/client\"));\nconst device_1 = __importDefault(require(\"./parsers/device\"));\nconst operating_system_1 = __importDefault(require(\"./parsers/operating-system\"));\nconst vendor_fragment_1 = __importDefault(require(\"./parsers/vendor-fragment\"));\nconst browser_1 = __importDefault(require(\"./parsers/client/browser\"));\nconst BotParser = require(\"./parsers/bot\");\nconst user_agent_1 = require(\"./utils/user-agent\");\nconst version_compare_1 = require(\"./utils/version-compare\");\nclass DeviceDetector {\n    constructor(options) {\n        // Default options\n        this.options = {\n            skipBotDetection: false,\n            versionTruncation: 1\n        };\n        this.parse = (userAgent) => {\n            var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p;\n            const result = {\n                client: this.clientParser.parse(userAgent),\n                os: this.operatingSystemParser.parse(userAgent),\n                device: this.deviceParser.parse(userAgent),\n                bot: this.options.skipBotDetection ? null : this.botParser.parse(userAgent)\n            };\n            const osName = (_a = result.os) === null || _a === void 0 ? void 0 : _a.name;\n            const osVersion = (_b = result.os) === null || _b === void 0 ? void 0 : _b.version;\n            const osFamily = operating_system_1.default.getOsFamily(osName || \"\");\n            if (!((_c = result.device) === null || _c === void 0 ? void 0 : _c.brand)) {\n                const brand = this.vendorFragmentParser.parse(userAgent);\n                if (brand) {\n                    if (!result.device) {\n                        result.device = this.createDeviceObject();\n                    }\n                    result.device.brand = brand;\n                }\n            }\n            /**\n             * Assume all devices running iOS / Mac OS are from Apple\n             */\n            if (!((_d = result.device) === null || _d === void 0 ? void 0 : _d.brand) && [\"Apple TV\", \"watchOS\", \"iOS\", \"Mac\"].includes(osName || \"\")) {\n                if (!result.device) {\n                    result.device = this.createDeviceObject();\n                }\n                result.device.brand = \"Apple\";\n            }\n            /**\n             * Chrome on Android passes the device type based on the keyword 'Mobile'\n             * If it is present the device should be a smartphone, otherwise it's a tablet\n             * See https://developer.chrome.com/multidevice/user-agent#chrome_for_android_user_agent\n             * Note: We do not check for browser (family) here, as there might be mobile apps using Chrome, that won't have\n             *       a detected browser, but can still be detected. So we check the useragent for Chrome instead.\n             */\n            if (!((_e = result.device) === null || _e === void 0 ? void 0 : _e.type) && osFamily === \"Android\" && user_agent_1.userAgentParser(\"Chrome/[\\\\.0-9]*\", userAgent)) {\n                if (user_agent_1.userAgentParser(\"Chrome/[.0-9]* (?:Mobile|eliboM)\", userAgent)) {\n                    if (!result.device) {\n                        result.device = this.createDeviceObject();\n                    }\n                    result.device.type = \"smartphone\";\n                }\n                else if (user_agent_1.userAgentParser(\"Chrome/[.0-9]* (?!Mobile)\", userAgent)) {\n                    if (!result.device) {\n                        result.device = this.createDeviceObject();\n                    }\n                    result.device.type = \"tablet\";\n                }\n            }\n            /**\n             * Some user agents simply contain the fragment 'Android; Tablet;' or 'Opera Tablet', so we assume those devices are tablets\n             */\n            if (!((_f = result.device) === null || _f === void 0 ? void 0 : _f.type) && this.hasAndroidTabletFragment(userAgent) || user_agent_1.userAgentParser(\"Opera Tablet\", userAgent)) {\n                if (!result.device) {\n                    result.device = this.createDeviceObject();\n                }\n                result.device.type = \"tablet\";\n            }\n            /**\n             * Some user agents simply contain the fragment 'Android; Mobile;', so we assume those devices are smartphones\n             */\n            if (!((_g = result.device) === null || _g === void 0 ? void 0 : _g.type) && this.hasAndroidMobileFragment(userAgent)) {\n                if (!result.device) {\n                    result.device = this.createDeviceObject();\n                }\n                result.device.type = \"smartphone\";\n            }\n            /**\n             * Android up to 3.0 was designed for smartphones only. But as 3.0, which was tablet only, was published\n             * too late, there were a bunch of tablets running with 2.x\n             * With 4.0 the two trees were merged and it is for smartphones and tablets\n             *\n             * So were are expecting that all devices running Android < 2 are smartphones\n             * Devices running Android 3.X are tablets. Device type of Android 2.X and 4.X+ are unknown\n             */\n            if (!((_h = result.device) === null || _h === void 0 ? void 0 : _h.type) && osName === \"Android\" && osVersion !== \"\") {\n                if (version_compare_1.versionCompare(osVersion, \"2.0\") === -1) {\n                    if (!result.device) {\n                        result.device = this.createDeviceObject();\n                    }\n                    result.device.type = \"smartphone\";\n                }\n                else if (version_compare_1.versionCompare(osVersion, \"3.0\") >= 0 && version_compare_1.versionCompare(osVersion, \"4.0\") === -1) {\n                    if (!result.device) {\n                        result.device = this.createDeviceObject();\n                    }\n                    result.device.type = \"tablet\";\n                }\n            }\n            /**\n             * All detected feature phones running android are more likely smartphones\n             */\n            if (((_j = result.device) === null || _j === void 0 ? void 0 : _j.type) === \"feature phone\" && osFamily === \"Android\") {\n                result.device.type = \"smartphone\";\n            }\n            /**\n             * According to http://msdn.microsoft.com/en-us/library/ie/hh920767(v=vs.85).aspx\n             * Internet Explorer 10 introduces the \"Touch\" UA string token. If this token is present at the end of the\n             * UA string, the computer has touch capability, and is running Windows 8 (or later).\n             * This UA string will be transmitted on a touch-enabled system running Windows 8 (RT)\n             *\n             * As most touch enabled devices are tablets and only a smaller part are desktops/notebooks we assume that\n             * all Windows 8 touch devices are tablets.\n             */\n            if (!((_k = result.device) === null || _k === void 0 ? void 0 : _k.type)\n                && this.isToucheEnabled(userAgent)\n                && (osName === \"Windows RT\"\n                    || (osName === \"Windows\"\n                        && version_compare_1.versionCompare(osVersion, \"8.0\") >= 0))) {\n                if (!result.device) {\n                    result.device = this.createDeviceObject();\n                }\n                result.device.type = \"tablet\";\n            }\n            /**\n             * All devices running Opera TV Store are assumed to be televisions\n             */\n            if (user_agent_1.userAgentParser(\"Opera TV Store\", userAgent)) {\n                if (!result.device) {\n                    result.device = this.createDeviceObject();\n                }\n                result.device.type = \"television\";\n            }\n            /**\n             * All devices running Tizen TV or SmartTV are assumed to be televisions\n             */\n            if (user_agent_1.userAgentParser(\"SmartTV|Tizen.+ TV .+$\", userAgent)) {\n                if (!result.device) {\n                    result.device = this.createDeviceObject();\n                }\n                result.device.type = \"television\";\n            }\n            /**\n             * Devices running Kylo or Espital TV Browsers are assumed to be televisions\n             */\n            if (!((_l = result.device) === null || _l === void 0 ? void 0 : _l.type) && [\"Kylo\", \"Espial TV Browser\"].includes(((_m = result.client) === null || _m === void 0 ? void 0 : _m.name) || \"\")) {\n                if (!result.device) {\n                    result.device = this.createDeviceObject();\n                }\n                result.device.type = \"television\";\n            }\n            /**\n             * Set device type to desktop if string ua contains desktop\n             */\n            const hasDesktop = \"desktop\" !== ((_o = result.device) === null || _o === void 0 ? void 0 : _o.type)\n                && null !== user_agent_1.userAgentParser(\"Desktop\", userAgent)\n                && this.hasDesktopFragment(userAgent);\n            if (hasDesktop) {\n                if (!result.device) {\n                    result.device = this.createDeviceObject();\n                }\n                result.device.type = \"desktop\";\n            }\n            // set device type to desktop for all devices running a desktop os that were not detected as an other device type\n            if (!((_p = result.device) === null || _p === void 0 ? void 0 : _p.type) && this.isDesktop(result, osFamily)) {\n                if (!result.device) {\n                    result.device = this.createDeviceObject();\n                }\n                result.device.type = \"desktop\";\n            }\n            return result;\n        };\n        this.hasAndroidMobileFragment = (userAgent) => {\n            return user_agent_1.userAgentParser(\"Android( [\\.0-9]+)?; Mobile;\", userAgent);\n        };\n        this.hasAndroidTabletFragment = (userAgent) => {\n            return user_agent_1.userAgentParser(\"Android( [\\.0-9]+)?; Tablet;\", userAgent);\n        };\n        this.hasDesktopFragment = (userAgent) => {\n            return user_agent_1.userAgentParser(\"Desktop (x(?:32|64)|WOW64);\", userAgent);\n        };\n        this.isDesktop = (result, osFamily) => {\n            if (!result.os) {\n                return false;\n            }\n            // Check for browsers available for mobile devices only\n            if (this.usesMobileBrowser(result.client)) {\n                return false;\n            }\n            return operating_system_1.default.getDesktopOsArray().includes(osFamily);\n        };\n        this.usesMobileBrowser = (client) => {\n            var _a, _b;\n            if (!client)\n                return false;\n            return ((_a = client) === null || _a === void 0 ? void 0 : _a.type) === \"browser\" && browser_1.default.isMobileOnlyBrowser((_b = client) === null || _b === void 0 ? void 0 : _b.name);\n        };\n        this.isToucheEnabled = (userAgent) => {\n            return user_agent_1.userAgentParser(\"Touch\", userAgent);\n        };\n        this.createDeviceObject = () => ({\n            type: \"\",\n            brand: \"\",\n            model: \"\"\n        });\n        this.options = Object.assign(Object.assign({}, this.options), options);\n        this.clientParser = new client_1.default(this.options);\n        this.deviceParser = new device_1.default();\n        this.operatingSystemParser = new operating_system_1.default(this.options);\n        this.vendorFragmentParser = new vendor_fragment_1.default();\n        this.botParser = new BotParser();\n    }\n}\nmodule.exports = DeviceDetector;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst pim_json_1 = __importDefault(require(\"../../fixtures/regexes/client/pim.json\"));\nconst version_1 = require(\"../../utils/version\");\nconst variable_replacement_1 = require(\"../../utils/variable-replacement\");\nconst user_agent_1 = require(\"../../utils/user-agent\");\nclass PersonalInformationManagerParser {\n    constructor(options) {\n        this.options = {\n            versionTruncation: 1\n        };\n        this.parse = (userAgent) => {\n            const result = {\n                type: \"\",\n                name: \"\",\n                version: \"\"\n            };\n            for (const personalInformationManager of pim_json_1.default) {\n                const match = user_agent_1.userAgentParser(personalInformationManager.regex, userAgent);\n                if (!match)\n                    continue;\n                result.type = \"personal information manager\";\n                result.name = variable_replacement_1.variableReplacement(personalInformationManager.name, match);\n                result.version = version_1.formatVersion(variable_replacement_1.variableReplacement(personalInformationManager.version, match), this.options.versionTruncation);\n                break;\n            }\n            return result;\n        };\n        this.options = Object.assign(Object.assign({}, this.options), options);\n    }\n}\nexports.default = PersonalInformationManagerParser;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.trim = (str, char) => {\n    return str.replace(new RegExp(\"^[\" + char + \"]+|[\" + char + \"]+$\", \"g\"), \"\");\n};\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst portable_media_player_json_1 = __importDefault(require(\"../../fixtures/regexes/device/portable_media_player.json\"));\nconst variable_replacement_1 = require(\"../../utils/variable-replacement\");\nconst user_agent_1 = require(\"../../utils/user-agent\");\nclass PortableMediaPlayersParser {\n    constructor() {\n        this.parse = (userAgent) => {\n            const result = {\n                type: \"\",\n                brand: \"\",\n                model: \"\"\n            };\n            for (const [brand, portableMediaPlayer] of Object.entries(portable_media_player_json_1.default)) {\n                const match = user_agent_1.userAgentParser(portableMediaPlayer.regex, userAgent);\n                if (!match)\n                    continue;\n                result.type = portableMediaPlayer.device;\n                result.brand = brand;\n                if (\"model\" in portableMediaPlayer && portableMediaPlayer.model) {\n                    result.model = variable_replacement_1.variableReplacement(portableMediaPlayer.model, match).trim();\n                }\n                else if (\"models\" in portableMediaPlayer && portableMediaPlayer.models) {\n                    for (const model of portableMediaPlayer.models) {\n                        const modelMatch = user_agent_1.userAgentParser(model.regex, userAgent);\n                        if (!modelMatch)\n                            continue;\n                        result.model = variable_replacement_1.variableReplacement(model.model, modelMatch).trim();\n                        break;\n                    }\n                }\n                break;\n            }\n            return result;\n        };\n    }\n}\nexports.default = PortableMediaPlayersParser;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst mobiles_json_1 = __importDefault(require(\"../../fixtures/regexes/device/mobiles.json\"));\nconst variable_replacement_1 = require(\"../../utils/variable-replacement\");\nconst user_agent_1 = require(\"../../utils/user-agent\");\nconst model_1 = require(\"../../utils/model\");\nclass MobileParser {\n    constructor() {\n        this.parse = (userAgent) => {\n            const result = {\n                type: \"\",\n                brand: \"\",\n                model: \"\"\n            };\n            let resultType = \"\";\n            for (const [brand, mobile] of Object.entries(mobiles_json_1.default)) {\n                const match = user_agent_1.userAgentParser(mobile.regex, userAgent);\n                if (!match)\n                    continue;\n                resultType = \"device\" in mobile && mobile.device || \"\";\n                result.brand = brand;\n                if (\"model\" in mobile && mobile.model) {\n                    result.model = model_1.buildModel(variable_replacement_1.variableReplacement(mobile.model, match)).trim();\n                }\n                else if (\"models\" in mobile && mobile.models) {\n                    for (const model of mobile.models) {\n                        const modelMatch = user_agent_1.userAgentParser(model.regex, userAgent);\n                        if (!modelMatch)\n                            continue;\n                        result.model = model_1.buildModel(variable_replacement_1.variableReplacement(model.model, modelMatch)).trim();\n                        if (\"device\" in model && model.device) {\n                            resultType = model.device;\n                        }\n                        if (\"brand\" in model) {\n                            result.brand = model.brand || \"\";\n                        }\n                        break;\n                    }\n                }\n                break;\n            }\n            // Sanitize device type\n            if (resultType === \"tv\") {\n                result.type = \"television\";\n            }\n            else if (resultType === \"car browser\") {\n                result.type = \"car\";\n            }\n            else {\n                result.type = resultType;\n            }\n            // Sanitize device brand\n            if (result.brand === \"Unknown\") {\n                result.brand = \"\";\n            }\n            return result;\n        };\n    }\n}\nexports.default = MobileParser;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst feed_readers_json_1 = __importDefault(require(\"../../fixtures/regexes/client/feed_readers.json\"));\nconst version_1 = require(\"../../utils/version\");\nconst variable_replacement_1 = require(\"../../utils/variable-replacement\");\nconst user_agent_1 = require(\"../../utils/user-agent\");\nclass FeedReaderParser {\n    constructor(options) {\n        this.options = {\n            versionTruncation: 1\n        };\n        this.parse = (userAgent) => {\n            const result = {\n                type: \"\",\n                name: \"\",\n                version: \"\",\n                url: \"\"\n            };\n            for (const feedReader of feed_readers_json_1.default) {\n                const match = user_agent_1.userAgentParser(feedReader.regex, userAgent);\n                if (!match)\n                    continue;\n                result.type = \"feed reader\";\n                result.name = variable_replacement_1.variableReplacement(feedReader.name, match);\n                result.version = version_1.formatVersion(variable_replacement_1.variableReplacement(feedReader.version, match), this.options.versionTruncation);\n                result.url = feedReader.url;\n                break;\n            }\n            return result;\n        };\n        this.options = Object.assign(Object.assign({}, this.options), options);\n    }\n}\nexports.default = FeedReaderParser;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","import {\r\n    preparePublicKeyCredentials,\r\n    preparePublicKeyOptions,\r\n\tshowMessage,\r\n\trequestLogin\r\n} from './shared.js';\r\n\r\nlet credParsing\t\t\t        = false;\r\nlet abortController;\r\n\r\nwindow.PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable().then(\r\n\tresult => {\r\n\t  if (!result) {\r\n\t\tconsole.log(\"No platform authenticator found. If your OS does not come with one, try using devtools to set one up.\");\r\n\t  }\r\n\t}\r\n);\r\n\r\n/**\r\n * \r\n * @param {string} username The user name to authenticate\r\n * @param {*} messageEl the html onject to display messages in\r\n */\r\nexport async function webAuthVerification(username, messageEl=null){\r\n\tif(messageEl != null){\r\n\t\tmessageEl.classList.remove('success');\r\n\t\tmessageEl.classList.remove('error');\r\n\t}\r\n\r\n\ttry{\r\n\t\t// Get the challenge\r\n\t\tlet formData\t\t\t= new FormData();\r\n\t\tformData.append('username', username);\r\n\r\n\t\tlet response\t\t\t= await FormSubmit.fetchRestApi('login/auth_start', formData);\r\n\t\tif(!response){\r\n\t\t\tthrow new Error('Fetching Server Challenge failed');\r\n\t\t}\r\n\r\n\t\tlet publicKey\t\t\t= preparePublicKeyOptions(response);\r\n\r\n\t\t// Update message\r\n\t\tif(messageEl != null){\r\n\t\t\tmessageEl.textContent\t= 'Waiting for biometric';\r\n\t\t}\r\n\r\n\t\t// Verify on device\r\n\t\tlet credentials\t\t\t= await navigator.credentials.get({\tpublicKey });\r\n\r\n\t\t// Update message\r\n\t\tif(messageEl != null){\r\n\t\t\tmessageEl.textContent\t= 'Verifying...';\r\n\t\t}\r\n\r\n\t\t// Verify on the server\r\n\t\tconst publicKeyCredential \t= preparePublicKeyCredentials(credentials);\r\n\t\tlet form \t\t\t\t\t= document.getElementById('loginform') ? document.getElementById('loginform') : undefined;\r\n\t\tformData\t\t\t\t\t= new FormData(form);\r\n\t\tformData.append('publicKeyCredential', JSON.stringify(publicKeyCredential));\r\n\t\tresponse\t\t\t\t\t= await FormSubmit.fetchRestApi('login/auth_finish', formData);\r\n\t\tif(!response){\r\n\t\t\tthrow new Error('Verification failed');\r\n\t\t}\r\n\r\n\t\tif(messageEl != null){\r\n\t\t\tmessageEl.textContent\t= 'Verification successfull';\r\n\t\t\tmessageEl.classList.add('success');\r\n\t\t}else{\r\n\t\t\tMain.displayMessage('Verification successfull');\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}catch(error){\r\n\t\tconsole.error(error);\r\n\r\n\t\tif(messageEl != null){\r\n\t\t\tmessageEl.textContent\t= error;\r\n\t\t\tmessageEl.classList.add('error');\r\n\t\t}else{\r\n\t\t\tMain.displayMessage(error, 'error');\r\n\t\t}\r\n\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\n// Send request to start webauthn\r\nexport async function verifyWebauthn(methods){\t\r\n\t//show webauthn messages\r\n\tdocument.getElementById('webauthn-wrapper').classList.remove('hidden');\r\n\r\n\tlet username\t= document.getElementById('username').value;\r\n\r\n\ttry{\r\n\t\tlet result\t= await webAuthVerification(username, document.querySelector('#webauthn-wrapper .status_message'));\r\n\r\n\t\tif(!result){\r\n\t\t\tthrow new Error( 'Webauthentication failed' );\r\n\t\t}\r\n\r\n\t\t//authentication success\r\n\t\tawait requestLogin();\r\n\t}catch (error){\r\n\t\tif(document.getElementById('logging_in_wrapper').classList.add('hidden'));\r\n\r\n\t\t//authentication failed\r\n\t\tdocument.querySelector('#webauthn-wrapper').classList.add('hidden');\r\n\r\n\t\tlet response\t= await FormSubmit.fetchRestApi('login/mark_bio_as_failed', '', false);\r\n\t\t\r\n\t\tconsole.log(response);\r\n\r\n\t\tif(methods.length == 1){\r\n\t\t\tshowMessage('Authentication failed, please setup an additional login factor.', 'error');\r\n\t\t\trequestLogin();\r\n\t\t}else{\r\n\t\t\tconsole.error(error);\r\n\t\t\tvar message;\r\n\t\t\tif(error['message'] == \"No authenticator available\"){\r\n\t\t\t\tmessage = \"No biometric login for this device found. <br>Give verification code.\";\r\n\t\t\t}else{\r\n\t\t\t\tmessage = 'Web authentication failed, please give verification code.';\r\n\t\t\t}\r\n\t\t\tshowMessage(message, 'error');\r\n\r\n\t\t\t//Show other 2fa fields\r\n\t\t\tshowTwoFaFields(methods);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n// Request email code for 2fa login\r\nexport async function requestEmailCode(){\r\n\t//add new one\r\n\tlet loader\t\t\t\t= Main.showLoader(null, false, 50, '', true);\r\n\tshowMessage(`Sending e-mail... ${loader}`);\r\n\r\n\tlet username\t= document.getElementById('username').value;\r\n\tlet formData\t= new FormData();\r\n\tformData.append('username',username);\r\n\r\n\tlet response\t= await FormSubmit.fetchRestApi('login/request_email_code', formData, false);\r\n\t\r\n\tif(response){\r\n\t\tshowMessage(response, 'success');\r\n\t}else{\r\n\t\tshowMessage(`Sending e-mail failed`, 'error');\r\n\t}\r\n}\r\n\r\nexport async function processCredential(credential){\r\n\tif(credParsing){\r\n\t\treturn;\r\n\t}\r\n\r\n\tif (credential) {\r\n\t\tcredParsing\t= true;\r\n\t\tlet username = String.fromCodePoint(...new Uint8Array(credential.response.userHandle));\r\n\r\n\t\tdocument.querySelector('#webauthn-wrapper .status_message').textContent='Verifying credentials...';\r\n\r\n\t\t// Verify on the server\r\n\t\tconst publicKeyCredential \t= preparePublicKeyCredentials(credential);\r\n\t\tlet formData\t\t\t\t= new FormData(document.getElementById('loginform'));\r\n\t\tformData.append('publicKeyCredential', JSON.stringify(publicKeyCredential));\r\n\t\tlet response\t\t\t\t= await FormSubmit.fetchRestApi('login/auth_finish', formData, false);\r\n\r\n\t\tif(response){\r\n\t\t\tshowMessage('Passkey login succesfull', 'success');\r\n\t\t}else{\r\n\t\t\tdocument.querySelector('#webauthn-wrapper .status_message').textContent='Please authenticate';\r\n\r\n\t\t\tdocument.querySelectorAll('#usercred_wrapper').forEach(el=>el.classList.remove('hidden'));\r\n\t\t\tdocument.querySelectorAll('#webauthn-wrapper').forEach(el=>el.classList.add('hidden'));\r\n\r\n\t\t\tshowMessage('Passkey login failed, try using your username and password', 'error');\r\n\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\t//authentication success\r\n\t\treturn await requestLogin();\r\n\r\n\t} else {\r\n\t\tconsole.log(\"Credential returned null\");\r\n\r\n\t\tdocument.getElementById('usercred_wrapper').classList.remove('hidden');\r\n\t\tdocument.getElementById('webauthn-wrapper').classList.add('hidden');\r\n\r\n\t\tshowMessage('Passkey login failed', 'error');\r\n\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\nexport let startConditionalRequest = async (mediation) => {\r\n\tif (window.PublicKeyCredential && PublicKeyCredential.isConditionalMediationAvailable) {\r\n\t\tconsole.log(\"Conditional UI is understood by the browser\");\r\n\t\tif (!await window.PublicKeyCredential.isConditionalMediationAvailable()) {\r\n\t\t\tconsole.log(\"Conditional UI is understood by your browser but not available\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t} else {\r\n\t\tif (!navigator.credentials.conditionalMediationSupported) {\r\n\t\t\tconsole.log(\"Your browser does not implement Conditional UI (are you running the right chrome/safari version with the right flags?)\");\r\n\t\t\treturn;\r\n\t\t} else {\r\n\t\t\tconsole.log(\"This browser understand the old version of Conditional UI feature detection\");\r\n\t\t}\r\n\t}\r\n\r\n\tif(abortController != undefined){\r\n\t\tconsole.log('Cancelling previous request');\r\n\t\tabortController.abort('aborted');\r\n\t}\r\n\t\r\n\tabortController\t= new AbortController();\r\n\t\t\r\n\tabortController.onAbort\t= function(ev){\r\n\t\tconsole.log(ev);\r\n\t}\r\n\tabortController.signal.onAbort\t= function(ev){\r\n\t\tconsole.log(ev);\r\n\t}\r\n\r\n\tif(mediation != 'conditional'){\r\n\t\tdocument.getElementById('usercred_wrapper').classList.add('hidden');\r\n\t\tdocument.getElementById('webauthn-wrapper').classList.remove('hidden');\r\n\r\n\t\tshowMessage('Performing passkey login');\r\n\t}\r\n\r\n\tlet usercredWrapper\t= document.getElementById('usercred_wrapper');\r\n\r\n\ttry {\r\n\t\tlet formData\t\t\t= new FormData();\r\n\t\tformData.append('username', '');\r\n\r\n\t\tlet response\t\t\t= await FormSubmit.fetchRestApi('login/auth_start', formData);\r\n\t\tif(!response){\r\n\t\t\tthrow new Error('auth_start failed');\r\n\t\t}\r\n\r\n\t\tlet publicKey\t\t\t= preparePublicKeyOptions(response);\r\n\r\n\t\tlet credential = await navigator.credentials.get({\r\n\t\t\tsignal: abortController.signal,\r\n\t\t\tpublicKey: {\r\n\t\t\t\tchallenge: publicKey.challenge\r\n\t\t\t},\r\n\t\t\t//mediation: 'silent',\r\n\t\t\t//mediation: 'conditional',\r\n\t\t\t//mediation: 'required',\r\n\t\t\tmediation: mediation\r\n\t\t});\r\n\r\n\t\tif(mediation == 'conditional'){\t\r\n\t\t\tusercredWrapper.classList.add('hidden');\r\n\t\t\tdocument.getElementById('webauthn-wrapper').classList.remove('hidden');\r\n\t\r\n\t\t\tshowMessage('Performing passkey login');\r\n\t\t}\r\n\t\t\r\n\t\treturn await processCredential(credential);\r\n\t} catch (error) {\r\n\t\tif (error == \"aborted\") {\r\n\t\t\tconsole.log(\"request aborted\");\r\n\t\t\treturn false;\r\n\t\t}\r\n\r\n\t\tif(error.message.includes('A request is already pending.')){\r\n\t\t\tstartConditionalRequest(mediation);\r\n\t\t}\r\n\r\n\t\t// only do when login modal is open\r\n\t\tif(usercredWrapper != null){\r\n\t\t\tusercredWrapper.classList.remove('hidden');\r\n\t\t\tdocument.getElementById('webauthn-wrapper').classList.add('hidden');\r\n\r\n\t\t\tshowMessage('Passkey login failed, try using your username and password', 'error');\r\n\t\t}\r\n\r\n\t\tconsole.log(error);\r\n\r\n\t\treturn false;\r\n\t}\r\n}\r\n\r\nexport async function checkWebauthnAvailable(){\r\n\tlet webauthnSupported\t= false;\r\n\t\r\n\tif (window.PublicKeyCredential) {\r\n\t\tlet available\t= await PublicKeyCredential.isUserVerifyingPlatformAuthenticatorAvailable();\r\n\t\tif (available) {\r\n\t\t\twebauthnSupported = true;\r\n\t\t} else {\r\n\t\t\tconsole.log(\"WebAuthn supported, Platform Authenticator not supported.\");\r\n\t\t}\r\n\t} else {\r\n\t\tconsole.log(\"Not supported.\");\r\n\t}\r\n\r\n\treturn webauthnSupported;\r\n}\r\n\r\n// Display the form for the 2fa email or authenticator code\r\nexport function showTwoFaFields(methods){\r\n\tif(methods.includes('email')){\r\n\t\trequestEmailCode();\r\n\t}\r\n\r\n\t//show 2fa fields\r\n\tfor(const element of methods){\r\n\t\tif(element == 'webauthn'){\r\n\t\t\t//do not show webauthn\r\n\t\t\tcontinue;\r\n\t\t}\r\n\t\tvar wrapper\t= document.getElementById(element+'_wrapper');\r\n\t\tif(wrapper != null){\r\n\t\t\twrapper.classList.remove('hidden');\r\n\t\t\twrapper.querySelectorAll('input').forEach(el=>window.setTimeout(() => el.focus(), 0));\r\n\t\t}\r\n\t}\r\n\r\n\t//enable login button\r\n\tdocument.querySelector(\"#login-button\").disabled\t\t\t= '';\r\n\t//show login button\r\n\tdocument.querySelector('#submit-login-wrapper').classList.remove('hidden');\r\n}","export function closeMobileMenu(){\r\n\t//close mobile menu\r\n\tdocument.querySelectorAll('#site-navigation, #mobile-menu-control-wrapper').forEach(el=>el.classList.remove('toggled'));\r\n\tdocument.querySelector('body').classList.remove('mobile-menu-open');\r\n\tdocument.querySelectorAll(\"#mobile-menu-control-wrapper > button\").forEach(el=>el.ariaExpanded = 'false');\r\n}\r\n\r\n// Decodes a Base64Url string\r\nconst base64UrlDecode = (input) => {\r\ninput = input\r\n\t.replace(/-/g, '+')\r\n\t.replace(/_/g, '/');\r\n\r\nconst pad = input.length % 4;\r\nif (pad) {\r\n\tif (pad === 1) {\r\n\tthrow new Error('InvalidLengthError: Input base64url string is the wrong length to determine padding');\r\n\t}\r\n\tinput += new Array(5-pad).join('=');\r\n}\r\n\r\nreturn window.atob(input);\r\n};\r\n\r\n// Converts an array of bytes into a Base64Url string\r\nconst arrayToBase64String = (a) => btoa(String.fromCharCode(...a));\r\n\r\n// Prepares the public key options object returned by the Webauthn Framework\r\nexport const preparePublicKeyOptions = publicKey => {\r\n\t//Convert challenge from Base64Url string to Uint8Array\r\n\tpublicKey.challenge = Uint8Array.from(\r\n\t\tbase64UrlDecode(publicKey.challenge),\r\n\t\tc => c.charCodeAt(0)\r\n\t);\r\n\r\n\t//Convert the user ID from Base64 string to Uint8Array\r\n\tif (publicKey.user !== undefined) {\r\n\t\tpublicKey.user = {\r\n\t\t...publicKey.user,\r\n\t\tid: Uint8Array.from(\r\n\t\t\twindow.atob(publicKey.user.id),\r\n\t\t\tc => c.charCodeAt(0)\r\n\t\t),\r\n\t\t};\r\n\t}\r\n\r\n\t//If excludeCredentials is defined, we convert all IDs to Uint8Array\r\n\tif (publicKey.excludeCredentials !== undefined) {\r\n\t\tpublicKey.excludeCredentials = publicKey.excludeCredentials.map(\r\n\t\t\tdata => {\r\n\t\t\treturn {\r\n\t\t\t\t...data,\r\n\t\t\t\tid: Uint8Array.from(\r\n\t\t\t\t\tbase64UrlDecode(data.id),\r\n\t\t\t\t\tc => c.charCodeAt(0)\r\n\t\t\t\t),\r\n\t\t\t};\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\tif (publicKey.allowCredentials !== undefined) {\r\n\t\tpublicKey.allowCredentials = publicKey.allowCredentials.map(\r\n\t\t\tdata => {\r\n\t\t\treturn {\r\n\t\t\t\t...data,\r\n\t\t\t\tid: Uint8Array.from(\r\n\t\t\t\t\tbase64UrlDecode(data.id),\r\n\t\t\t\t\tc => c.charCodeAt(0)\r\n\t\t\t\t),\r\n\t\t\t};\r\n\t\t\t}\r\n\t\t);\r\n\t}\r\n\r\n\treturn publicKey;\r\n};\r\n\r\n// Prepares the public key credentials object returned by the authenticator\r\nexport const preparePublicKeyCredentials = data => {\r\n\tconst publicKeyCredential = {\r\n\t\tid: data.id,\r\n\t\ttype: data.type,\r\n\t\trawId: arrayToBase64String(new Uint8Array(data.rawId)),\r\n\t\tresponse: {\r\n\t\tclientDataJSON: arrayToBase64String(\r\n\t\t\tnew Uint8Array(data.response.clientDataJSON)\r\n\t\t),\r\n\t\t},\r\n\t};\r\n\r\n\tif (data.response.attestationObject !== undefined) {\r\n\t\tpublicKeyCredential.response.attestationObject = arrayToBase64String(\r\n\t\t\tnew Uint8Array(data.response.attestationObject)\r\n\t\t);\r\n\t}\r\n\r\n\tif (data.response.authenticatorData !== undefined) {\r\n\t\tpublicKeyCredential.response.authenticatorData = arrayToBase64String(\r\n\t\t\tnew Uint8Array(data.response.authenticatorData)\r\n\t\t);\r\n\t}\r\n\r\n\tif (data.response.signature !== undefined) {\r\n\t\tpublicKeyCredential.response.signature = arrayToBase64String(\r\n\t\t\tnew Uint8Array(data.response.signature)\r\n\t\t);\r\n\t}\r\n\r\n\tif (data.response.userHandle !== undefined) {\r\n\t\tpublicKeyCredential.response.userHandle = arrayToBase64String(\r\n\t\t\tnew Uint8Array(data.response.userHandle)\r\n\t\t);\r\n\t}\r\n\r\n\treturn publicKeyCredential;\r\n};\r\n\r\nexport function showMessage(message, type=''){\r\n\tlet el = document.querySelector(\"#message\");\r\n\tel.innerHTML= DOMPurify.sanitize(message);\r\n\r\n\tel.classList.remove('success');\r\n\tel.classList.remove('warning');\r\n\tel.classList.remove('error');\r\n\r\n\tif(type == 'success'){\r\n\t\tel.classList.add('success');\r\n\t}\r\n\r\n\tif(type == 'warning'){\r\n\t\tel.classList.add('warning');\r\n\t}\r\n\r\n\tif(type == 'error'){\r\n\t\tel.classList.add('error');\r\n\t}\r\n}\r\n\r\n//show loader\r\nexport async function requestLogin(){\r\n\t//hide everything\r\n\tdocument.querySelectorAll('.authenticator-wrapper:not(.hidden)').forEach(el=>{\r\n\t\tel.classList.add('hidden');\r\n\t\tel.classList.add('current-method');\r\n\t});\r\n\t\r\n\t//show login message\r\n\tdocument.getElementById('logging_in_wrapper').classList.remove('hidden');\r\n\r\n\tlet form \t\t= document.getElementById('loginform');\r\n\tlet formData\t= new FormData(form);\r\n\tform.querySelectorAll('.hidden [required]').forEach(el=>{el.required = false});\r\n\tlet validity\t= form.reportValidity();\r\n\t//if not valid return\r\n\tif(!validity){\r\n\t\treturn false;\r\n\t}\r\n\r\n\tawait Main.waitForInternet();\r\n\r\n\tlet response\t= await FormSubmit.fetchRestApi('login/request_login', formData);\r\n\r\n\tif(response){\r\n\t\tconsole.log(response);\r\n\t\t// We are logging in from an iframe\r\n\t\tif(window.self !== window.top){\r\n\r\n\t\t\t// change message\r\n\t\t\tconsole.log(window.parent.document.getElementById('iframe-loader'));\r\n\t\t\tconsole.log(window.parent.document);\r\n\t\t\tconsole.log(window.parent);\r\n\t\t\twindow.parent.document.getElementById('iframe-loader').textContent\t= 'Succesfully logged in, you may now close this popup';\r\n\r\n\t\t\t// Refresh the rest api nonce\r\n\t\t\twindow.parent.sim.restNonce\t= response.nonce;\r\n\r\n\t\t\t// Update user id\r\n\t\t\twindow.parent.sim.userId\t= response.id;\r\n\r\n\t\t\tconsole.log(window.parent.document.getElementById('iframe-loader'));\r\n\r\n\t\t\t// close all iframes\r\n\t\t\twindow.parent.document.querySelectorAll('iframe').forEach(el=>el.remove());\r\n\t\t}else{\r\n\t\t\tdocument.querySelector('#logging_in_wrapper .status_message').textContent='Succesfully logged in, redirecting...';\r\n\r\n\t\t\tif(response.redirect == ''){\r\n\t\t\t\t// refresh the page\r\n\t\t\t\tlocation.reload();\r\n\t\t\t}else{\r\n\t\t\t\t// go to the redirect page\r\n\t\t\t\tlocation.href = response.redirect;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn true;\r\n\t}else{\r\n\t\tdocument.getElementById('logging_in_wrapper').classList.add('hidden');\r\n\r\n\t\tdocument.querySelector('.current-method').classList.remove('hidden');\r\n\r\n\t\treturn false;\r\n\t}\r\n}","// Import the registration hook\r\nimport { checkWebauthnAvailable } from './partials/webauth.js';\r\n\r\nimport { preparePublicKeyOptions, preparePublicKeyCredentials } from './partials/shared.js';\r\n\r\nimport DeviceDetector from \"device-detector-js\";\r\n\r\nconsole.log(\"Register webauthn is loaded\");\r\n\r\n//Start registration with button click\r\nasync function registerBiometric(){\r\n    try {\r\n        const deviceDetector    = new DeviceDetector();\r\n\r\n        const device            = deviceDetector.parse(window.navigator.userAgent);\r\n\r\n        let identifier          = `${device.device.type}_${device.device.brand}_${device.device.model}_${device.client.name}`;\r\n\r\n        //show loader\r\n        let loaderHtml = Main.showLoader(null, false, 50, 'Preparing biometric registration...', true);\r\n\r\n        let modalHtml   = `\r\n            <div id='register_biometrics_modal' class='modal'>\r\n                <div class=\"modal-content\" style='width:500px;'>\r\n                    <h4>Please take a few seconds to setup your login token</h4>\r\n                    ${loaderHtml}\r\n                </div>\r\n            </div>`;\r\n\r\n        document.querySelector('body').insertAdjacentHTML('afterEnd', modalHtml);\r\n        \r\n        let message\t\t= document.querySelector('#loader-wrapper .message');\r\n\r\n\t\t// Get biometric challenge\r\n\t\tlet formData\t\t\t= new FormData();\r\n\t\tformData.append('identifier', identifier);\r\n\t\tlet response\t\t\t= await FormSubmit.fetchRestApi('login/fingerprint_options', formData);\r\n\t\tif(!response){\r\n\t\t\tthrow new Error('Options retrieval failed');\r\n\t\t}\r\n\t\tlet publicKey \t\t\t= preparePublicKeyOptions(response);\r\n\r\n\t\t// Update the message\r\n\t\tmessage.textContent  \t= 'Please authenticate...';\r\n\r\n\t\t// Ask user to verify\r\n\t\tlet credentials \t\t= await navigator.credentials.create({publicKey});\r\n\r\n\t\t// Update the message\r\n\t\tmessage.textContent  \t= 'Saving authenticator...';\r\n\r\n\t\t// Store result\r\n\t\tvar publicKeyCredential = preparePublicKeyCredentials(credentials);\r\n\t\t\r\n\t\tformData\t\t\t= new FormData();\r\n\t\tformData.append('publicKeyCredential', JSON.stringify(publicKeyCredential));\r\n\t\tresponse\t\t\t= await FormSubmit.fetchRestApi('login/store_fingerprint', formData);\r\n\t\tif(!response){\r\n\t\t\tthrow new Error('Storing biometric failed');\r\n\t\t}\r\n  \r\n\t\tMain.displayMessage('Registration success');\r\n\t}catch(error){\r\n\t\tconsole.error(error);\r\n\t}\r\n\r\n    Main.hideModals();\r\n}\r\n\r\ndocument.addEventListener(\"DOMContentLoaded\", async function() {\r\n\tif( checkWebauthnAvailable()){\r\n        registerBiometric();\r\n    }\r\n});"],"names":["Object","defineProperty","exports","value","versionCompare","v1","v2","operator","i","x","compare","vm","prepVersion","v","replace","length","split","numVersion","isNaN","parseInt","Math","max","__importDefault","this","mod","__esModule","car_browsers_json_1","variable_replacement_1","user_agent_1","constructor","parse","userAgent","result","type","brand","model","car","entries","default","userAgentParser","regex","models","match","variableReplacement","trim","trim_1","formatVersion","version","versionTruncation","undefined","versionString","RegExp","versionParts","test","join","Number","isInteger","parseFloat","toFixed","slice","parseBrowserEngineVersion","engine","geckoVersionRegex","pop","cameras_json_1","camera","modelMatch","televisions_json_1","model_1","isHbbTv","television","buildModel","memoryCache","memoryCacheBucket","set","key","get","hasOwnProperty","bots_json_1","module","_a","_b","_c","_d","bot","name","category","url","producer","vendorfragments_json_1","vendorFragment","version_1","browsers_json_1","browser_engine_json_1","available_browsers_json_1","mobile_only_browsers_json_1","BrowserParser","options","engineVersion","browser","vrpVersion","shortVersion","versions","sortedEngineVersions","sort","a","b","versionThreshold","engineByVersion","browserEngine","exec","assign","getBrowserShortName","browserName","shortName","isMobileOnlyBrowser","includes","cache","rawRegex","regexInstance","cachedRegexInstance","getRegexInstance","consoles_json_1","gameConsole","device","browser_1","mobile_apps_1","feed_readers_1","libraries_1","media_players_1","personal_information_managers_1","clientParsers","Parser","client","mobile_apps_json_1","mobileApp","oss_json_1","operating_system_json_1","desktopOsArray","shortOsNames","operatingSystem","osFamilies","OperatingSystemParser","platform","parsePlatform","getDesktopOsArray","getOsFamily","osName","osShortName","getOsShortName","osFamily","shortNames","libraries_json_1","library","cameras_1","mobiles_1","televisions_1","cars_1","consoles_1","notebooks_1","portable_media_players_1","deviceParsers","template","variables","index","substr","mediaplayers_json_1","mediaPlayer","notebooks_json_1","notebook","client_1","device_1","operating_system_1","vendor_fragment_1","BotParser","version_compare_1","skipBotDetection","_e","_f","_g","_h","_j","_k","_l","_m","_o","_p","clientParser","os","operatingSystemParser","deviceParser","botParser","osVersion","vendorFragmentParser","createDeviceObject","hasAndroidTabletFragment","hasAndroidMobileFragment","isToucheEnabled","hasDesktopFragment","isDesktop","usesMobileBrowser","pim_json_1","personalInformationManager","str","char","portable_media_player_json_1","portableMediaPlayer","mobiles_json_1","resultType","mobile","feed_readers_json_1","feedReader","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","call","n","getter","d","definition","o","enumerable","obj","prop","prototype","window","PublicKeyCredential","isUserVerifyingPlatformAuthenticatorAvailable","then","console","log","base64UrlDecode","input","pad","Error","Array","atob","arrayToBase64String","btoa","String","fromCharCode","document","addEventListener","async","webauthnSupported","checkWebauthnAvailable","navigator","identifier","modalHtml","Main","showLoader","querySelector","insertAdjacentHTML","message","formData","FormData","append","response","FormSubmit","fetchRestApi","publicKey","challenge","Uint8Array","from","c","charCodeAt","user","id","excludeCredentials","map","data","allowCredentials","textContent","credentials","create","publicKeyCredential","rawId","clientDataJSON","attestationObject","authenticatorData","signature","userHandle","JSON","stringify","displayMessage","error","hideModals","registerBiometric"],"sourceRoot":""}