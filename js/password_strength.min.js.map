{"version":3,"file":"password_strength.min.js","mappings":"mBAeO,SAASA,EAAkBC,GACjCA,EAAGC,2BAEH,IAAIC,EAASF,EAAGE,OAEQ,OAArBF,EAAGE,OAAOC,UACZD,EAASF,EAAGE,OAAOE,YAGQ,KAAzBF,EAAOG,QAAQC,QACjBJ,EAAOK,MAAe,gBACtBL,EAAOG,QAAQC,OAAc,IAC7BJ,EAAOM,UAAkBN,EAAOM,UAAUC,QAAQ,YAAa,WAC/DP,EAAOQ,QAAQ,aAAaC,cAAc,0BAA0BC,KAAO,SAE3EV,EAAOK,MAAe,gBACtBL,EAAOG,QAAQC,OAAc,IAC7BJ,EAAOM,UAAkBN,EAAOM,UAAUC,QAAQ,UAAW,aAC7DP,EAAOQ,QAAQ,aAAaC,cAAc,sBAAsBC,KAAO,WAEzE,CC/BA,SAASC,IACR,IAAIC,EAAUC,SAASJ,cAAc,kBACjCK,EAAUD,SAASJ,cAAc,kBACjCM,EAAaF,SAASJ,cAAc,0BACpCO,EAAaH,SAASJ,cAAc,0BAEpCQ,EACI,qBAQW,IAAfL,EAAMM,OACTH,EAAWI,YAAcF,EACzBF,EAAWK,UAAUC,IAAI,WAEzBC,EAAgBP,GAGE,IAAfD,EAAMI,OACTF,EAAWG,YAAcF,EACzBD,EAAWI,UAAUC,IAAI,YAEzBC,EAAgBN,GAGG,IAAfJ,EAAMM,OACTH,EAAWK,UAAUC,IAAI,UAG5B,CAEA,SAASC,EAAgBC,GACxBA,EAAUH,UAAUI,OAAO,QAAS,MAAO,OAAQ,UAEnD,IAAIZ,EAAUC,SAASJ,cAAc,kBACjCK,EAAUD,SAASJ,cAAc,kBAErC,GAAGG,EAAMM,OAASJ,EAAMI,MACvBK,EAAUH,UAAUC,IAAI,OACxBE,EAAUJ,YAAcF,QAAQQ,cAIhC,OAFeC,GAAGC,iBAAiBC,MAAMhB,EAAMM,MAAOQ,GAAGC,iBAAiBE,0BAA2Bf,EAAMI,QAG1G,KAAK,EACJK,EAAUH,UAAUC,IAAI,OACxBE,EAAUJ,YAAcF,QAAQa,IAChC,MACD,KAAK,EACJP,EAAUH,UAAUC,IAAI,QACxBE,EAAUJ,YAAcF,QAAQc,KAChC,MACD,KAAK,EACJR,EAAUH,UAAUC,IAAI,UACxBE,EAAUJ,YAAcF,QAAQe,OAChC,MACD,KAAK,EACJT,EAAUH,UAAUC,IAAI,SACxBE,EAAUJ,YAAcF,QAAQQ,SAChC,MACD,QACCF,EAAUH,UAAUC,IAAI,SACxBE,EAAUJ,YAAcF,QAAe,MAI1CM,EAAUH,UAAUI,OAAO,SAC5B,CAEAS,eAAeC,EAAqBC,GACnCA,EAAMpC,2BAEN,IAAIqC,EAAOD,EAAMnC,OAAOQ,QAAQ,QAE5B6B,EAAW,IAAIC,SAASF,GAExBG,QAAiBC,WAAWC,aAAa,wBAAyBJ,GAEnEE,IACFG,KAAKC,eAAeJ,EAASK,SAGzBC,SAASC,KAAKC,SAAS,eAC1BF,SAASC,KAAOP,EAASS,WAK3BZ,EAAK3B,cAAc,mCAAmCW,UAAUC,IAAI,SACrE,CA/FA4B,QAAQC,IAAI,+BAiGZrC,SAASsC,iBAAiB,oBAAoB,WAE7CtC,SAASuC,iBAAiB,eAAeC,SAAQC,GAAIA,EAAGH,iBAAiB,QAASxC,KAElFE,SAASuC,iBAAiB,4BAA4BC,SAAQC,GAAIA,EAAGH,iBAAiB,QAASjB,KAE/FrB,SAASuC,iBAAiB,oBAAoBC,SAAQC,GAAIA,EAAGH,iBAAiB,QAAStD,IACxF,G","sources":["webpack://login/./partials/shared.js","webpack://login/./password_strength.js"],"sourcesContent":["export function closeMobileMenu(){\r\n\t//close mobile menu\r\n\tdocument.querySelectorAll('#site-navigation, #mobile-menu-control-wrapper').forEach(el=>el.classList.remove('toggled'));\r\n\tdocument.querySelector('body').classList.remove('mobile-menu-open');\r\n\tdocument.querySelectorAll(\"#mobile-menu-control-wrapper > button\").forEach(el=>el.ariaExpanded = 0);\r\n}\r\n\r\nexport function showMessage(message){\r\n\tdocument.querySelectorAll(\"#message\").forEach(el => el.innerHTML= DOMPurify.sanitize(message));\r\n}\r\n\r\nexport function showStatusMessage(message){\r\n\tdocument.querySelectorAll(\".status-message\").forEach(el => el.innerHTML= DOMPurify.sanitize(message));\r\n}\r\n\r\nexport function togglePassworView(ev){\r\n\tev.stopImmediatePropagation();\r\n\t\r\n\tvar target\t= ev.target;\r\n\r\n\tif(ev.target.tagName == 'IMG'){\r\n\t\ttarget\t= ev.target.parentNode;\r\n\t}\r\n\r\n\tif(target.dataset.toggle == '0'){\r\n\t\ttarget.title\t\t\t\t\t\t\t\t= 'Hide password';\r\n\t\ttarget.dataset.toggle\t\t\t\t\t\t= '1';\r\n\t\ttarget.innerHTML\t\t\t\t\t\t\t= target.innerHTML.replace('invisible', 'visible');\r\n\t\ttarget.closest('.password').querySelector('input[type=\"password\"]').type\t= 'text';\r\n\t}else{\r\n\t\ttarget.title\t\t\t\t\t\t\t\t= 'Show password';\r\n\t\ttarget.dataset.toggle\t\t\t\t\t\t= '0';\r\n\t\ttarget.innerHTML\t\t\t\t\t\t\t= target.innerHTML.replace('visible', 'invisible');\r\n\t\ttarget.closest('.password').querySelector('input[type=\"text\"]').type\t= 'password';\r\n\t}\r\n}","import { togglePassworView } from './partials/shared.js';\r\n\r\nconsole.log('Password strength.js loaded');\r\n\r\nfunction checkPassStrength() {\r\n\tvar pass1 \t\t= document.querySelector('[name=\"pass1\"]');\r\n\tvar pass2 \t\t= document.querySelector('[name=\"pass2\"]');\r\n\tvar indicator1\t= document.querySelector('#pass-strength-result1');\r\n\tvar indicator2\t= document.querySelector('#pass-strength-result2');\r\n\r\n\tvar pwsL10n = {\r\n\t\tempty: \"Strength indicator\",\r\n\t\tshort: \"Improve this password, maybe add special characters\",\r\n\t\tbad: \"Keep going!\",\r\n\t\tgood: \"Allmost there, make it a little bit stronger\",\r\n\t\tstrong: \"Well done!\",\r\n\t\tmismatch: \"Mismatch\"\r\n\t};\r\n\r\n\tif (pass1.value == '') {\r\n\t\tindicator1.textContent = pwsL10n.empty;\r\n\t\tindicator1.classList.add('hidden');\r\n\t}else{\r\n\t\tupdateIndicator(indicator1);\r\n\t}\r\n\t\r\n\tif (pass2.value == '') {\r\n\t\tindicator2.textContent = pwsL10n.empty;\r\n\t\tindicator2.classList.add('hidden');\r\n\t}else{\r\n\t\tupdateIndicator(indicator2);\r\n\t\t\r\n\t\t//hide password strength indicator1\r\n\t\tif (pass1.value != '') {\r\n\t\t\tindicator1.classList.add('hidden');\r\n\t\t}\r\n\t}\r\n}\r\n\r\nfunction updateIndicator(indicator){\r\n\tindicator.classList.remove('short', 'bad', 'good', 'strong');\r\n\r\n\tvar pass1 \t\t= document.querySelector('[name=\"pass1\"]');\r\n\tvar pass2 \t\t= document.querySelector('[name=\"pass2\"]');\r\n\r\n\tif(pass1.value != pass2.value){\r\n\t\tindicator.classList.add('bad');\r\n\t\tindicator.textContent = pwsL10n.mismatch;\r\n\t}else{\r\n\t\tvar strength\t= wp.passwordStrength.meter(pass1.value, wp.passwordStrength.userInputDisallowedList(), pass2.value);\r\n\r\n\t\tswitch (strength) {\r\n\t\t\tcase 2:\r\n\t\t\t\tindicator.classList.add('bad');\r\n\t\t\t\tindicator.textContent = pwsL10n.bad;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 3:\r\n\t\t\t\tindicator.classList.add('good');\r\n\t\t\t\tindicator.textContent = pwsL10n.good;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 4:\r\n\t\t\t\tindicator.classList.add('strong');\r\n\t\t\t\tindicator.textContent = pwsL10n.strong;\r\n\t\t\t\tbreak;\r\n\t\t\tcase 5:\r\n\t\t\t\tindicator.classList.add('short');\r\n\t\t\t\tindicator.textContent = pwsL10n.mismatch;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tindicator.classList.add('short');\r\n\t\t\t\tindicator.textContent = pwsL10n['short'];\r\n\t\t}\r\n\t}\r\n\t\r\n\tindicator.classList.remove('hidden');\r\n}\r\n\r\nasync function submitPasswordChange(event){\r\n\tevent.stopImmediatePropagation();\r\n\r\n\tvar form\t= event.target.closest('form');\r\n\r\n\tvar formData\t= new FormData(form);\r\n\r\n\tvar response\t= await FormSubmit.fetchRestApi('login/update_password', formData);\r\n\r\n\tif(response){\r\n\t\tMain.displayMessage(response.message);\r\n\r\n\t\t// redirect to login again if resetting own password\r\n\t\tif(!location.href.includes('?user-id=')){\r\n\t\t\tlocation.href\t= response.redirect;\r\n\t\t}\r\n\t}\r\n\r\n\t// hide loader\r\n\tform.querySelector('.submit-wrapper .loader-wrapper').classList.add('hidden');\r\n}\r\n\t\t\t\t\t\r\ndocument.addEventListener(\"DOMContentLoaded\", function() {\r\n\t\r\n\tdocument.querySelectorAll('.changepass').forEach(el=>el.addEventListener(\"keyup\", checkPassStrength));\r\n\r\n\tdocument.querySelectorAll('[name=\"update-password\"]').forEach(el=>el.addEventListener(\"click\", submitPasswordChange));\r\n\r\n\tdocument.querySelectorAll('.toggle-pwd-view').forEach(el=>el.addEventListener(\"click\", togglePassworView));\r\n});"],"names":["togglePassworView","ev","stopImmediatePropagation","target","tagName","parentNode","dataset","toggle","title","innerHTML","replace","closest","querySelector","type","checkPassStrength","pass1","document","pass2","indicator1","indicator2","pwsL10n","value","textContent","classList","add","updateIndicator","indicator","remove","mismatch","wp","passwordStrength","meter","userInputDisallowedList","bad","good","strong","async","submitPasswordChange","event","form","formData","FormData","response","FormSubmit","fetchRestApi","Main","displayMessage","message","location","href","includes","redirect","console","log","addEventListener","querySelectorAll","forEach","el"],"sourceRoot":""}