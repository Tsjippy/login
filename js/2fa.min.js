console.log("2fa.js loaded"),document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelector("#webauthn_wrapper.hidden");null!=e&&e.classList.remove("hidden")})),document.addEventListener("click",(e=>{var t=e.target;"2fa_methods[]"==t.name&&function(e){document.querySelectorAll(".twofa_option").forEach((e=>e.classList.add("hidden")));var t=document.getElementById("setup-"+e.value);t.classList.remove("hidden"),Main.isMobileDevice()?t.querySelectorAll(".mobile.hidden").forEach((e=>e.classList.remove("hidden"))):t.querySelectorAll(".desktop.hidden").forEach((e=>e.classList.remove("hidden"))),"authenticator"==e.value&&e.closest("form").querySelector(".form_submit").classList.remove("hidden")}(t),t.matches(".remove_webauthn")&&async function(e){let t=e.closest("table"),s=e.closest("tr"),a=new FormData;a.append("key",e.dataset.key),Main.showLoader(e,!0);let d=await FormSubmit.fetchRestApi("login/remove_web_authenticator",a);d&&(2==t.rows.length?t.remove():s.remove(),Main.displayMessage(d))}(t),"save2fa"==t.name&&async function(e){let t=e.closest(".submit_wrapper").querySelector(".loader_wrapper");t.classList.remove("hidden");let s=e.closest("form");if(s.querySelectorAll(".hidden [required], select[required]").forEach((e=>{e.required=!1})),s.reportValidity()){let t=new FormData(s),a=await FormSubmit.fetchRestApi("login/save_2fa_settings",t);a&&(s.querySelectorAll('[id^="setup-"]:not(.hidden)').forEach((e=>e.classList.add("hidden"))),Main.displayMessage(a,"success"),e.closest("form").querySelector(".form_submit").classList.add("hidden"))}t.classList.add("hidden")}(t),"email-code-button"==t.id&&async function(e){let t=Main.showLoader(e,!1,50,"",!0);document.getElementById("email-message").innerHTML=`Sending e-mail... ${t}`;let s=document.getElementById("username").value,a=new FormData;a.append("username",s);let d=await FormSubmit.fetchRestApi("login/request_email_code",a);d&&(document.getElementById("email-message").innerHTML=d,document.getElementById("email-message").classList.add("success"),document.getElementById("email-code-validation").classList.remove("hidden"),e.classList.add("hidden"),e.closest("form").querySelector(".form_submit").classList.remove("hidden"),document.getElementById("email-code-validation").focus())}(t)}));
//# sourceMappingURL=2fa.min.js.map