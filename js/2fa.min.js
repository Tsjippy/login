console.log("2fa.js loaded"),document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelector("#webauthn-wrapper.hidden");null!=e&&e.classList.remove("hidden")})),document.addEventListener("click",(e=>{var t=e.target;"2fa-methods[]"==t.name&&function(e){document.querySelectorAll(".twofa-option").forEach((e=>e.classList.add("hidden")));var t=document.getElementById("setup-"+e.value);t.classList.remove("hidden"),Main.isMobileDevice()?t.querySelectorAll(".mobile.hidden").forEach((e=>e.classList.remove("hidden"))):t.querySelectorAll(".desktop.hidden").forEach((e=>e.classList.remove("hidden"))),"authenticator"==e.value&&e.closest("form").querySelector(".form-submit").classList.remove("hidden")}(t),t.matches(".remove-webauthn")&&async function(e){let t=e.closest("table"),a=e.closest("tr"),s=new FormData;s.append("key",e.dataset.key),Main.showLoader(e,!0);let o=await FormSubmit.fetchRestApi("login/remove_web_authenticator",s);o&&(2==t.rows.length?t.remove():a.remove(),Main.displayMessage(o))}(t),"save2fa"==t.name&&async function(e){let t=e.closest("form");if(t.querySelectorAll(".hidden [required], select[required]").forEach((e=>{e.required=!1})),t.reportValidity()){let a=new FormData(t),s=await FormSubmit.fetchRestApi("login/save_2fa_settings",a);s&&(t.querySelectorAll('[id^="setup-"]:not(.hidden)').forEach((e=>e.classList.add("hidden"))),Main.displayMessage(s,"success"),e.closest("form").querySelector(".form-submit").classList.add("hidden"))}}(t),"email-code-button"==t.id&&async function(e){let t=Main.showLoader(e,!1,50,"",!0);document.getElementById("email-message").innerHTML=`Sending e-mail... ${t}`;let a=document.getElementById("username").value,s=new FormData;s.append("username",a);let o=await FormSubmit.fetchRestApi("login/request_email_code",s);o&&(document.getElementById("email-message").innerHTML=o,document.getElementById("email-message").classList.add("success"),document.getElementById("email-code-validation").classList.remove("hidden"),e.classList.add("hidden"),e.closest("form").querySelector(".form-submit").classList.remove("hidden"),document.getElementById("email-code-validation").focus())}(t)}));
//# sourceMappingURL=2fa.min.js.map