console.log("2fa.js loaded"),document.addEventListener("DOMContentLoaded",(function(){var e=document.querySelector("#webauthn_wrapper.hidden");null!=e&&e.classList.remove("hidden")})),document.addEventListener("click",(e=>{var t=e.target;"2fa_methods[]"==t.name&&function(e){document.querySelectorAll(".twofa_option").forEach((e=>e.classList.add("hidden")));var t=document.getElementById("setup-"+e.value);t.classList.remove("hidden"),Main.isMobileDevice()?t.querySelectorAll(".mobile.hidden").forEach((e=>e.classList.remove("hidden"))):t.querySelectorAll(".desktop.hidden").forEach((e=>e.classList.remove("hidden"))),"authenticator"==e.value&&e.closest("form").querySelector(".form_submit").classList.remove("hidden")}(t),t.matches(".remove_webauthn")&&async function(e){let t=e.closest("table"),a=e.closest("tr"),s=new FormData;s.append("key",e.dataset.key),Main.showLoader(e,!0);let i=await FormSubmit.fetchRestApi("login/remove_web_authenticator",s);i&&(2==t.rows.length?t.remove():a.remove(),Main.displayMessage(i))}(t),"save2fa"==t.name&&async function(e){let t=e.closest(".submit_wrapper").querySelector(".loadergif");t.classList.remove("hidden");let a=e.closest("form");if(a.querySelectorAll(".hidden [required], select[required]").forEach((e=>{e.required=!1})),a.reportValidity()){let t=new FormData(a),s=await FormSubmit.fetchRestApi("login/save_2fa_settings",t);s&&(a.querySelectorAll('[id^="setup-"]:not(.hidden)').forEach((e=>e.classList.add("hidden"))),Main.displayMessage(s,"success"),e.closest("form").querySelector(".form_submit").classList.add("hidden"))}t.classList.add("hidden")}(t),"email-code-button"==t.id&&async function(e){var t=`<img id='loader' src='${sim.loadingGif}' style='height:30px;margin-top:-6px;float:right;'>`;document.getElementById("email-message").innerHTML=`Sending e-mail... ${t}`;var a=document.getElementById("username").value,s=new FormData;s.append("username",a);var i=await FormSubmit.fetchRestApi("login/request_email_code",s);i&&(document.getElementById("email-message").innerHTML=i,document.getElementById("email-message").classList.add("success"),document.getElementById("email-code-validation").classList.remove("hidden"),e.classList.add("hidden"),e.closest("form").querySelector(".form_submit").classList.remove("hidden"),document.getElementById("email-code-validation").focus())}(t)}));
//# sourceMappingURL=2fa.min.js.map